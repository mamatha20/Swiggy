function __(e){return document.getElementById(e)}function fnpInitialize(){initializeQuickShop()}function initializeToolbarButtonActions(){for(var e=["cartbtn","accountbtn"],t=["cartpanel","accountpanel"],a=[!0,!0],i=0;i<e.length;i++){var o=__(e[i]);o&&(o.fnp_targetId=t[i],o.fnp_targetEle=__(o.fnp_targetId),o.fnp_Clicked=!1,o.fnp_isShownInCommonDialog=a[i],toolbarButtons[e[i]]=o)}commonDialog=__("commondialogs")}function initializeQuickShop(){$("#qsdate").datepicker({dayNamesMin:["S","M","T","W","T","F","S"],dateFormat:"D M, dd",minDate:(new Date).getHours()<parseInt(quickShopDeliveryCutoffTime)?0:1,maxDate:"+45",showOtherMonths:!0,selectOtherMonths:!0,onSelect:function(e,t){var a=e,i=t.currentYear,o=$.datepicker.parseDate("D M, d,yy",a+","+i);$("input[name='deliverydate']").val($.datepicker.formatDate(dateFormat,o)),$(this).parents(".quickfrm").find("button.quickshopbtn").prop("disabled",!1),__("quickshophelper").removeAttribute("class")},beforeShow:function(){$("#qsform").append($("#ui-datepicker-div.smalldatepicker"))}}),$("#ui-datepicker-div").addClass("smalldatepicker")}function nextDay(e){return new Date(e.getTime()+864e5)}function checkButtonStates(e){if("undefined"!=typeof getCurrentlyClickedToolbarButton){var t=getCurrentlyClickedToolbarButton();if(t&&!t.fnp_targetEle.contains(e.target)&&!e.target.isInCommonDialog&&e.target.className.indexOf("datepicker")<0){if(e.target.className.indexOf("show_login_form")>=0||$(e.target).parents("#cartcontent").length)return!1;toolbarButtonUnclicked(t)}}null!=__("qsform")&&!__("qsform").contains(e.target)&&e.target.parentElement&&"qsuggestions"!=e.target.parentElement.id&&e.target.className.indexOf("datepicker")<0&&__("quickshophelper").removeAttribute("class")}function toolbarButtonClicked(e,t){if(!e.fnp_Clicked){t&&(t.stopPropagation?t.stopPropagation():t.cancelBubble=!0);var a=getCurrentlyClickedToolbarButton();if(a)return toolbarButtonUnclicked(a),void setTimeout(function(){toolbarButtonClicked(e,t)},300);e.fnp_Clicked=!0,e.fnp_targetEle.className="opened","quicksearchbtn"==e.id&&(e.fnp_targetEle.className="opened clipped",__("qscity").focus()),e.fnp_isShownInCommonDialog&&(commonDialog.className="opened"+e.id)}}function toolbarButtonUnclicked(e){e.fnp_Clicked=!1,"quicksearchbtn"==e.id?e.fnp_targetEle.className="clipped":"close-reveal-modal"==e.className?$("#commondialogs, #commondialogs>div").removeAttr("class"):e.fnp_targetEle.removeAttribute("class"),e.fnp_isShownInCommonDialog&&commonDialog.removeAttribute("class")}function displaySuggestionMessage(e,t){t?__("quickshopmsg").innerHTML=t:"qsdate"==e.id?__("quickshopmsg").innerHTML="Choose from above list or start typing and choose from the suggestions shown or <a href='javascript:void(0)' onclick='chooseDateForQS()'>choose date from calendar</a>":__("quickshopmsg").innerHTML="Choose from above list or start typing and choose from the suggestions shown"}function validateQSForm(e,t){var a=!1;for(var i in qsList){if(__(i).value.trim().length>0){a=!0;break}}if(!a){for(var o=__("qsuggestions");o.firstChild;)o.removeChild(o.firstChild);return __("quickshophelper").className="qssubmiterror",displaySuggestionMessage(e,"<span class='error'>Please select either city or occasion or delivery date.</span>"),!1}return!0}function showcrossIcon(){$("#fnpsearch").length&&document.getElementById("fnpsearch").value.trim()?$(".search-clear-pin").show():$(".search-clear-pin").hide()}function triggerCategoryHints(e){showcrossIcon();document.getElementById("fnpsearch").value.trim().length<window.searchStartCount?(e.removeAttribute("class"),e.isTyping=!1,getPopularSearchList(),$(".showhints").slideDown()):e.isTyping||(__("searchhintlistlabel").className="",e.isTyping=!0,showCategoryHints())}function getPopularSearchList(){var e=$("#FNP_CURRENT_CATALOG_ID").val();0==popSearchData.length?$.ajax({url:"/control/getPopularSearchData",type:"GET",async:!0,global:!1,dataType:"json",data:{contentId:"popular_search",currentCatalogId:e},success:function(e){popSearchData=[],$(e.data).each(function(e,t){if(void 0!=$(t).find(".ps-item")[0]){var a=$(t).find(".ps-item").html(),i=$(t).find(".ps-item").attr("href"),o=new Object;o.label=a,o.value=i,o.addClass="popular-search-item",popSearchData.push(o)}}),popSearchData.length>0?(__("searchhintlistlabel").className="popularsearch",__("searchhintlistdiv").className="showhints"):__("searchhintlistlabel").className="",appendListToUls(popSearchData)}}):(__("searchhintlistlabel").className="popularsearch",__("searchhintlistdiv").className="showhints",appendListToUls(popSearchData))}function appendListToUls(e){if(e){var t=$("#searchhintlist");t.empty();for(var a=0;a<e.length;a++){var i=$("<i/>").addClass("material-icons search-icons"),o=$("<li/>").addClass(e[a].addClass),n=$("<a/>").attr({href:e[a].value,"data-pos":a+1}),l=$("<span />").addClass("popular-search-label").text(e[a].label);o.append(n),n.append(l),n.append(i),t.append(o),$(".search-icons").text("search")}}}function showCategoryHints(){var e=__("fnpsearch"),t=__("searchhintlist"),a=e.value.toLowerCase().trim();if(""===a)for(t=__("searchhintlist");t.firstChild;)t.removeChild(t.firstChild);if(e.isTyping){__("searchhintlistdiv").className="showhints",e.className="istyping";var i=e.prevVal;e.prevVal=e.value,e.value==i?e.isTyping=!1:(a.length>=window.searchStartCount&&$.ajax({global:!1,url:AJAX_JSON_URL_LIST.searchTermSuggestionsUrl,dataType:"json",data:{qs:a.toLocaleLowerCase(),FNP_CURRENT_CATALOG_ID:$("#FNP_CURRENT_CATALOG_ID").val()},success:function(i){for(var o=[];t.firstChild;)t.removeChild(t.firstChild);prev==e.value&&(t.style.display="block",null!=i&&o.length<9&&a.length>0&&(loadCategoryType("productType",i.productType,o),i.occasion&&loadCategoryType("occasion",i.occasion,o)),0==a.length?__("searchhintlistlabel").className="scountempty":__("searchhintlistlabel").className="scount"+o.length),e.categoryHintsHandle=setTimeout(function(){e.value.trim().length>=window.searchStartCount?(cdp.searchList(e.value,o),__("searchhintlistlabel").className="",$(".showhints").slideDown()):(__("searchhintlistlabel").className="popularsearch",getPopularSearchList())})}}),setTimeout(function(){showCategoryHints()},500))}prev=e.prevVal,e.isTyping||e.removeAttribute("class"),0==a.length&&(__("searchhintlistlabel").className="scountempty")}function hideSearchHints(e,t){__("searchhintlistdiv").contains(t.relatedTarget)||$(".showhints").fadeOut()}function proceedCart(e){cdp.cartClickId(),createForm({formTypeDetails:{id:"checkout-login",type:"POST",action:e,submit:!0},formInputElements:[{name:"fnpSalesChannelEnumId",value:"ONLN_DSKTP_DIRECT"}]})}function createForm(e){var t=e.formTypeDetails,a=e.formInputElements||[],i=document.createElement("FORM");i.id=t.id,i.name=t.name,i.method=t.type,i.action=t.action;for(var o=0;o<a.length;o++)inputElement=document.createElement("INPUT"),inputElement.type="HIDDEN",inputElement.name=a[o].name,inputElement.value=a[o].value,inputElement.id=a[o].id,i.appendChild(inputElement);document.body.appendChild(i),t.submit&&document.getElementById(t.id).submit()}function check(e){var t=e.charCode?e.charCode:e.keyCode;return 46!=t&&((8==t||!(t<48||t>57)||46==t)&&void 0)}function showOrHideComponentLoader(e,t){"Y"==t?$(e).append("<div class='component-loader' style='display:block'><div class='component-loader-symbol'></div></div>").show():"N"==t&&$(e).find(".component-loader").remove()}function userLogOut(){localStorage.removeItem("rv")}function getSearchStartCountValue(){0===window.searchStartCount&&$.ajax({url:"/control/getSystemPropertyValue",type:"GET",dataType:"json",data:{name:"searchStartCount",resource:"fnp"},success:function(e){window.searchStartCount=parseInt(e.value)},error:function(e){console.log("error.....",e)}})}function setCookie(e,t,a,i){var o=new Date;["fnpsearch","lastSelectedPincode","lastSelectedPlace","llp","pf","lastSelectedDeliveryLocation"].indexOf(e)>=0?o.setTime(o.getTime()+18e5):o.setTime(o.getTime()+24*a*60*60*1e3);var n="expires="+o.toUTCString();document.cookie=i?e+"="+t+"; "+n+"; path="+i:e+"="+t+"; "+n}function getCookie(e){return document.cookie.length>0&&(c_start=document.cookie.indexOf(e+"="),-1!=c_start)?(c_start=c_start+e.length+1,c_end=document.cookie.indexOf(";",c_start),-1==c_end&&(c_end=document.cookie.length),unescape(document.cookie.substring(c_start,c_end))):""}function delete_cookie(e,t){document.cookie=t?e+"=;expires=Thu, 01 Jan 1970 00:00:01 GMT; path="+t:e+"=;expires=Thu, 01 Jan 1970 00:00:01 GMT;"}function removeReadonlyFieldsFromTabbing(){var e=$(document).find("input , textarea");$.each(e,function(){$(this).is(":disabled, [readonly]")&&$(this).attr("tabIndex","-1")})}function isTabletOrIpad(){var e=navigator.userAgent;return/Tablet|iPad/i.test(e)}function disableShopNow(e){$(e).parents(".quickfrm").find("button").prop("disabled","disabled")}function deleteItem(e,t){if(confirm("Are you sure you want to delete? ")){var a="DELETE_"+e;$("#sendform").attr("action","deleteItemCheckoutOption"),$("#sendform").attr("ng-non-bindable","ng-non-bindable"),$("#sendform").attr("submitforce",!0),$("#sendform").append("<input type='hidden' value='itemIndex' name='"+a+"'/>"),$("#sendform").append("<input type='hidden' value='"+t+"' name='productId'/>"),$("#sendform").submit()}}function continueShopping(){$("#sendform").attr("action","continueShoppingCheckoutOption"),$("#sendform").attr("ng-non-bindable","ng-non-bindable"),$("#sendform").attr("submitforce",!0),$("#sendform").submit()}function deleteAddonItem(e){var t=$("#cartItem_"+e).val();if(void 0!=t)var a=t.split(",")[0],i=t.split(",")[1];params="itemIndex="+a+"&"+i+"=1&isRemove=true",$.ajax({type:"post",url:"/control/deleteaddons?"+params,success:function(e){var t="#addonproduct_"+a+"_"+i+"_figure";$(t).remove()}})}function updateEarliestDeliveryDate(e,t){$.ajax({type:"GET",global:!1,dataType:"json",async:!0,url:"/control/getEarliestDeliveryDays",data:{productIds:e.join(","),FNP_CURRENT_CATALOG_ID:$("#FNP_CURRENT_CATALOG_ID").val()},success:function(e){callUpdateEarliestDeliveryDate(e,t)},error:function(){$(".earliestdelivery").css("visibility","hidden")}})}function callUpdateEarliestDeliveryDate(e,t){Object.keys(e).length&&$.each(e.deliveryDates,function(e,a){var i=$(productDomSelector+"["+productDomAttributeName+"='"+e+"']"),o="";if("product"===fnpPageType)n=i.attr("data-wdgt")&&i.attr("data-wdgt").split("~");else var n=i.attr("data-plp")&&i.attr("data-plp").split("~");$(".earliestdelivery").css("visibility","");var l=t?$(productDomSelector+"["+productDomAttributeName+"='"+e+"']").children().find(".dt-delivery"):$(".product-switch-btn[data-associate-id="+e+"]").find(".assoc-earliest-date");if("_NA_"!=a){var r=a.split("-"),s=new Date,d=new Date(s.getTime()+864e5);r[0]==s.getDate()&&r[1]==parseInt(s.getMonth())+1&&r[2]==s.getFullYear()?(o=t?"Today":"Earliest by Today",l.html(t?"Today":"Earliest by Today")):r[0]==parseInt(d.getDate())&&r[1]==parseInt(d.getMonth())+1&&r[2]==d.getFullYear()?(o=t?"Tomorrow":"Earliest by Tomorrow",l.html(t?"Tomorrow":"Earliest by Tomorrow")):t?(o=a,l.html(a)):l.html("Earliest by "+dateOrdinal(parseInt(r[0]))+" "+capitalize(monthNames[parseInt(r[1])-1]))}else if(t){var c=l.attr("datetime");o="Out of Stock",l.parent().html("<time "+c+" class='dt-delivery outofstock'>Out of Stock</time>")}else o="Not Available",l.html("Not Available");n&&(n[5]=o,"product"===fnpPageType?i.attr("data-wdgt",n.join("~")):i.attr("data-plp",n.join("~")))})}function dateOrdinal(e){return e+(e>0?["th","st","nd","rd"][e>3&&e<21||e%10>3?0:e%10]:"")}function showProdRow(){$("#productlist>li").slice(10).hide(),$("#loadmoreproducts").click(function(){$("#productlist>li:hidden").slice(0,10).show(),0==$("#productlist>li:hidden").length&&$("#loadmoreproducts,#viewallproducts").hide()})}function showAllProd(){$("#viewallproducts").click(function(){$("#productlist>li").show(),$("#viewallproducts").hide(),$("#loadmoreproducts").hide()})}function getPageProductIds(e,t){return $(e).map(function(){return $(this).attr(t)}).get()}function updateProductInfo(e,t){e.length&&updateEarliestDeliveryDate(e,t)}function finishPageLoad(){-1==["new-checkout-confirmorder","info","testimonials","error404"].indexOf(fnpPageType)&&$(document).foundation(),$(".disclaimer span.mandatory").click(function(){$(".disclaimer span.mandatory input").attr("checked")}),"category"==fnpPageType&&"undefined"!=typeof hasCustomBannerAndDesc&&hasCustomBannerAndDesc&&promotionJqueryCode(),loadStyleSheets(),$(document).ajaxStart(function(){ajaxindicatorstart("")}).ajaxStop(function(){ajaxindicatorstop()}),$(".tbli").click(function(){var e=$(this).find("span").width(),t=$(this).find("span").offset().left-$(this).closest(".tabs-menu").offset().left;$(".tabs-menu").find("hr").css("margin-left",t+"px").show("slow"),$(".tabs-menu").find("hr").css("width",e+"px").show("slow")}),updateProductInfo(getPageProductIds(productDomSelector,productDomAttributeName),!0),$(document).on("click",".currencyoption",function(){var e=this.getAttribute("data-currencyuom");convertPricesToLocal(this.getAttribute("data-currencyvalue"),e),void 0!=window.location.hostname&&window.location.hostname.indexOf("xpayshop")>=0?($("#currencyicon").trigger("click"),$("#currencyicon").removeClass("selected")):($("#currencybtn").trigger("click"),$("#currencybtn").removeClass("selected"))}),$(document).on("change",".subvariant",function(){$("#variantError").hide()}),$(document).on("click",".popular-search-item",function(){!function(e){setCookie("fnpsearch",e,7,"/")}($(this).find(".popular-search-label").text())}),getCurrencies(),registerMoreLinksWrapCheckFunction(),initializeToolbar(),saveFnpSalesChannelEnumId(),removeReadonlyFieldsFromTabbing(),$(document).on("open.fndtn.reveal","[data-reveal]",function(){$(this).find("[autofocus]").focus()}),$(document).on("click","#maintoolbar button",function(){$(".reveal-modal-bg").addClass("producttoolbardialog")}),$("#countryCode-button").attr("tabindex","-1"),$(document).on("opened.fndtn.reveal","[data-reveal]",function(e){"addon"==$(this).context.id&&$("body").css({overflow:"hidden"});$(e.target).find("input[type='text'],input[type='email'],input[type='search']").first().focus()}),$(".selptocr").click(function(){var e=$(this).attr("data-href");void 0!==e&&!1!==e&&(document.location.href=$(this).attr("data-href"))}),$(".loggeduser .ui-selectmenu-button").focus(function(){$("html, body").animate({scrollTop:$(this).offset().top-150},500)});try{$("input:read-only").attr("tabindex","-1")}catch(e){}void 0==fnpPageType||"category"!=fnpPageType&&"home"!=fnpPageType&&"search"!=fnpPageType||loadProductImages(),$("#login #loggedinuser").css("display","block"),$("#totalproductcount").css("display","inline-block;"),String.prototype.includes||(String.prototype.includes=function(e,t){"use strict";return"number"!=typeof t&&(t=0),!(t+e.length>this.length)&&-1!==this.indexOf(e,t)})}function isEmpty(e){return void 0===e||e.length<=0}function autoResizeAddr(e){$(e).css({height:"auto","overflow-y":"hidden"}).height(e.scrollHeight)}function highlight(e){""!==$(e).val()?($(".searchbtn").removeAttr("disabled"),$(".searchbtn ").addClass("highlight")):($(".searchbtn").attr("disabled",!0),$(".searchbtn ").removeClass("highlight"))}function loadCategoryType(e,t,a){if(t)for(var i=0;i<t.length;i++){var o=new Object;o.label=t[i].label,o.value=t[i].category,o.categoryType=e,o.index=i,i==t.length-1&&(o.isLast=!0),a.push(o);for(var n=__("searchhintlist");n.firstChild;)n.removeChild(n.firstChild);for(var l=0;l<a.length;l++){var r=document.createElement("li"),s=document.createElement("i");s.className="material-icons search-icons";var d=document.createElement("a");d.href=a[l].value+"?s=autosuggestion",d.setAttribute("data-pos",l+1),d.appendChild(document.createTextNode(a[l].label)),r.appendChild(d),n.appendChild(r),d.appendChild(s),$(".search-icons").text("search")}}}function unPadWrappedFirstItemMoreLinks(){var e=null;$("#morelinks li").each(function(){null==e?e=$(this):$(this).position().left==e.position().left?$(this).css("paddingLeft","0"):$(this).css("paddingLeft",$(this).css("paddingRight"))})}function registerMoreLinksWrapCheckFunction(){$(window).resize(unPadWrappedFirstItemMoreLinks),unPadWrappedFirstItemMoreLinks()}function initializeToolbar(){$(document).on("close.fndtn.reveal","[data-reveal]",function(){"addon"==$(this).context.id&&$("body").css({overflow:"auto"}),$("#navigationtools li button, #infotools li button").removeClass("selected")}),$(document).on("open.fndtn.reveal","[data-reveal]",function(){var e=this.id;$("#maintoolbar>ul>li>button").each(function(){$(this).attr("modalname")==e&&$(this).addClass("selected")})})}function ajaxindicatorstart(e){"resultLoading"!=jQuery("body").find("#resultLoading").attr("id")&&jQuery("body").append('<div id="resultLoading" style="display:none"><div><img src="'+cdnHost+'/assets/images/full_page_loader.gif"><div>'+e+'</div></div><div class="bg"></div></div>'),jQuery("#resultLoading").css({width:"100%",height:"100%",position:"fixed","z-index":"10000000",top:"0",left:"0",right:"0",bottom:"0",margin:"auto"}),jQuery("#resultLoading .bg").css({background:"#000000",opacity:"0.6",width:"100%",height:"100%",position:"absolute",top:"0"}),jQuery("#resultLoading>div:first").css({width:"250px",height:"75px","text-align":"center",position:"fixed",top:"0",left:"0",right:"0",bottom:"0",margin:"auto","font-size":"16px","z-index":"10",color:"#ffffff"}),jQuery("#resultLoading .bg").height("100%"),jQuery("#resultLoading").fadeIn(300),jQuery("body").css("cursor","wait")}function ajaxindicatorstop(){jQuery("#resultLoading .bg").height("100%"),jQuery("#resultLoading").fadeOut(500),jQuery("body").css("cursor","default")}function disableSubmitBtnWithLoadingGif(e){$(e).addClass("loadinggif"),$(e).css("color","#A9A9A9"),$(e).css("border-color","#A9A9A9"),$(e).prop("disabled",!0)}function movetoNext(e,t){e.value.length>=e.maxLength&&document.getElementById(t).focus()}function isFromOverlay(e){return $(e).closest("#modallogin").length>0}function isNumberKey(e){var t=e.which?e.which:event.keyCode;return!(t>31&&(t<48||t>57))}function initializeSelectMenu(e){$(e).selectmenu({change:function(e,t){$(this).val(t.item.value),$(this).trigger("change"),$(this).hasClass("socialcountrycode")&&$(".socialcountrycode").selectmenu("refresh")},focus:function(e,t){$(this).attr("tabindex","-1")},create:function(e,t){$(this).attr("tabindex","-1")}})}function googleSmartSignIn(){"undefined"!=typeof smartSignIn&&smartSignIn()}function triggerLocationLockWithDelay(){if("india"===currentCatalogId&&["home","category","product"].includes(fnpPageType)&&gateAutotriggerAndDelay&&!isPopupShown){var e=JSON.parse(gateAutotriggerAndDelay)[fnpPageType]||{};"Y"===e.autoTrigger&&e.delay>-1&&setTimeout(function(){openPopupForLocationLock(),initLocationLock()},e.delay)}}function isUserLoggedIn(e){return null!=userDetails?(googleSmartSignIn(),void 0!==e&&e(userDetails),userDetails&&userDetails.checklogin&&userDetails.checklogin.loggedin):("function"==typeof e&&arrayOfFunctionsForFNPCheckLogin.push(e),isFNPCheckLoginRunning||fnpCheckLoginCall(),!1)}function fnpCheckLoginCall(){if("t"!=getCookie("fnpli")&&"t"!=getCookie("fnpci"))return userDetails={checklogin:{loggedin:!1,isOAuthUser:!1},cart:{cartTotalQuantity:0,isSuccess:!1}},$("#sign-out").hide(),$("#change-password").hide(),checkLoginCallDeferredObject.resolve("fus"),Promise.resolve(userDetails);var e="https://"+secureHostNameToUse+"/control/fus";return void 0!=localStorage.getItem("userAuthentication")&&"true"===localStorage.getItem("userAuthentication")&&(e="https://"+secureHostNameToUse+"/control/fus?time="+(new Date).getTime()),null!==userDetails||isFNPCheckLoginRunning?(updateCartItem(userDetails),userDetails):(isFNPCheckLoginRunning=!0,$.ajax({url:e,type:"GET",dataType:"json",global:!1,xhrFields:{withCredentials:!0},success:function(e){e.checklogin.loggedin||"t"!=getCookie("fnpli")||delete_cookie("fnpli"),userDetails=e,isFNPCheckLoginRunning=!1,checkLoginCallDeferredObject.resolve("fus"),$("#cdp_fvId").val(e.fvId),updateCartItem(userDetails),googleSmartSignIn()},complete:function(e){for(var t=0;t<arrayOfFunctionsForFNPCheckLogin.length;t++)userDetails&&userDetails.checklogin&&userDetails.checklogin.loggedin,arrayOfFunctionsForFNPCheckLogin[t](userDetails);return arrayOfFunctionsForFNPCheckLogin=[],localStorage.setItem("userAuthentication","false"),Promise.resolve(userDetails)}}))}function updateCartItem(e,t){var a=void 0==t||t,i=e?e.cart:void 0;if(void 0!==i)if(i.isSuccess||"t"!=getCookie("fnpci")||delete_cookie("fnpci"),0<i.cartTotalQuantity){getCart(0),$("#cartCount").addClass("hasitems"),$("#cartCount").text(i.cartTotalQuantity);$.urlParam("ia")&&a&&"product"==fnpPageType&&($(".popup-background, #cartpanel").show(),setTimeout(function(){$("#add-message").slideDown(),setTimeout(function(){$("#add-message").slideUp()},3e3)},1e3))}else 0===i.cartTotalQuantity?($("#cartCount").removeClass("hasitems"),$("#cartCount").empty(),showPncData()):($("#cartCount").removeClass("hasitems"),$("#cartCount").empty())}function dateAndTimeFormat(e){var t=new Date(e);return formatDate(t)+", "+formatTime(t)}function formatDate(e){var t=["January","February","March","April","May","June","July","August","September","October","November","December"],a=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],i=a[e.getDay()]?a[e.getDay()]:"Not a valid day",o=t[e.getMonth()]?t[e.getMonth()]:"Not a valid month",n=e.getDate();return i+", "+(n=n<10?"0"+n:n)+" "+o+" "+e.getFullYear().toString().substr(-2)}function formatTime(e){var t=e.getHours(),a=e.getMinutes();return(t=(t=(t%=12)||12)<10?"0"+t:t)+":"+(a=a<10?"0"+a:a)+" hrs"}function showPncData(){var e,t=[];userDetails&&userDetails.checklogin&&userDetails.checklogin.loggedin&&$.ajax({url:"/control/getUserSubOrderDetails?viewSize=20",dataType:"json",async:!1,global:!1,success:function(a){if((e=a&&a.OrderDetails&&a.OrderDetails)&&e&&e.data&&e.data.subOrdersList){var i=e.data.subOrdersList,o=e.data.expiredOrders;for(var n in i){var l=i[n];if(Object.keys(l).length&&-1===o.indexOf(l.orderId)&&l.subOrderStatus&&"WAITING"===l.subOrderStatus.toUpperCase()){var r={recipientName:l.recipientName,subOrderId:l.subOrderId,orderId:l.orderId,orderDate:dateAndTimeFormat(l.orderDate),productImg:l.productList[0].productImageURL,productName:l.productList[0].productName};t.push(r)}}}},error:function(){console.log("Error while fetching customer order details")}});var a={};t&&t.length?(isPncItemExits=!0,a={isCartItemExits:!1,isPncItemExits:!0,pncData:t}):a={isCartItemExits:!1,isPncItemExits:!1};var i=$("#cartTemplate").html();if(void 0!==i){var o=Mustache.to_html(i,a);$("#viewcart").html(o)}}function getCdpGrid(e){e.each(function(){4===plpGridCol&&(plpGridCol=0,plpGridRow++),plpGridCol++;var e=$(this),t=e.attr("data-plp").split("~");t[4]=plpGridRow+"*"+plpGridCol,e.attr("data-plp",t.join("~"))}),plpGridCol=0,plpGridRow=1}function showAddonsOnCart(e,t,a,i,o,n,l,r,s,d){var c=[],p=0,u=0,s=parseInt(s),d=parseInt(d);$("#cartItem_"+r).find(".addons-li").each(function(e,t){var a={};a.productId=$.trim($(t).attr("id")).split("_")[0],a.itemIndex=$.trim($(t).attr("id")).split("_")[1],a.quantity=parseInt($.trim($(t).attr("id")).split("_")[2]),c.push(a)});var m="addProductId="+e+"&pinCode="+t+"&shippingMethod="+a+"&timeSlotId="+i+"&productType="+o+"&FNP_CURRENT_CATALOG_ID="+n+"&isbuynow=N";$("#show-addon").load("/control/getAddonsDetails?"+m,function(t,a,i){$(".addonviewli");jQuery.each(c,function(e,t){var a=$(".popupitems").find("li.addonviewli[data-productid='"+t.productId+"']");a.find('input[name ="addonProductId"]').prop("checked",!0).attr("data-cart-index",t.itemIndex).addClass("selected-addons");var i=a.find('input[type="number"]').val(t.quantity);a.find(".increaseVal").attr("data-cart-index",t.itemIndex),a.find(".decreaseVal").attr("data-cart-index",t.itemIndex);var o=a.find(".priceInINR").text();u+=parseInt(o)*i.val(),p+=t.quantity}),0!=p?$(".addonfooter button").html("<span class='content'>CONTINUE WITH "+p+" ADD ONS</span>"):$(".addonfooter button").html("<span class='content'>CONTINUE WITHOUT ADD ONS</span>"),void 0==$("#isAddonsAvailable")&&"Y"!=$("#isAddonsAvailable").val()||($("#addon").addClass("extra-spcl"),customDialog("addon","close-addon"),$("#base-product-price").val(s),$("#shipping-product-price").val(d),$("#total-addonprice").val(u),$("input[name='orderItemSeqId']").val("ID"+l),renderAddons(s,u,p,d,"Make it extra special",e)),initCurrencies("show-addon")}),0===$("#addonsclickedfrom").length?$("<input>").attr({type:"hidden",id:"addonsclickedfrom",value:"Make it extra special"}).appendTo("body"):$("#addonsclickedfrom").val("Make it extra special")}function renderAddons(e,t,a,i,o,n){var l={baseItemPrice:e,totalAddonsPrice:t,totalPrice:parseInt(e)+i+t,addonCount:a,itemShippingCost:i},r=$("#addonTemplate").html(),s=Mustache.to_html(r,l);$(".final-price").html(s),o&&cdp.addonload(o,n)}function showCart(){$("#cart").length&&$("#cart").click()}function saveFnpSalesChannelEnumId(){var e=$.urlParam("fnpSalesChannelEnumId"),t=getCookie("source");isTabletOrIpad()&&(void 0===e&&""==t&&(e=$("#fnpSalesChannelEnumId").val()),void 0!==e&&(e=e.replace("DSKTP","TAB"))),$.urlParam("utm_source")===PARTNER_UTM_SRC&&(e||(e=$("#fnpSalesChannelEnumId").val()),e=e.replace("ONLN","ONLNPTNR")),void 0!==e&&(document.cookie="fnpSalesChannelEnumId="+e);var a=$.urlParam("lead");a&&setLeadIdCookie(a,"SBI"),(a=$.urlParam("memberId"))&&setLeadIdCookie(a,"AABL");var i="Gift";try{var o=document.referrer;if(""!=o||void 0!=o){var n=o.match("(^[^/]*//([^:/?#]+)[:/]?)([^:?#]*)"),l=location.host;n[2]==l&&""==(i=n[3])&&(i="Home page")}}catch(e){i="Gift"}i.length>250&&(i=i.substring(0,250)),$("#productCategoryId").val(i)}function setLeadIdCookie(e,t){"undefined"!=e&&""!=e&&void 0!==e&&setCookie("leadId",e+":"+t)}function numberWithCommas(e){var t=e.toString().split(".");return t[0]=t[0].replace(/\B(?=(\d{3})+(?!\d))/g,","),t.join(".")}function getProductType(){return $("#productType").val()}function loadProductImages(){var e=$($("section.productsection").find(".lazy")),t=$($(".products-load").find(".lazy")),a=e.toArray().concat(t.toArray());$(a).each(function(e){void 0!=$(this).attr("data-imageurl")&&$(this).attr("src",$(this).attr("data-imageurl"))})}function loadStyleSheets(){var e="";$.each(cssFilesList,function(t,a){var i;i="/"==a.charAt(0)?cdnHost+a:"topmenu.css"==a||"common.css"==a?cdnHost+"/v193/assets/topbar/src/css/"+a:cdnHost+"/v193/assets/css/"+a,e=e+'<link rel="stylesheet" href="'+i+'" type="text/css" />'}),$("head").prepend(e)}function isNewUser(){var e=!1,t=localStorage.getItem("visited"),a=getCookie("OFBiz.Visitor"),i=getCookie("Fnp.Visitor");return"true"!=t&&(localStorage.setItem("visited","true"),"true"!=i&&(setCookie("Fnp.Visitor","true",365),""==a&&(e=!0))),e}function findCategoryLevel(e){return eventCategory="","Header"===e?eventCategory=gaPage+"_"+e:"Menu"===e?eventCategory=gaPage+"_Header_"+e:"Currency"===e||"Search"===e||"Cart"===e||"Account"===e||"Banners"===e?eventCategory=gaPage+"_Header_"+e:"Footer"===e&&(eventCategory=gaPage+"_"+e),""!=e&&null!=e&&void 0!==e&&("MainContent"===e?eventCategory=gaPage+"_"+e:"FeaturedCategories"===e||"Products"===e||"SelectDate & timeslot"===e?eventCategory=gaPage+"_MainContent_"+e:e.includes("TopBar")?eventCategory=gaPage+"_MainContent_"+e:e.includes("Loginpage")?eventCategory=gaPage+"_"+e:e.includes("Checkout")?eventCategory=gaPage+"_MainContent_"+e:e.includes("SelectDate & Timeslot")?eventCategory=gaPage+"_MainContent_"+e:e.includes("Tab")?eventCategory=gaPage+"_Header_Menu_"+e:e.includes("MainContent")&&(eventCategory=gaPage+"_"+e)),eventCategory}function gaElement(e){var t=$(e).closest("*[data-ga-category]").attr("data-ga-category");eventCategory=findCategoryLevel(t),eventLabel=$(e).attr("data-ga-title"),trackElement(eventCategory,eventLabel,"click")}function trackElement(e,t,a){dataLayer.push({event:"gtm.click",clickEvent:a,eventCategory:e,eventLabel:t})}function doUserLogOut(){window.location.href="https://"+window.location.hostname+"/control/logout?to=/"}function doPaymentFormSubmit(){try{setTimeout(function(){document.forms[0].submit()},100)}catch(e){console.log(e)}}function validateEmail(e){return/^([\w-\.]+@([\w-]+\.)+[\w-]{2,4})?$/.test(e)}function initSubscriptionEvents(){$("#subscribeemailId").on("input",function(){$("#subscribeMsg").hide()}),$(document).click(function(e){$(e.target).closest("#subscribeform").length||$("#subscribeMsg").hide()}),$(document).on("submit","#subscribeform",function(e){e.preventDefault();var t=$.trim($("input[name='subscibeId']").val());return null===t||""===t?($("#subscribeMsg").text("Email is required"),$("#subscribeMsg").show(),!1):validateEmail(t)?void $.ajax({url:"/control/subscribe-user",type:"post",data:{emailId:t},success:function(e){e.indexOf("success")>0?($("#subscribeMsg").addClass("success"),$("#subscribeMsg").text(e),$("#subscribeMsg").show()):($("#subscribeMsg").addClass("error"),$("#subscribeMsg").text(e),$("#subscribeMsg").show())}}):($("#subscribeMsg").text("Invalid email address."),$("#subscribeMsg").show(),!1)})}function akamaiTime(){return akamaiDateAndTime=new Date,$.ajax({type:"GET",dataType:"json",async:!1,global:!1,url:"https://time.akamai.com/",success:function(e){null!=e&&(akamaiDateAndTime=new Date(1e3*parseInt(e)))}}),akamaiDateAndTime}function showRecentlyViewedItems(){if(window.localStorage&&window.recentViewedExpiryTime&&fnpPageType&&userDetails){var e=JSON.parse(localStorage.getItem("rv")),t=$("#productId").val(),a=getCookie("faul"),i=window.userDetails.checklogin.loggedin,o=getCookie("fsid"),n=void 0!=fnpPageType&&"product"===fnpPageType?7:"myaccount"===fnpPageType?4:5,l=fnpPageType&&"product"===fnpPageType?7:5,r=akamaiTime().getTime(),s=[],d=null,c=null,p=null;if(t){c=t+"_"+r+"_"+o+"_"+(i?"S":"NS")}if(e&&e.laxt&&r-e.laxt>recentViewedExpiryTime&&(localStorage.removeItem("rv"),e=null),e||i)if(i)$.ajax({type:"GET",global:!1,async:!0,url:recentViewedAWSUrl+"?uid="+encodeURIComponent(a),success:function(i){if(0!=i.Items.length&&$.each(i.Items,function(e,a){t!=a.productId&&s.push(a.productId)}),e){if(e.laxt=r,p=filterProductList(e.visitedProducts,t,c,o),s.length&&p.productIdsList&&!1===e.syncStatus){var u=p.productIdsList.split(",");d=generateFinalViewList(u,s)}else d=s.length?s.join(","):p.productIdsList;e.visitedProducts=p.recentlyViewed.join(","),localStorage.setItem("rv",JSON.stringify(e))}else d=s.length&&s.join(",");var m=p&&!e.syncStatus?p.recentlyViewed:c;(p&&p.recentlyViewed.length&&!e.syncStatus||t)&&logRecentlyViewedToDB(a,m,t,r,i.Items),d&&getProductListingJsonData(d,"recentlyviewed","india",!0,n,1,l),e&&!1===e.syncStatus&&localStorage.removeItem("rv")}});else{e.laxt=r;(p=filterProductList(e.visitedProducts,t,c)).recentlyViewed.length>30&&p.recentlyViewed.pop(),e.visitedProducts&&getProductListingJsonData(p.productIdsList,"recentlyviewed","india",!0,n,1,l),e.visitedProducts=p.recentlyViewed.join(","),localStorage.setItem("rv",JSON.stringify(e))}else null===e&&t&&((e={}).laxt=r,e.visitedProducts=c,e.syncStatus=!1,localStorage.setItem("rv",JSON.stringify(e)))}}function filterProductList(e,t,a,i){var o=[],n=[];if(e.split(",").map(function(e){if(i){var t=e.split("_")[2];i===t&&(e=e.replace("NS","S"),n.push(e.split("_")[0]),o.push(e))}else n.push(e.split("_")[0]),o.push(e)}),t){var l=n.indexOf(t);l>-1&&(n.splice(l,1),o.splice(l,1)),o.unshift(a)}return{productIdsList:n=n.join(","),recentlyViewed:o}}function generateFinalViewList(e,t){e.map(function(e){var a=t.indexOf(e);a>-1&&t.splice(a,1)});var a=e.concat(t);return a.length>30?a.slice(0,30):a.join(",")}function pushRecentView(e){$.ajax({url:"/control/getSystemPropertyValue",type:"GET",global:!1,dataType:"json",data:{name:"pushRecentViewAWSUrl",resource:"fnp"},success:function(t){$.ajax({url:t.value,global:!1,type:"POST",dataType:"json",data:JSON.stringify(e)})},error:function(e){console.log("error.....",e)}})}function logRecentlyViewedToDB(e,t,a,o,n){var l=[],r=[];if(a&&n.length&&$.each(n,function(e,t){if(a===t.productId&&o>t.viewedDateMillis){t.operationType="deletion",l.push(t);var i={productId:a,viewedDateMillis:o,operationType:"insertion"};l.push(i)}}),"string"!=typeof t)for(i=0;i<t.length;i++){var s=searchElement("productId",t[i].split("_")[0],n);if("object"==typeof s){var d={productId:s.productId,viewedDateMillis:parseInt(s.viewedDateMillis),operationType:"deletion"};r.push(d)}r.push(constructProductObject(t[i]))}else r.push(constructProductObject(t));pushRecentView({uid:e,items:l.length?l:r})}function constructProductObject(e){return{productId:e.split("_")[0],viewedDateMillis:parseInt(e.split("_")[1]),operationType:"insertion"}}function getProductListingJsonData(e,t,a,i,o,n,l){var r="object"!=typeof e||Object.getOwnPropertyDescriptor(e,"length").enumerable?e:e.toString();if(r&&r.length>0){var s=getCurrentProductUrlName();$.ajax({type:"GET",global:!1,async:!0,data:{productIds:r,pageType:t,catalogId:a,currentProductUrlName:s},url:"/control/getProductListing-rj",success:function(t){var a=JSON.parse(t),r=$("#recentlyViewedTemplate").html();if(r){var s=Mustache.to_html(r,a.data);$("#showrecentlyviewed").html(s),$(".productlist-ul").addClass("medium-block-grid-"+l),initCurrencies("showrecentlyviewed"),i&&e.length>o&&(o=o||o,n=n||1,initializeSlick($(".productsection #recentlyviewed-products"),o,n))}},error:function(e){console.error(e)}})}}function getCurrentProductUrlName(){var e=location.pathname,t="";if(e&&e.indexOf("/")>-1){var a=e.split("/");t=a[a.length-1]}return t}function initializeSlick(e,t,a){e.slick({prevArrow:'<div class="slick-prev arrowmark left-pagination"></div>',nextArrow:'<div class="slick-next arrowmark right-pagination"></div>',infinite:!1,autoplay:!1,speed:300,slidesToShow:t,slidesToScroll:a,variableWidth:!1});e.find(".slick-next");var i=e.find(".slick-prev");i.hide(),e.on("afterChange",function(e,t,a){if(t.$slides&&t.$slides.length){var o=t.$slides[0],n=$(o).hasClass("h-product");if(o&&n){var l=$(o).hasClass("slick-active");void 0===l||l?i.hide():i.show()}}})}function searchElement(e,t,a){for(var i=0;i<a.length;i++)if(a[i][e]===t)return a[i]}function getAkamaiEdgeScopeHdrMap(e){var t=e.getResponseHeader("X-Akamai-Edgescape");if(t){for(var a={},i=t.split(","),o=0;o<i.length;o++){var n=i[o].split("=");a[$.trim(n[0])]=n[1]}return a}}function getCurrencyFromGeoCode(e,t){var a="";if(e&&t)for(var i=e.length,o=0;o<i;o++)for(var n=e[o].currency,l=0;l<n.geoCode.length;l++)if(n.geoCode[l].toUpperCase()==t.toUpperCase()){a=n.id;break}return a}function triggerOdometer(e,t,a){var i=$("."+e);i.length&&setTimeout(function(){i.html(t)},"number"==typeof a?a:500)}function getCurrencies(){try{if(!$(".currencys").length){$.ajax({global:!1,url:"/control/getCurrencies",type:"get",dataType:"json",cache:!0,async:!0,error:function(){},success:function(e,t,a){if(null!=e&&null!=e.currencies){var i=e.currencies,o=i.length;if(o>0){var n=getAkamaiEdgeScopeHdrMap(a);if(n){var l=n.country_code;(countrycurrency=getCurrencyFromGeoCode(i,l))||(countrycurrency="INR")}for(var r,s="",d="",c=0;c<o;c++){var p=i[c].currency,u=p.id;"INR"==u||"USD"==u||"EUR"==u||"GBP"==u||"AUD"==u?s=s+'<li class="currencyoption"  data-currencyuom="'+u+'" data-currencyvalue="'+p.value+'"><a href="javascript:void(0)">'+u+" - "+p.name+"</a></li>":d=d+'<li class="currencyoption"  data-currencyuom="'+u+'" data-currencyvalue="'+p.value+'"><a href="javascript:void(0)">'+u+" - "+p.name+"</a></li>"}if(r=s+d,$("#currencydropdown").length)$("#currencydropdown").append(r);else{(i=$("<div  style='display:none'><ul>"+r+"</ul></div>")).appendTo("body")}}}},complete:function(e,t){$.urlParam("utm_source")===PARTNER_UTM_SRC&&$.urlParam("WS_PTNR_currency")&&(document.cookie=["localCurrency","=",$.urlParam("WS_PTNR_currency"),";expires=24*60*60*60*1000",";path=/",";domain="+cookieDomain,""].join("")),$(".cartItemCurrency").length>0&&""!=$(".cartItemCurrency").val()&&(document.cookie=["localCurrency","=",$(".cartItemCurrency").val(),";expires=24*60*60*60*1000",";path=/",";domain="+cookieDomain,""].join("")),initCurrencies(),"PAYPAL"===$("#promoapplicablecard").val()&&void 0===$("#promoCouponCode").val()&&$(".paypaltab").click()}})}}catch(e){}}function initCurrencies(e){if(baseFormat="INR",cookieLocalCurrency=getCookie("localCurrency"),null!=cookieLocalCurrency&&""!=cookieLocalCurrency||(cookieLocalCurrency=countrycurrency),null!=cookieLocalCurrency&&""!=cookieLocalCurrency&&cookieLocalCurrency!=baseFormat){if((a=$('[data-currencyuom="'+cookieLocalCurrency+'"]')).length){i=a[0].getAttribute("data-currencyvalue");void 0!=e?convertComponentCurrency(i,cookieLocalCurrency,e):convertPricesToLocal(i,cookieLocalCurrency)}else{var t=$('[data-currencyuom="'+baseFormat+'"]');if(t.length){i=$(t)[0].getAttribute("data-currencyvalue");void 0!=e?convertComponentCurrency(i,baseFormat,e):convertPricesToLocal(i,baseFormat)}}}else{var a=$('[data-currencyuom="'+baseFormat+'"]');if(a.length){var i=$(a)[0].getAttribute("data-currencyvalue");void 0!=e?convertComponentCurrency(i,baseFormat,e):convertPricesToLocal(i,baseFormat)}}}function convertPricesToLocal(e,t){try{if(void 0!==e){"INR"==t?($(".icon-pdp").hasClass("active")&&$(".icon-pdp").removeClass("active"),$(".pdp-inner-box").removeClass("forigen-price"),$(".forigen-curr-msg").hide(),$(".tooltiplegend").length&&$(".tooltiplegend").hide(),$(".currencyMsg").length&&($(".currencyMsg").hide(),$(".info-tool-tip").removeClass("currencyTop")),$(".grandTotal .webprice").length&&$(".grandTotal .webprice").hasClass("padding-right-15px")&&$(".grandTotal .webprice").removeClass("padding-right-15px"),$(".currency-text").length&&$(".currency-text").hide(),$("#checkoutInfoFormPaypal").length&&($(".paymentselect").removeClass("selectedOption"),$('#checkoutInfoFormPaypal :input[value="INR"]').prop("checked",!0).parent(".paymentselect").addClass("selectedOption"),$('#checkoutInfoFormPaypal :input[value="USD"]').prop("checked",!1))):($(".icon-pdp").hasClass("active")&&$(".icon-pdp").removeClass("active"),$(".pdp-inner-box").addClass("forigen-price"),$(".forigen-curr-msg").show(),$(".tooltiplegend").hide(),$(".carttotal").length&&(0==$(".price-increase-info-icon").length||$(".price-increase-info-icon").hasClass("priceinfo-icon-display")?($(".productform .tooltiplegend").css("display","inline-block"),$(".productform .price-block .pricediv .off").length<=0?$(".productform .tooltiplegend").addClass("offpricecurr"):$(".productform .tooltiplegend").removeClass("offpricecurr")):($(".currencyMsg").length&&$(".currencyMsg").show(),$(".productform .tooltiplegend").show())),$(".grandTotal .webprice").length&&!$(".grandTotal .webprice").hasClass("padding-right-15px")&&($(".grandTotal .webprice").addClass("padding-right-15px"),$(".grandTotal .tooltiplegend").show()),$(".currency-text").length&&$(".currency-text").css("display","block"),$("#checkoutInfoFormPaypal").length&&($(".paymentselect").removeClass("selectedOption"),$('#checkoutInfoFormPaypal :input[value="INR"]').prop("checked",!1),$('#checkoutInfoFormPaypal :input[value="USD"]').prop("checked",!0).parent(".paymentselect").addClass("selectedOption"))),$(".selectedCurrency").length>0&&$(".selectedCurrency").val(t);var a=e.replace(/^[^\d]*/,""),i=e.replace(a,"");a=a.replace(",","");var o="curr_"+t.toLowerCase(),n='<span id="currency-sym" class="'+o+'">'+i+"</span>";if($("#currency-sym").length&&$("#currency-sym").text(t.toUpperCase()).removeClass().addClass(o),$("span.webprice").each(function(e,o){if(!$(o).children("strike").length){updateCurrencyDetails(this,convertPriceFromINR(getPriceFromData(this),a),i,t,a)}}),$("span.price-block").each(function(){var e=convertPriceFromINR(getPriceFromData($(this).find(".pricediv").parent()),a),i=getCurrencySymbol(t);if(e=checkCurrencyAndRoundPrice(t,e),insertInnerHTML($(this).find(".price"),n+e),$(".odometer-price").length&&insertInnerHTML($(".odometer-price .curr-symbol"),i),triggerOdometer("odometer",e,500),$(this).find(".oldpriceInINR").length>0){var o=convertPriceFromINR(getPriceFromData($(this).find(".oldpriceInINR")),a);o=checkCurrencyAndRoundPrice(t,o),!isNaN(o)&&insertInnerHTML($(this).find(".oldprice"),n+o)}}),$(".price-updated").length>0){var l=getCurrencySymbol(t),r=convertPriceFromINR($(".price-updated .remote-local-price").text().replace(/^[^\d]*/,"").replace(/,/g,""),a),s=convertPriceFromINR($(".price-updated .remote-default-price").text().replace(/^[^\d]*/,"").replace(/,/g,""),a);r=checkCurrencyAndRoundPrice(t,r),s=checkCurrencyAndRoundPrice(t,s),insertInnerHTML($(".price-updated .remote-area-price"),l+r),insertInnerHTML($(".price-updated .lesstheprice"),s)}lastConversionFactor=a,lastCurrencyFormat=i,document.cookie=["localCurrency","=",t,";expires=24*60*60*60*1000",";path=/",";domain="+cookieDomain,""].join(""),"function"==typeof showOfferTooltip&&showOfferTooltip(t)}}catch(e){}}function getCurrencySymbol(e){var t=e;return e&&"INR"!==e||(t="&#8377;"),t}function checkCurrencyAndRoundPrice(e,t){return"INR"===e&&(t=Math.round(t)),t}function insertInnerHTML(e,t){e.length>0&&e.html(t)}function updateCurrencyDetails(e,t,a,i,o){var n="",l="WebRupee";if(n='<meta itemprop="priceCurrency" content="'+i+'">',n=n+'<meta itemprop="price" content="'+t+'">',"INR"!=i&&(l="curr_"+i.toLowerCase()),"INR"==i&&(t=Math.round(t)),n=n+'<span class="'+l+'">'+a+"&nbsp;</span>"+t+"</span>",$(e).parent().find(".oldpriceInINR").text().length>0){var r=convertPriceFromINR(getPriceFromData($(e).parent().find(".oldpriceInINR")[0]),o);"INR"==i&&(r=Math.round(r)),n+="<span class='offer-and-oldprice'>",n=(n+='<span class="oldprice" style="text-decoration: line-through;">')+'<span class="'+l+'">'+a+"</span>"+r+"</span>",$(e).find(".off").length>0&&(n+="<span class='off'>"+$(e).find(".off").html()+"</span>"),n+="</span>"}$(e).html(n)}function convertPriceFromINR(e,t){try{t=t.toString().replace(/,/g,""),e=e.toString().replace(/,/g,""),t=t.toString().replace(/,/g,""),e=(parseFloat(e)/parseFloat(1)).toFixed(2);return(parseFloat(e)*parseFloat(t)).toFixed(2)}catch(e){}}function getPriceFromData(e){try{return($(e).hasClass("oldpriceInINR")?$(e).html():$(e).parent().find("span.priceInINR").html()).replace(/^[^\d]*/,"").replace(/,/g,"")}catch(e){}}function convertComponentCurrency(e,t,a){try{if(void 0!==e){var i=e.replace(/^[^\d]*/,""),o=e.replace(i,"");i=i.replace(",","");t.toLowerCase();$("#"+a).find(".webprice").each(function(e,a){if(!$(a).children("strike").length){updateCurrencyDetails(this,convertPriceFromINR(getPriceFromData(this),i),o,t,i)}})}}catch(e){}}function convertPdpCurrency(){var e=getCookie("localCurrency")?getCookie("localCurrency"):countrycurrency,t=$('[data-currencyuom="'+e+'"]');if(t.length){var a=t[0].getAttribute("data-currencyvalue");if(void 0!==a){var i=a.replace(/^[^\d]*/,""),o=a.replace(i,"");i=i.replace(",","");var n='<span id="currency-sym" class="'+("curr_"+e.toLowerCase())+'">'+o+"</span>";$("span.price-block").each(function(){var t=convertPriceFromINR(getPriceFromData($(this).find(".pricediv").parent()),i),a=getCurrencySymbol(e);if(t=checkCurrencyAndRoundPrice(e,t),insertInnerHTML($(this).find(".price"),n+t),$(".odometer-price").length&&insertInnerHTML($(".odometer-price .curr-symbol"),a),triggerOdometer("odometer",t,500),$(this).find(".oldpriceInINR").length>0){var o=convertPriceFromINR(getPriceFromData($(this).find(".oldpriceInINR")),i);o=checkCurrencyAndRoundPrice(e,o),!isNaN(o)&&insertInnerHTML($(this).find(".oldprice"),n+o)}})}}}function closeCart(){$("#cartpanel").hide()}function afterFetchFromCart(e,t){var a=!1,i=!1,o="https://"+window.location.hostname,n=!1,l=0,r=[],s={};if(0==!e.items.length){var d=getCookie("localCurrency");internationalCurrency=void 0!=d&&""!=d&&null!=d&&"INR"!=d,a=!0}e.isInternationalCurrency=internationalCurrency,0!=e.discount&&(i=!0),loggedIn&&(n=!0),e.isCartItemExits=a,e.isDiscountAvail=i,e.imageDomainPrefix=cdnHost,e.isCartSummary=!0,e.domainPrefix=o,e.isUserlogin=n,0==!e.items.length&&($.each(e.items,function(e,t){"N"==t.addon&&void 0!=s.item&&(r.push(s),s={});var a=!1,i=!1,o=!1,n=!1,d=!1,c=!1,p=!1;if("EXPRESS"===t.primaryProductCategoryId&&(a=!0),"COURIER"===t.primaryProductCategoryId&&(i=!0),"INTERNATIONAL"===t.primaryProductCategoryId&&(o=!0),"PERSONALIZED"===t.primaryProductCategoryId&&(n=!0),"Y"==t.addon&&(d=!0,1===t.quantity?c=!0:9===t.quantity&&(p=!1)),t.isMultiImage=t.noOfImgs>1,t.isExpress=a,t.isCourier=i,t.isInternational=o,t.isPersonilized=n,t.isAddon=d,t.minquantity=c,t.maxquantity=p,t.index=e,"N"==t.addon){var u=t.deliveryDate.split(" ");t.deliveryDay=t.deliveryDate.split(",")[0],t.deliveryMonth=u[1],t.deliverydDate=u[2],t.addons=[],s.item=t,t.isShippingPriceAvailable=t.shippingDetails.isShippingPriceAvailable,l++}else{var m=s.item.addons,g=t.price/t.quantity;t.addonPrice=g,m.push(t),s.item.addons=m}}),e.totalCount=l),Object.keys(s).length&&r.push(s);var c=JSON.parse(JSON.stringify(e));c.items=r;var p=$("#cartTemplate").html();if(void 0!=p){var u=Mustache.to_html(p,c);$("#viewcart").html(u);var m=$("#cartItem_"+t)[0];m&&m.scrollIntoView(),initCurrencies(),isCartClicked&&("function"==typeof cartViewOmni&&cartViewOmni(c),isCartClicked=!1)}}function getCart(e){if(null!==viewCartData)afterFetchFromCart(viewCartData,e);else if("t"===getCookie("fnpci")||"t"===getCookie("fnpli"))$.ajax({type:"GET",dataType:"json",async:!1,global:!1,url:"/control/viewcart",success:function(t){t&&t.items&&t.items.length?(viewCartData=t,afterFetchFromCart(t,e)):showPncData()},error:function(){fetchFaild()}});else{afterFetchFromCart({items:[],subTotal:"0",discount:"0",total:"0",totalShipping:"0"},e)}}function modifyCart(e,t,a){closeCartConfirmation();var i="#"+$("#delete-item_"+e).closest(".cartgrid").attr("id");showOrHideComponentLoader(i,"Y"),viewCartData=null,viewCartForOmni=null;var o=$("#cartItemProd_"+e).val();params="DELETE_"+o,params+="&productId="+t,$.ajax({type:"POST",dataType:"json",global:!1,url:"/control/deleteitem?"+params,success:function(o){userDetails&&userDetails.cart&&"N"==a&&(userDetails.cart.cartTotalQuantity=userDetails.cart.cartTotalQuantity-1),updateCartItem(userDetails,!1),getCart(!1,0),showOrHideComponentLoader(i,"N"),"function"==typeof cartRemoveOmni&&cartRemoveOmni(e),cdp.removePro($("#cdp_fvId").val(),t)}})}function updateAddOnQuantity(e,t,a,i){var o=t;viewCartData=null,"Y"==i&&(o+=1),"N"==i&&(o-=1);var n=e+"_"+o,a=a;$.ajax({type:"POST",dataType:"json",global:!0,async:!1,url:"/control/updateAddonQuantityProduct?productId_quantity="+n+"&itemIndex="+a,success:function(e){getCart(!1,a)},error:function(){fetchFaild()}})}function fetchFaild(e){console.log("Error occured while fetching shopping cart items from the server.")}function checkFnpUserLoggedIn(){var e=null,t=null;if($(".tempspan").remove(),userDetails&&userDetails.checklogin&&userDetails.checklogin.loggedin){loggedIn=!0,$("#login-link").hide(),t=userDetails.checklogin.fullname,(e="Account").length>10&&$("#account").addClass("loaded"),$("#accountbtn").prop("title","Hi "+t),$("#sign-out").show(),$("#change-password").show(),$("#CRMID_TRACK").val(userDetails.checklogin.crmId),$("#userType").val(userDetails.checklogin.userType),$("#cfname").val(userDetails.checklogin.fullname),handleLogin(),"undefined"!=typeof digitalData&&(void 0!==digitalData.page&&(digitalData.page.loginStatus="logged in"),populateCustomerData(userDetails.checklogin.oracleContactId1,userDetails.checklogin.userLoginId,userDetails.checklogin.phone));var a=userDetails.checklogin.isCustomizedOption;if(null!=a&&void 0!=a&&1==a){var i=userDetails.checklogin.agentOptions.name,o=userDetails.checklogin.agentOptions.url;$("#otherOptions").html("<a id='customProdLink' title='Customize Product' href='"+o+"'>"+i+"</a>")}isOAuthUser=userDetails.checklogin.isOAuthUser}else window.location.href.indexOf("account")<0&&$("#loggedinuser").addClass("removeafter"),$("#accountbtn").prop("title","Login to manage your account"),e="Hi Guest",t="Guest",$("#sign-out").hide(),$("#change-password").hide();$("#user-info").html("Hi "+t.split(" ")[0]),$("#user-name").text(e)}function handleLogin(){var e=__("accountbtn");e&&(e.fnp_targetId="accountdropdown",e.fnp_targetEle=__(e.fnp_targetId)),$("#login").removeAttr("modalname").removeClass("close-reveal-modal").off(),$("#login").on("click",function(){$(".toolbardialog").foundation("reveal","close"),$(".logindropdown").slideToggle()})}function deleteItemCart(e,t,a){$("header").after("<div class='delete-dialog'><div class='del-heading'>Delete this Item?</div><button class='del-button' id='del-cancel' onclick='closeCartConfirmation();'>NO</button><button class='del-button opened' id='del-yes' onclick='modifyCart("+e+',"'+t+'","'+a+"\")'>YES</button></div>"),$(".popup-background").css("z-index","99999")}function closeCartConfirmation(){$(".popup-background").css("z-index","9999"),$(".delete-dialog").remove()}function loadInvalidPincodeMapping(e){var t=AJAX_JSON_URL_LIST.jcUrl+"?id=PINCODE_MAPPING";try{$.ajax({global:!1,async:!0,url:t,dataType:"json",success:e})}catch(e){console.log("Could not load pincode mapping data!!"),console.log(e)}}function correctedPincodesCallBack(e){CORRECT_PINCODES=e||null}function isNumber(e){return!!new RegExp("^([0-9]+)$").test(e)}function customInitialize(){$("#addProductId").val();"INTERNATIONAL"!==$("#productType").val()?(loadPincodeSuggestionsForDomestic(),getPriceSurgeInfo(),dateLoaderInterface=function(){"use strict";var e=document.querySelector("#datetimelink"),t=document.querySelector("#productfrm .date-select-wrapper .date-loader"),a=document.querySelector("#productfrm .date-select-wrapper"),i=e?e.innerHTML:"";return{showLoaderOnDateSelect:function(){try{t.style.display="block",a.style.opacity="0.5",e.innerText="Fetching Dates"}catch(e){console.error(e)}},disableLoaderOnDateSelect:function(){try{t.style.display="none",e.innerHTML=i,a.style.opacity=null,e.classList.length>0&&(e.classList.remove("disableInput"),e.classList.add("activeinput"))}catch(e){console.error(e)}}}}()):getIntlCities()}function getIntlCities(){var e=$("#addProductId").val();$.ajax({type:"GET",dataType:"json",async:!1,url:"/control/getCityForIntlProducts?productId="+e,success:function(e){loadInternationalCities(e),citiesList=e.cities}})}function getDomesticPincodes(e,t){$.ajax({type:"GET",dataType:"json",async:!1,global:!1,url:"/assets/js/pincodes/"+e+".json",success:function(e){displayPincodes=[];for(var t in e){var a=e[t],i=Object.keys(a)[0],o=i+", "+Object.values(a)[0];displayPincodes.push({value:o,key:i,labelName:o,id:t})}},error:function(){appendUiLinks({showLink:!1,showAllLinks:!0,showOtherCatalog:!$("#location-lock-popup").is(":visible")},$(this).closest(".gate").find(".render-auto-list"))}})}function loadPincodeSuggestionsForDomestic(e){var t=e?e.eleId:"destlookup",a=!!e&&e.isPopUp,i=$("#"+t).closest(".gate").find(".render-auto-list");$("#"+t).autocomplete({source:function(e,t){var a=$.trim(e.term);""!==a&&t($.grep(displayPincodes,function(e){return e.labelName.startsWith(a.replace(/ /g,"").toLowerCase())}))},minLength:2,response:function(e,t){var o=this.value.length;if(t.content.length){if(a||($("#pincodemsg").text("").hide(),$("#auto-complete-tooltip").show()),$(".render-auto-list").find(".ui-menu").addClass("show-pincodes"),$(this).css("color","#222"),o>=PINCODE_MIN_LENGTH){appendUiLinks(l={showLink:!0,showAllLinks:n=o===PINCODE_MAX_LENGTH||!(o>=PINCODE_MIN_LENGTH),showOtherCatalog:!a},i)}}else if(a||$("#auto-complete-tooltip").hide(),$(".render-auto-list").find(".ui-menu").removeClass("show-pincodes"),isNumber(this.value)){var n=o===PINCODE_MAX_LENGTH||!(o>=PINCODE_MIN_LENGTH&&o<PINCODE_MAX_LENGTH),l={showLink:o===PINCODE_MAX_LENGTH||o>=PINCODE_MIN_LENGTH&&o<PINCODE_MAX_LENGTH,showAllLinks:n,showOtherCatalog:!a};appendUiLinks(l,i),$(this).css("color","#e53333")}},autoFocus:!0,select:function(e,t){return pickupPincode(t.item.key,t.item.value).then(function(e){var t=$("#location-lock-popup").is(":visible");e&&(resolvedPinDetails=e,t||onLocationSelect(e.areaFromDB,e.resolvedPincode,e.place))}),updateUIpostPinSelection(this,t),setPincodeInLL(),!0},close:function(e,t){$("#auto-complete-tooltip")&&$("#auto-complete-tooltip").hide()},change:function(e,t){var a=$(this).closest(".gate").find(".render-auto-list .ui-menu").attr("id");$(".render-auto-list").find(".ui-menu").hasClass("show-pincodes")&&$("#"+a).show()},create:function(e,t){$(this).data("ui-autocomplete")._renderItem=function(e,t){var a="<li class='ui-menu-item'><div id='ui-id-"+t.id+"' tabindex='-1' class='ui-menu-item-wrapper' title='"+t.labelName+"'>"+t.labelName+"</div></li>";return $(a).appendTo(e)}},appendTo:i})}function updateUIpostPinSelection(e,t){$(e).val(t.item.key+", "+t.item.value),$(".clear-pin-value").show(),$("#auto-complete-tooltip, .auto-suggest-wrapper, #auto-static-links .ui-links").hide(),$(e).attr("title","Click on remove(X) button to change location"),$(".pin-help").hide(),$(e).removeClass("activeinput").addClass("disable-location").attr("readonly","readonly").attr("title","Click on remove(X) button to change location"),$("#pin-continue-btn").removeClass("custom-btn-disable"),$(".selected-pin").text("Pincode: "+t.item.key).css("display","block"),$(".hassle-free-msg").hide()}function appendUiLinks(e,t){var a=$("#FNP_CURRENT_CATALOG_ID").val();$("#auto-static-links")&&$(document).find("#auto-static-links").remove(),$('<div id="auto-static-links"><div id="dont-know-pincode" class="ui-links ui-menu-item pin-help"><div class="ui-menu-item-wrapper">Don\'t Know Pincode?</div></div><div id="dont-see-pincode" class="ui-links ui-menu-item pin-help"><div class="ui-menu-item-wrapper">Don\'t see your Pincode?</div></div><div id="not-catalog-delivery" class="ui-links ui-menu-item"><div class="ui-menu-item-wrapper other-catalog">Not '+a+" Delivery?</div></div></div>").appendTo(t),$("#auto-static-links .ui-links").hide(),e&&(e.showAllLinks?e.showLink?$("#dont-see-pincode, #not-catalog-delivery").show():$("#dont-know-pincode, #not-catalog-delivery").show():$("#auto-static-links .ui-links").show(),e.showOtherCatalog||$("#not-catalog-delivery").hide())}function loadInternationalCities(e){if(void 0!=e&&"success"===e.message&&!0===e.isCitiesAvailable){var t=e.cities,a=[];for(var i in t)a.push({value:t[i].CITY_NAME,label:t[i].CITY_NAME,key:t[i].CITY_KEY,labelwithoutspace:t[i].CITY_NAME.replace(/ /g,"").toLowerCase()});if($("#destlookup").autocomplete({source:function(e,t){var i=$.trim(e.term);""!==i&&t($.grep(a,function(e){return e.labelwithoutspace.startsWith(i.replace(/ /g,"").toLowerCase())}))},autoFocus:!0,minLength:0,open:function(e,t){$("#not-catalog-delivery").show()},response:function(e,t){t.content.length?$("#ui-id-1").addClass("show-pincodes"):$("#ui-id-1").removeClass("show-pincodes")},select:function(e,t){return selectedCity=t.item.key,selectedLocation=t.item.value,$("#pinCode").val(selectedCity),setAddressCookie("lastSelectedIntlCity",selectedCity,30),setAddressCookie("lastSelectedIntlLoc",selectedLocation,30),$("#deliveryLocation").val(selectedLocation),resetProductShippingInfo(),enableDateTimeSelector(),getProductPriceByDeliveryInfo($("#addProductId").val(),"",selectedCity),$("#auto-static-links .ui-links, .auto-suggest-wrapper").hide(),$(".address-input").find(".cross-input").show(),$("#destlookup").removeClass("activeinput").addClass("disable-location").attr("readonly","readonly"),!0},change:function(e,t){$("#ui-id-1").hasClass("show-pincodes")&&$("#ui-id-1").show()},appendTo:".render-auto-list"}),!$(".ui-links").length){var o=$("#FNP_CURRENT_CATALOG_ID").val();$('<div id="auto-static-links"><div id="not-catalog-delivery" class="ui-links ui-menu-item"><div class="ui-menu-item-wrapper">Not '+o+" Delivery?</div></div>").insertAfter("#ui-id-1")}}}function resetProductShippingInfo(){$("#cityAlert").hide(),$("#pincodeAlert").hide(),$("#pincodemsg").hide(),$("#dateAlert").hide(),$("#deliveryDate").val(""),$("#shippingMethod").val(""),$("#timeSlotId").val(""),$("#shippingPrice").val(""),disableDateTimeSelector()}function enableDateTimeSelector(){$(".date-select-wrapper").show(),$("#datetimelink").removeClass("disableInput").addClass("activeinput"),$("#datetimeshipping").hide(),$("#destlookup").removeClass("activeinput hightlight-error")}function disableDateTimeSelector(){$("#datetimelink").addClass("disableInput").removeClass("activeinput"),$(".date-select-wrapper").show(),$("#datetimeshipping").hide()}function retainPincode(){if(geoDisplayInfo&&geoDisplayInfo.showPincodeOrCity){var e=getCookie("lastSelectedPincode"),t=getCookie("lastSelectedPlace"),a=getCookie("lastSelectedAddress");userPincode=!!a;var i=getCookie("lastSelectedIntlCity"),o=getCookie("lastSelectedIntlLoc"),n=getCookie("lastSelectedDeliveryLocation");e&&a&&"INTERNATIONAL"!==$("#productType").val()&&retainDomesticPincode(e,a,t,n),i&&o&&retainInternationalCity(i,o),("INTERNATIONAL"!==$("#productType").val()&&e&&a||i&&o)&&($(".cross-input").show(),$(".pac-container").hide(),$("#destlookup").addClass("disable-location").attr("readonly","readonly").attr("title","Click on remove(X) button to change location"));var l=getCookie("fnpsearch");l&&$("#fnpsearch").val(l)}}function retainDomesticPincode(e,t,a,i){$("#destlookup").val(t),$(".pin-help").hide(),updateResolvedPincode(e,a),$(".delivery-date-area").slideDown(),i&&$("#deliveryLocation").val(i),mappingRetentionToolTip(t,e)}function retainInternationalCity(e,t){$("#pinCode").val(e),$("#destlookup").val(t),$("#deliveryLocation").val(t),resetProductShippingInfo(),enableDateTimeSelector(),getProductPriceByDeliveryInfo($("#addProductId").val(),void 0,e)}function updateClearButton(e){e&&""===e.value?($(e).prev().hide(),unsetDest(!1),$(".file-place").off("click"),$("#buynow").removeClass("activeinput"),$(".selectflavourText").addClass("disableInput").removeClass("gray-active-input"),$(".subvariantblock").addClass("disableInput"),$("#buynow, #addToCart, .cake-variants,.inputdiv.date-select-wrapper, .personal-inputs").show(),$("#auto-static-links li").hide(),$("#destlookup").css("color","#222"),$("#destlookup").removeClass("hightlight-error"),$(".cross-input, #avialable-gifts").hide(),$(".pac-container").removeClass("show-city"),$(".formfooter").show()):$(e).prev().show()}function unsetDest(e){!!$("#location-lock-popup").is(":visible")||$("#location-popup").is(":visible")||(pincode=null);var t=$("#productType").val(),a=document.getElementById("destlookup");resetDeliveryInput(),"INTERNATIONAL"!==t?($("#edit-shipping-options").length&&$("#edit-shipping-options").hide(),$(".cross-input").hide(),$("#destlookup, #pdp-google-suggestion").addClass("activeinput").removeClass("disable-location").removeAttr("readonly","readonly").attr("title","Start typing and select from suggestions").val(""),$("#location-popup").is(":visible")?$("#pdp-google-suggestion").focus():$("#destlookup").focus()):"INTERNATIONAL"===t&&$(a).addClass("activeinput").val(""),$("#datetimelink").addClass("disableInput").removeClass("activeinput"),$(".personalimg").addClass("disableInput").removeClass("activeinput"),$(".personalizedimg").attr("src")||$(".imgupload").addClass("disableInput"),$(".personal-inputs > div:first-child").addClass("disableInput").removeClass("activeinput"),$(".charleft").addClass("disableInput"),$("#selectedlocality").removeClass("haspin").text(""),$(".remote-area").html(""),$("#deliveryLocation").val(""),$("#pinCode").val(""),resetProductShippingInfo(),"INTERNATIONAL"!=t?e&&updateClearButton(document.getElementById("destlookup")):e&&updateClearButton(a),$("#buynow").removeClass("activeinput"),$(".delivery-date-area").slideUp(),$(".auto-cake-inputs, .auto-personal-inputs, .auto-cake-message").hide(),$("#todaySelectedShipping, #todaySelectedTimeslotId, #tomorrowSelectedShipping, #tomorrowSelectedTimeslotId").val(""),$(".price-increase-info-icon").addClass("priceinfo-icon-display"),todayAjaxTime=null,tomorrowAjaxTime=null,isMultiOrderProduct&&(selectedSeranadesDates.length=0,selectedDeliveryDateTimeSlot=!1,$("#shipping_info").removeClass("show"),$("#deliverydatepicker").datepicker("setDate",getDefaultDate())),assocProduct&&($(".product-switch-btn").removeClass("product-not-available"),$(".product-switch-btn[data-associate-id ='"+$("#addProductId").val()+"']").addClass("generic-green-btn")),$(".gift-not-available")&&$(".gift-not-available").hide()}function getPriceSurgeInfo(){$.ajax({type:"GET",dataType:"json",async:!0,url:"/control/getPriceSurgeDetails",global:!1,success:function(e){e&&e.eventDates&&(eventDates=e.eventDates,eventDates=eventDates.split(","),$.each(eventDates,function(e,t){var a=$.datepicker.parseDate("dd-mm-yy",t).getMonth()+1;$.inArray(eventOcationMonths,a)>-1&&eventOcationMonths.push(a)}),(legendMessage=e.legendMessage)&&($(".price-info-legend-message").append("<span class='legend-message priceinfo-icon-display'><span>"+legendMessage+"</span></span>"),notificationMessage=e.notificationMessage),notificationMessage&&$(".info-tool-tip").html(notificationMessage))}})}function mappingRetentionToolTip(e,t){var a=/\d{6,6}/,i=e.match(a);i&&i[0]!==t.match(a)[0]&&$("#mapping-msg").text("This area is served from "+t+" instead of "+i).show()}function loadGoogleAutoCompleteWithRandomKey(){var e=document.getElementsByTagName("script")[0],t=document.createElement("script");if(locationDetails="//maps.googleapis.com/maps/api/js?v=3.exp&signed_in=true&libraries=places",desktopMapKeys&&desktopMapKeys.length>0){var a=desktopMapKeys[Math.floor(Math.random()*desktopMapKeys.length)];locationDetails+="&key="+a}t.src=locationDetails+"&callback=loadGoogleAutoComplete",t.id="google-api",e.parentNode.insertBefore(t,e)}function loadGoogleAutoComplete(){var e=document.getElementById("pdp-google-suggestion");!function(e){function t(t,i){if("keydown"==t){var o=i;i=function(t){var a=$(".pac-item-selected").length>0;if(13==t.which&&!a){var i=$.Event("keydown",{keyCode:40,which:40});o.apply(e,[i]),0==$(".pac-item-selected").length&&($("#pincodeAlert").show(),$("#destlookup").addClass("hightlight-error"))}o.apply(e,[t])}}a.apply(e,[t,i])}var a=e.addEventListener?e.addEventListener:e.attachEvent;e.addEventListener=t,e.attachEvent=t}(e),null==googleAutoComplete&&((googleAutoComplete=new google.maps.places.Autocomplete(e,{types:["geocode","establishment"],componentRestrictions:{country:"in"},fields:["address_components","geometry","type","formatted_address"]})).inputField=e,googleAutoComplete.addListener("place_changed",storeGoogleAutoCompleteDetails))}function storeGoogleAutoCompleteDetails(){"object"==typeof googleAutocompleteObject&&(googleAutocompleteObject.currentObject=this,$(".pac-container").removeClass("show-city"),$("#location-continue").removeClass("custom-btn-disable"),$("#auto-static-links .ui-links,.auto-suggest-wrapper,.pin-help").hide(),$("#pdp-google-suggestion").removeClass("activeinput").addClass("disable-location").attr("readonly","readonly").attr("title","Click on remove(X) button to change location"),$(".google-suggestion-box").find(".cross-input").show());pickupPincode().then(function(e){e&&(resolvedPinDetails=e,$(".selected-pin").text("Pincode: "+e.resolvedPincode).css("display","block"),"product"!==fnpPageType&&cdp.getLocation(e.resolvedPincode,null,null))})}function checkPredictions(e){document.prevDLVal=e.value,pincode=null,"product"===fnpPageType&&(resetProductShippingInfo(),$("#destlookup").addClass("activeinput").removeClass("hightlight-error"),$("#datetimelink").addClass("disableInput").removeClass("activeinput hightlight-error"),$("#selectedlocality").removeClass("incorrect ui-link")),$(".pac-container").addClass("show-city"),$("#google-suggestion-box").find(".cross-input").show()}function resetDeliveryInput(){$(".pin-help").show(),$("#destlookup").removeClass("disable-location hightlight-error").addClass("activeinput").removeAttr("readonly","readonly").attr("title","Start typing and select from suggestions"),$(".address-input").find(".cross-input").hide(),$("#auto-static-links .ui-links, #ui-id-1,.auto-suggest-wrapper").hide(),$("#destlookup").val("")}function resetGoogleDeliveryInput(){$("#pdp-google-suggestion").removeClass("disable-location hightlight-error").addClass("activeinput").removeAttr("readonly","readonly").attr("title","Start typing and select from suggestions").val(""),$(".pac-container").removeClass("show-city"),$("#location-continue").addClass("custom-btn-disable"),$(".google-suggestion-box").find(".cross-input").hide(),$(".selected-pin").hide(),googleAutocompleteObject.currentObject=null}function playProductVideo(e){if(e){var t=e.split("/");t=t[t.length-1],$(".customervideo").attr("src",e+"?autoplay=1&modestbranding=1&showinfo=0&rel=0&loop=1&playlist="+t),$(".zoomContainer, .cam").hide(),$("#videomodal, .close-video").show(),$(".thumb-tile img").css("cursor","default"),$("#imageGallery a").removeClass("zoomImgActive"),$(".video-bg").addClass("zoomImgActive")}}function setCdpInitialDataForProductImage(){var e=$(".detailImage1").attr("src"),t=$(".slider-for");t.attr("data-image",e),t.attr("data-index",1)}function swapImages(e,t,a,i,o,n,l){var r,s,d=Boolean($(".customervideo").attr("src")),c=!!e?t?$(e.currentTarget):$(e):l;thumTileIndex=c.attr("class").split(n)[1];var p=parseInt(thumTileIndex);$("#"+o).find("a").removeClass("zoomImgActive").eq(p-1).addClass("zoomImgActive"),s=lImages[p-1],r=xImages[p-1];var u=$(a).data("elevateZoom");u&&(void 0===r||d?(u.options.zoomEnabled=!1,u.elem.className="detailImage1 productimg mainimg cssImgXLarge",u.$elem.attr("src",s),$(".zoom-message").hide()):(u.options.zoomEnabled=t,u.swaptheimage(s,r),$(".zoom-message").show(),t?$(u.zoomContainer).show():$(u.zoomContainer).hide()),$(i).attr("src",s)),$(a).parent().attr({"data-index":p.toString(),"data-image":s})}function initializeZoom(e){var t=e.elementIdToBind;if(Boolean($(".customervideo").attr("src"))&&(e.zoomEnabled=!1),$(t).length){$(t).elevateZoom({zoomType:e.zoomType,zoomWindowWidth:e.zoomWindowWidth,zoomWindowHeight:e.zoomWindowHeight,zoomEnabled:e.zoomEnabled,galleryActiveClass:e.galleryActiveClass,gallery:e.gallery});var a=$(t).data("elevateZoom"),i=e.wrapperElement;e.isPopUp?$(document).on("click",i,function(e){$(i).css("z-index","0"),a.options.zoomEnabled=!0,a.zoomContainer.addClass("custom-zoomContainer").show(),a.zoomWindow.addClass("custom-zoomWindow"),a.zoomContainer.mouseleave(function(e){$(this).find(".zoomWindow").show()}),a.zoomContainer.click(function(e){a.options.zoomEnabled=!1,$(t).css("z-index","9999"),$(this).hide(),$(this).find(".zoomWindow").delay(100).hide()})}):($(t).data("zoom-image")||($("#imageGallery a").eq(0).trigger("mouseover"),$(".zoom-message").hide()),$(document).on("mouseenter",".zoomContainer",function(e){$(".zoom-message").text("Click to open expanded view"),$(".alert-box").hide()}),$(document).on("mouseleave",".zoomContainer",function(e){$(".zoom-message").text("Roll over image to zoom in")}),$(document).on("click",i,function(e){openZoomPopUP()}))}}function closeVideoPlay(){$(".cam").show(),$(".close-video").hide(),$("#videomodal").css("display","none"),$(".customervideo").attr("src",""),$(".thumb-tile img").css("cursor","pointer"),$(".video-bg").removeClass("zoomImgActive")}function cacheImages(e,t){$("#imageGallery a").each(function(){var a=$(this),i=$(this).attr("class").split("elevatezoom-gallery")[1],o=a.attr("data-zoom-image");$("#imageGallery .thumbnailImage").each(function(){currentValue=$(this).attr("id").split("thumbnail")[1],i===currentValue&&(e.push(a.attr("data-image")),void 0!==o&&!1!==o&&t.push(a.attr("data-zoom-image")))})})}function openZoomPopUP(){$("#zoom-popup").length||appendZoomPopUpDOM(),$("#imageGalleryZoomPopUP a,.video-bg").removeClass("zoomImgActive"),customDialog("zoom-popup","close-zoom-popup",closeZoomPopUP);var e=thumTileIndex.split(" ")[0],t=$(".zoom-popup-gallery"+e);t.addClass("zoomImgActive"),$("#initializeclickOnZoom_01").attr({src:t.attr("data-image"),"data-zoom-image":t.attr("data-zoom-image")}),$("#initializeclickOnZoom_01").parent().attr({"data-index":e,"data-image":t.attr("data-image")}),$("#l-image").attr({src:t.attr("data-image")}),$("#initializeclickOnZoom_01").data("elevateZoom")?swapImages(!1,!1,"#initializeclickOnZoom_01","#l-image","imageGalleryZoomPopUP","zoom-popup-gallery",t):initializeZoom(initializeClickZoomOptions),$("body").addClass("stop-scrolling"),cdp.getImagehover()}function appendZoomPopUpDOM(){$('<div id="view-product-zoom-Template"></div><script id="productZoomTemplate" type="text/x-mustache-template"><div id="zoom-popup" class="custom-dialog cdp"><div id="zoom-selected-img" data-index="{{index}}" data-image="{{dataImage}}" class="zoom-wrapper"><img id="initializeclickOnZoom_01" class="img-zoom-click image-zoom" src="" data-zoom-image=""><img id="l-image" src=""></div><div class="zoom-popup-pname">{{productName}}</div><div id="imageGalleryZoomPopUP" class="thumb-area">{{#items}}<div class="thumb-tile"><a href="javascript:void(0)" class="zoom-thumb-nail zoom-popup-gallery{{index}}" data-index="{{index}}" data-image="{{dataImage}}" data-zoom-image="{{dataZoomImage}}" data-selected="{{isSelected}}" onclick="getSelectedImageDOM(this);"><img class="thumbnailImage" id="thumbnail{{index}}" itemprop="image" class="productimg mainimg cssImgXLarge" src="{{src}}"/></a></div>{{/items}}{{#videoBgImage}}<div id="videowrapper" class="thumb-tile zoompopup-video"><div class="video-icon closevideo"><div class="animated-shadow"></div><i class="material-icons close-video">close</i><i class="material-icons cam">play_arrow</i></div><div class="video-bg"></div><img itemprop="image" src={{videoBgImage}} /></div>{{/videoBgImage}}</div><div id="zoompopup-video"></div></div></div>').insertAfter($(".popup-background")),getImageGalleryFromDom(),$("#videowrapper").length&&$("#zoompopup-video").html(document.getElementById("videomodal").outerHTML)}function closeZoomPopUP(){var e=$("#initializeclickOnZoom_01").data("elevateZoom");e.options.zoomEnabled=!1,$(e.zoomContainer).hide(),$("#zoom-popup").hide(),$(".zoom-message").text("Roll over image to zoom in"),$("#zoom-popup").closest("#view-product-zoom-Template").find(".custom-overlay").remove(),closeVideoPlay(),$("body").removeClass("stop-scrolling")}function getSelectedImageDOM(e){closeVideoPlay(),swapImages(e,!1,"#initializeclickOnZoom_01","#l-image","imageGalleryZoomPopUP","zoom-popup-gallery")}function getImageGalleryFromDom(){var e,t=[],a=1;$(".thumb-tile a").each(function(e,i){if(e>xImages.length-1)return!1;var o=$(this).find("img").attr("src"),n=$(this).attr("data-image"),l=$(this).attr("data-zoom-image"),r={index:a++,src:o,dataImage:n,dataZoomImage:l};t.push(r)}),$("#videowrapper").length&&(e=$("#videowrapper").find("img").attr("src"));var i=$(".product-name").text(),o={items:t,productName:i,videoBgImage:e},n=$("#productZoomTemplate").html();if(void 0!=n){var l=Mustache.to_html(n,o);$("#view-product-zoom-Template").html(l)}}function showOfferTooltip(e){1===$(".price-crossline").length||e&&"INR"!==e?$(".offers-available-btn").removeClass("position-center").addClass("position-bottom"):$(".offers-available-btn").removeClass("position-bottom").addClass("position-center")}function setGeoDisplayInfo(){geoDisplayInfo&&!geoDisplayInfo.showPincodeOrCity&&("INTERNATIONAL"===getProductType()?($("#pinCode").val(geoDisplayInfo.defaultGeoDetails.geoId),enableDateTimeSelector()):(pincode=geoDisplayInfo.defaultGeoDetails.geoId,finalizePincode(geoDisplayInfo.defaultGeoDetails.geoId)))}function scrollFunction(){document.body.scrollTop>50||document.documentElement.scrollTop>50?document.getElementById("top-button").classList.add("show"):document.getElementById("top-button").classList.remove("show")}function initializeFancybox(){$(".file-place").fancybox({overlayShow:!0,tpl:{closeBtn:'<a title="Close" class="fancybox-item fancybox-close"><i class="material-icons">close</i></a>'}})}function clearinput(){$("#destlookup").val(""),updateResolvedPincode(null,null)}function onDeliveryDatesLoaded(){try{var e=$("#productType").val()||"";"COURIER"!=e&&"PERSONALIZED"!=e||(productDelivery(e||"",!0),activePersonalisedOnDateSelect(),$(".formfooter").hide())}catch(e){console.error(e)}}function clearPincodeMsg(){$("#pincodemsg").removeClass("infomsgbox"),$("#pincodemsg").text(""),$("#pincodemsg").hide()}function loadBlockedDates(e,t){var a="/runtime/control/getBlockedDates?productId="+e+"&pincode="+t,i=!0;return"Y"===$("#autoFillDateAndTimeSlots").val()&&(i=!1),$.ajax({global:i,aync:!0,url:a,dataType:"json",success:function(e){blockedDates=e}})}function validationCityforVariant(){if("INTERNATIONAL"==$("#productType").val())if(null!=citiesList){for(var e=!1,t=0;t<citiesList.length&&!e;t++)citiesList[t].CITY_KEY==$("#pinCode").val()&&(e=!0,checkCityForIntlVariant());e||(deliveryDates=null,unsetDest(!0))}else deliveryDates=null,unsetDest(!0);else checkCityForVariant()}function checkCityForIntlVariant(){var e=$("#addProductId").val(),t=$("#pinCode").val(),a=$("#shippingMethodId").val(),i=$("#timeSlotId").val(),o=($("#shippingCost").val(),$("#deliveryDate").val());$("#countryGeoId").val();$.ajax({type:"GET",dataType:"json",async:!0,url:"/control/getShippingDetailsAndDeliverDates?productId="+e+"&shipmentType="+a+"&deliveryDate="+o+"&city="+t+"&timeSlotId="+i,success:function(e){if(null!=(shipmentDetails=e.shippingDetails)&&1==e.isShippingDetailsExists){e.shippingDetails;for(var t=e.keys,a=$("#shippingMethodId").val(),i=$("#itemDesiredDeliveryDate").val(),o=!1,n=!1,l=0;l<t.length&&(!o&&!n);l++)if(""!=a&&a==t[l]){o=!0;var r=e.deliveryDates;if(null!=r&&e.isDeliveryDatesExists&&(deliveryDates=r.deliveryDates).includes(i)){n=!0;break}}o&&n||removeShippingDetailse()}else removeShippingDetailse()}})}function checkCityForVariant(){if($(".delivery-date-area").append("<div class='new-loader-area' style='display:block;'><div class='new-loader'></div></div>"),"Y"==$("#autoFillDateAndTimeSlots").val()&&(""!=$("#previousPincode").val()||null!=pincode)){$("#avialable-gifts").css("display","none"),$("#selectedlocality").text(""),$("#destlookup").removeClass("hightlight-error activeinput"),$("#destlookup").css("color","#6E6E6E"),$("#buynow, #addToCart, .cake-variants,.inputdiv.date-select-wrapper, .personal-inputs").show(),$(".remote-area").show(),$(".formfooter").show(),isVariantSwitch=!0;var e=$(".delivery-date-area .date-tabs ul.tab-nav li.active").attr("id"),t=$("#addProductId").val(),a=$("#deliveryDate").val(),i=$("#countryGeoId").val();"autofill-today"==e?$(".delivery-date-area .date-tabs ul.tab-nav li:first").addClass("active").trigger("click"):"autofill-tomorrow"==e?$(".delivery-date-area .date-tabs ul.tab-nav li:nth-child(2)").addClass("active").trigger("click"):"selecte_date"==e&&buildShippingTimeSlots(t,pincode,a,i,!1)}}function showDeliverableMessage(e){$("#pincodemsg").removeClass("infomsgbox").html("").hide(),this.pincode=e,$("#pincodeAlert").hide()}function removeShippingDetailse(){$("#deliveryDate").val(""),$("#productDeliveryDate").val(""),$("#shippingMethodId").val(""),$("#timeSlotId").val(""),$("#shippingCost").val(""),$("#deliverydateofmonth").text(""),$("#deliverymonth").text(""),$("#deliveryweekday").text(""),$("#shippingmethod").text(""),$("#shippingcost").text(""),$("#timeslot").text("")}function logProductView(){if(window.localStorage){var e=document.getElementById("productId");if(e){e=e.value;var t=(new Date).getTime(),a=JSON.parse(localStorage.getItem("vc"));(null==a||t-a.laxt>18e5)&&(a={}),a.laxt=t,a[e]=a[e]||{};var i=void 0!=document.getElementById("productCategoryId")?document.getElementById("productCategoryId").value:"Gift";if(!a[e].hasOwnProperty(i)){a[e][i]=1;psvPopulateData({id:e,cat:i})}localStorage.setItem("vc",JSON.stringify(a))}}}function validateProductForm(){var e=null,t=null,a=null,i=null,o=!1,n=!1,l=$("#productType").val();e=$("#deliveryDate").length&&$("#deliveryDate").val(),t=$("#shippingMethodId").length&&$("#shippingMethodId").val(),a=$("#timeSlotId").length&&$("#timeSlotId").val(),i=$("#shippingCost").length&&$("#shippingCost").val();var r=!!(e&&t&&i);if("INTERNATIONAL"==l?(pincode=$("#pinCode").val(),o=r):o=!(!r||!a),$("#destlookup").length>0&&!pincode)return o=!1,resetProductShippingInfo(),$("#pincodeAlert").show(),$("#datetimeshipping").hide(),$("#destlookup").addClass("hightlight-error").removeClass("activeinput"),$("#datetimelink").addClass("disableInput"),$(".date-select-wrapper").show(),!1;if($("input:radio[name='feature']").length){if(!$("input:radio[name='feature']").is(":checked"))return n=!0,o=!1,$("#variantError").show(),!1;n=!1,$("#variantError").hide()}if(!o&&!n)return $("#dateAlert").show(),$("#datetimelink").addClass("hightlight-error"),!1;if($(".selectflavourVal").length&&!$(".selectflavourVal").val())return n=!0,o=!1,$("#flavourError").show(),$(".selectflavourText").removeClass("activeinput").addClass("hightlight-error"),!1;if($(".selectflavourVal").length&&(n=!1,$("#flavourError").hide()),(o=validate())||($(".customisedOption").addClass("invalid"),$(".customisedOption .per-msg-error").show()),o&&Object.keys(personalizedOptions).length){var s=[];for(var d in personalizedOptions)s.push(personalizedOptions[d]);$("#personalizedOptions").val(JSON.stringify(s))}return o}function showNotDeliverableMessage(){var e=null;if(occasionConfURL)e=occasionConfURL;else{var t="pincode="+pincode,a=a=$.urlParam("OCCASION_TAGS");if(selectedLocalityGoogle)t="OCCASION_TAGS="+(a||"")+"&",t+="localityname="+selectedLocalityGoogle;else if(selectedPincodeGoogle)t="pincode="+selectedPincodeGoogle;$("#primaryKeywordId").val();e="search?"+t}setCookie("lastSelectedPlace",$("#destlookup").val(),30,"/"),setCookie("lastSelectedPincode",pincode,30,"/"),$("#avialable-gifts").html('<a href="/'+e+'">VIEW GIFTS AVAILABLE FOR '+pincode+"</a>"+getNotDeliverablePixel()),$("#avialable-gifts").css("display","block"),$(".gift-not-available").show(),$(".gift-not-available-alert").show(),$("#selectedlocality").text(""),$("#destlookup").addClass("hightlight-error").removeClass("activeinput"),$("#destlookup").css("color","#e53333"),$("#buynow, #addToCart, .cake-variants,.inputdiv.date-select-wrapper, .personal-inputs").hide(),$(".remote-area").hide(),$("#pincodemsg").hide(),$(".formfooter").hide(),$("#pincodeAlert").hide(),$("#avialable-gifts").on("click",function(){$("#productfrm").submit(function(e){e.preventDefault()})}),pincode=null,$(".delivery-date-area").find(".new-loader-area").remove(),$(".delivery-date-area").hide(),$(".date-select-wrapper").hide()}function showDeliverableDOM(){$("#buynow, #addToCart,.inputdiv.date-select-wrapper, .personal-inputs").show(),$("#destlookup").css("color","#222"),$("#destlookup").removeClass("hightlight-error"),$("#avialable-gifts").hide(),$(".formfooter, .cross-input").show()}function getProductPriceByDeliveryInfo(e,t,a){var i=!1,o=!1,n=getProductType(),l="Y"===$("#autoFillDateAndTimeSlots").val(),r=0;return $.ajax({type:"GET",dataType:"json",async:!0,global:l,url:"/control/getProductPriceByDeliveryDate?productId="+e+"&geoId="+a+(t?"&deliveryDate="+t:"")+"&FNP_CURRENT_CATALOG_ID="+$("#FNP_CURRENT_CATALOG_ID").val(),success:function(l){if(i=cookieLocalCurrency&&"INR"!=cookieLocalCurrency,l){var s=$("form[name='productfrm'] .price-block");if(parseFloat(l.price)>=parseFloat(l.listPrice))o=parseFloat(l.price)!=parseFloat(l.listPrice),$(".price-increase-info-icon").removeClass("priceinfo-icon-display"),r=l.price,$(s).find(".price").html('<span class="WebRupee">&#8377;</span>'+l.price),void 0!=$(s).find(".oldprice")&&($(s).find(".oldprice").html(""),$(s).find(".oldprice").hide()),void 0!=$(s).find(".off")&&$(s).find(".off").hide();else{if(o=!1,$(".price-increase-info-icon").addClass("priceinfo-icon-display"),void 0!=l.listPrice&&""!=l.listPrice){var d=parseFloat(l.listPrice)-parseFloat(l.price),c=parseFloat(d)/parseFloat(l.listPrice)*100;void 0!=$(s).find(".off")&&0!==c&&($(s).find(".off").html(" ("+Math.floor(c)+"% OFF)"),$(s).find(".off").show()),void 0!=$(s).find(".oldprice")&&(void 0!=$(s).find(".oldpriceInINR")&&$(s).find(".oldpriceInINR").html(l.listPrice),$(s).find(".oldprice").html('<span class="WebRupee">&#8377;</span>'+l.listPrice),$(s).find(".oldprice").show())}r=l.price,$(s).find(".price").html('<span class="WebRupee">&#8377;</span>'+l.price)}o&&"COURIER"!=n&&"PERSONALIZED"!=n&&eventDates&&(!t||$.inArray(t,eventDates)>-1)?(i&&$(".tool-tip-text").length&&($(".currencyMsg").length&&$(".currencyMsg").show(),$(".productform .tooltiplegend").show()),$(".price-increase-info-icon").removeClass("priceinfo-icon-display")):($(".currencyMsg").hide(),$(".price-increase-info-icon").addClass("priceinfo-icon-display"),i&&$(".productform .tooltiplegend").show()),a&&!t&&"Y"===l.isPricingRuleApplied&&l.price!==l.defaultPrice?(r=l.price,$(".remote-area").html('<span class="price-updated">Price updated: <span class="remote-area-price">'+l.price+'</span><span class="lesstheprice">'+l.defaultPrice+'</span><span class="area-msg">'+l.geoSpecificMessage+'</span><span class="remote-local-price">'+l.price+'</span><span class="remote-default-price">'+l.defaultPrice+"</span></span>")):$(".remote-area-price").length&&$(".remote-area").html('<span class="price-updated">Price updated: <span class="remote-area-price">'+l.price+'</span><span class="lesstheprice">'+l.defaultPrice+'</span><span class="area-msg">'+l.geoSpecificMessage+'</span><span class="remote-local-price">'+l.price+'</span><span class="remote-default-price">'+l.defaultPrice+"</span></span>"),$(s).find(".priceInINR").html(l.price),$("#price").val(l.price),convertPdpCurrency()}else $(".price-increase-info-icon").addClass("priceinfo-icon-display"),i&&$(".productform .tooltiplegend").show();0===r&&(r=l.price),updateProductCdpAttr(e,r,cookieLocalCurrency)}})}function updateProductDetails(e,t,a,i){var o=null,n=null,l=null,r=a&&Object.keys(a).length,s=$("#deliveryDate").val(),d=!!s&&s.split("/").join("-");if(getProductPriceByDeliveryInfo($("#addProductId").val(),d,pincode),r?(o=i,n=a):(o=getVariantPrice(e),updateBreadcrumbPname(null,(n=getProductDetails(e)).productName)),$("#price").val(o.price),updateProductPriceDOM(o),updateINRprice(o.price),initCurrencies(),n){t&&constructProductDetailImages(e,n);l=n.sku;$(".product-skucode").html(l),$("#productsku").val(l)}$("#pdp-description .description").html("<h4>Description</h4><p>"+$("#"+e+"_desc").html()+"</p>"),$("#productType").length&&"INTERNATIONAL"===$("#productType").val()&&getIntlCities(),$("#destlookup").length&&$("#destlookup").val()&&validationCityforVariant(),assocProduct&&($(".product-switch-btn.generic-green-btn").find(".product-type-price").html('<span class="WebRupee"></span>'+o.price+'</span><span class="priceInINR" style="display:none;">'+o.price+"</span>"),initCurrencies($(".product-type").find(".generic-green-btn").attr("id"))),personalizedOptions=getPersonalizedObjFromStorage(),constructPersonalizedTemplateInScreen(),s&&""!=s&&activePersonalisedOnDateSelect(),handleShowComboProducts()}function updateProductPriceDOM(e){if(e){var t=$("form[name='productfrm'] .price-block");if(parseFloat(e.price)>=parseFloat(e.listPrice)||""==e.listPrice)$(t).find(".price").html('<span class="WebRupee">&#8377;</span>'+e.price),$(t).find(".oldprice").length&&($(t).find(".oldprice").html(""),$(t).find(".oldprice").hide()),$(t).find(".off").length&&$(t).find(".off").hide();else{if(void 0!=e.listPrice&&""!=e.listPrice){var a=parseFloat(e.listPrice)-parseFloat(e.price),i=parseFloat(a)/parseFloat(e.listPrice)*100;0==$(t).find(".off").length&&$(".pricediv").append('<span class="off"></span>'),0==$(t).find(".oldprice").length&&($(".pricediv").insertAfter().append('<span class="oldpriceInINR" style="display:none;">'+e.listPrice+"</span>"),$(".pricediv").insertAfter().append('<span class="oldprice"></span>')),$(t).find(".off").html(" ("+Math.floor(i)+"% OFF)"),$(t).find(".off").show(),$(t).find(".oldpriceInINR").length&&$(t).find(".oldpriceInINR").html(e.listPrice),$(t).find(".oldprice").html('<span class="WebRupee">&#8377;</span>'+e.listPrice),$(t).find(".oldprice").show()}$(t).find(".price").html('<span class="WebRupee">&#8377;</span>'+e.price)}}}function buildFinalVariantDOM(e){var t=e,a=e,i=getSubVariantList(e),o=[],n=null;if(null!=i){o=i.split(",");for(var l="",r=$(".selectflavourVal").val(),s=0;s<o.length;s++){var d=e+","+o[s];""!=r&&void 0!=r&&r.trim()==o[s].trim()?(t=t+","+o[s],l=l+'<li><a id="'+o[s]+'" data-variantkey="'+d+'"  href="javascript:void(0);" class="selected" >'+o[s].toLowerCase()+"</a></li>"):l=l+'<li><a id="'+o[s]+'" data-variantkey="'+d+'"  href="javascript:void(0);" >'+o[s].toLowerCase()+"</a></li>"}$("#subvariant3").html(l)}if($("#subvariant3 .selected").length){var c=$("#subvariant3 .selected").prop("id");$(".selectflavourVal").val(c);var p=$("#subvariant3 .selected").attr("data-variantkey");$(".selectedProdFeature").val(p),$(".selectflavourText").html($("#subvariant3 .selected").text()+'<span id="dropdown-arrow"><i class="material-icons">keyboard_arrow_down</i></span>'),$(".selectflavourText").removeClass("mandatory")}if(""!=$(".selectflavourVal").val()&&void 0!=$(".selectflavourVal").val())n=getProductIdByVariantKey(t);else{var u=$("#addProductId").val(),m=getProductKeyByProductId(u);if(null!=m){a=a+","+m.split(",")[2]}else a+=o[0];n=getProductIdByVariantKey(a)}null!=n&&(checkProductExpiry(n),$('input[name="add_product_id"]').val(n),updateProductDetails(n,!0))}function isCourierProduct(e){return e&&("COURIER"==e||"PERSONALIZED"==e)}function constructYMALWidget(){var e=getCurrentProductUrlName();$.each(jQuery.deparam.querystring(),function(e,t){"pos"!=e&&youMayAlsoQueryString.push(e+"="+t)}),youMayAlsoQueryString.push("currentProductUrlName="+e);var t=jQuery.deparam.querystring(youMayAlsoQueryString.join("&"),!0),a=$.param.querystring("?",t,0);$.ajax({type:"GET",global:!1,url:AJAX_JSON_URL_LIST.youMayAlsoLikeUrl+a,success:function(e){$("#youmayalsolikeproductlisting").html(e)},complete:function(e,t){updateProductInfo(getPageProductIds(productDomSelector,productDomAttributeName),!0),initCurrencies(),initializeSlick($("#youmayalsolikeproductlisting .productsection #searchProductListing"),4,1)}})}function constructWOAVWidget(){var e=$("#FNP_CURRENT_CATALOG_ID").val(),t=$("#isRakhiProduct").val();$.ajax({type:"GET",global:!1,async:!0,dataType:"json",data:{catalogId:e,isRakhiProduct:t},url:"/control/whatOthersAreViewing",success:function(a){if(Object.keys(a).length&&a.data.isAvailable){var i=a.data,o=$("#baseProductId").val(),n=parseInt(i.viewSize),l="woav-";e&&(l+=e+"-"),l="Y"===t?"rlpidx":"lpidx";var r=parseInt(getCookie(l)),s=n<i.productIds.length?n:i.productIds.length;r&&r<i.productIds.length?s=r+n:r=0;var d=i.productIds.slice(r,s);-1!=$.inArray(o,d)&&(d.splice($.inArray(o,d),1),s<i.productIds.length&&(d.push(i.productIds[s]),s+=1)),d.length<n&&r>n&&(d=d.concat(i.productIds.slice(0,n-d.length))),d&&d.length>0&&(getProductListing(d,"woav",e,$(".woavproductlisting .productlisting"),!0,4,1),setCookie(l,s,365,"/"))}else!1===a.data.isAvailable&&$(".others-viewing").hide()}})}function bindEventsForCakeProduct(){$(document).on("click",".radio-box",function(e){selectCakeVariantRadioBtns(this)}),$(document).on("click","#subvariant3 a",function(){var e=$(this).attr("data-variantkey"),t=getProductIdByVariantKey(e);t&&(checkProductExpiry(t),$('input[name="add_product_id"]').val(t),updateProductDetails(t,!0))}),$(document).on("change",".subvariant",function(){var e=$(this).attr("data-variantkey");if(features.split(",").length>2)buildFinalVariantDOM(e);else{var t=getProductIdByVariantKey(e);buildCakeSubVariantDOM(t,e),t&&(checkProductExpiry(t),$('input[name="add_product_id"]').val(t),updateProductDetails(t,!1))}})}function loadProductPageData(){var e=getProductType(),t=$("#productId").val();if(checkProductExpiry(t),defaultVariantKey&&features){var a=features.split(","),i=defaultVariantKey;a.length>1&&buildCakeSubVariantDOM($("#addProductId").val(),i),bindEventsForCakeProduct()}e&&"INTERNATIONAL"!==e&&!isCourierProduct($("#productType").val())&&getProductDeliveryTimeLeft(t),constructYMALWidget(),constructWOAVWidget(),updateOrderSource()}function getProductDeliveryTimeLeft(){$.ajax({url:"/control/getProductDeliveryTimeLeft",type:"GET",data:"productId="+$("#productId").val(),global:!1,dataType:"json",success:function(e){if(Object.keys(e).length&&e.isDeliveryTimeAvailable){var t=convertTimestampStringToDate(e.currentTimestamp),a=t.getTime();try{var i=convertTimestampStringToDate(e.cutoffTimestamp).getTime(),o=convertTimestampStringToDate(e.deliveryDate),n=o.getDate(),l=parseInt(o.getMonth())+1,r=o.getFullYear();timerCountDown(i-a);var s=new Date(t.getTime()+864e5);n==t.getDate()&&l==parseInt(t.getMonth())+1&&r==t.getFullYear()?$(".deliveryDay").text("today"):n==parseInt(s.getDate())&&l==parseInt(s.getMonth())+1&&r==s.getFullYear()?$(".deliveryDay").text("tomorrow"):$(".deliveryDay").text("by "+n+monthNames[l-1]),$(".timeellapse").show()}catch(e){console.log(e)}}},error:function(e){}})}function timerCountDown(e){if(e>0){var t=Math.floor(e/1e3),a=Math.floor(t/3600),i=Math.floor((t-3600*a)/60),o=t-3600*a-60*i,n=(a<10?"0":"")+a+":"+(i<10?"0":"")+i+":"+(o<10?"0":"")+o;$(".timeleft").text(n),setTimeout(function(){timerCountDown(e-1e3)},1e3)}}function checkProductExpiry(e){$.ajax({url:"/control/getProductExpiryInfo",type:"GET",data:"productId="+e,dataType:"json",global:!1,success:function(e){e&&e.isProductStockAvailable&&outOfStockDom(e.isProductStockAvailable)},error:function(e){}})}function outOfStockDom(e){$(".out-of-stock").length&&$(".out-of-stock").remove(),"Y"===e?($(".delivery-inputs, .pdp-buttons, .formfooter").show(),$(".out-of-stock").remove()):($(".delivery-inputs, .pdp-buttons, .formfooter").hide(),$(".view-more").append('<input type="hidden" name="product_id" id="productId" value="${product.productId!}" /><div class="out-of-stock"><h3 class="red-font">OUT OF STOCK.</h3></div>'))}function selectCakeVariantRadioBtns(e){$(e).closest(".subvariantlist").find(".radio-check").removeClass("radio-check"),$(e).closest(".subvariantlist").find(".checked").removeClass("checked"),$(e).closest(".subvariantlist").find(".unchecked-radio").addClass("show"),$(e).find(".radio-outer").addClass("radio-check"),$(e).find(".checked-radio").addClass("checked"),$(e).find(".unchecked-radio").removeClass("show"),$(e).find(".radio-outer .subvariant").trigger("change")}function outSideSelectBoxClick(e){$("body").click(function(t){$("#occasioncontainer").hide(),"dropdown-arrow"==t.target.id||t.target.className.contains("selectflavourText")||t.target.className.contains("inputlength")||t.target.className.contains("dropdown-arrow")||t.target.className.contains("material-icons")||($(".dropcontainer").hide(),$("#dropdown-arrow").removeAttr("style")),$(e).removeClass("active-select")})}function occasionFooterControl(e){$("#occasion_day").val();var t=Number($("#occasion_date").val()),a=Number($("#occasion_month").val()),i=Number($("#occasion_cutoff_time").val()),o=$("#occasion_link_url").val(),n=$("#not_deliverable_msg").val(),l=$("#not_deliverable_link_msg").val(),r=deliveryDates[0].split("-"),s=(new Date).getDate(),d=(new Date).getMonth()+1,c=(new Date).getHours();isCourierProduct($("#productType").val())&&r[0]>t&&isExpressProductAvailable&&(activeMonth<=a&&activeMonth<=r[1]&&a-activeMonth<2||e)&&(s<=t&&d==a||s>t&&d<a)&&!(s==t&&c>i)?($(".mgs-not-deliverable").html(n),$("#occasion-footer-link").html(l),$(".link-not-deliverabl").attr("href",o),$(".calendarfooter .occasion-calendar-footer").addClass("show"),$(".courier-footer").addClass("hide")):($(".calendarfooter .occasion-calendar-footer").removeClass("show"),$(".courier-footer").removeClass("hide"))}function showAddons(e,t){$("#city").val();var a=$("#shippingMethodId").val(),i=($("#vendorId").val(),$("#productId").val()),o=$("#addProductId").val(),n=$("#productType").val(),l=$("#timeSlotId").val(),r=parseInt($("#price").val()),s="free"===$("#shippingCost").val().toLowerCase()?0:parseInt($("#shippingCost").val());isbuynow=$("input[name='isbuynow']").val(),$("#addonDetails").html("");var d=["productId="+i,"addProductId="+o,"pinCode="+pincode,"shippingMethod="+a,"timeSlotId="+l,"productType="+n,"FNP_CURRENT_CATALOG_ID="+$("#FNP_CURRENT_CATALOG_ID").val(),"isbuynow="+isbuynow],c=jQuery.deparam.querystring(d.join("&"),!0),p=$.param.querystring("?",c,0),u="N"===isbuynow?"Add to cart":"Buy Now";$("#show-addon").load("/control/getAddonsDetails"+p,function(e,t,a){"Y"==$("#isAddonsAvailable").val()&&void 0!=$("#isAddonsAvailable").val()?(customDialog("addon","close-addon"),$("#base-product-price").val(r),$("#shipping-product-price").val(s),renderAddons(r,0,0,s,u,o),"function"==typeof omnitureAddonShown&&omnitureAddonShown(),$("#addontab").show()):$("input[name='isbuynow']").length&&"N"==$("input[name='isbuynow']").val()?reloadForAddons("N"):proceedToCheckOut(),initCurrencies("show-addon")}),0===$("#addonsclickedfrom").length?$("<input>").attr({type:"hidden",id:"addonsclickedfrom",value:u}).appendTo("body"):$("#addonsclickedfrom").val(u)}function updateINRprice(e){if($(".pricediv").length){var t=$(".pricediv")[0],a=$(t).parent().find(".priceInINR");if(a.length){var i=a[0];$(i).html(e)}}}function removeCityContext(){localityLookup.placeholder=" City",$("#contextcity>span").text(""),$("#contextcity").hide(),$("#pincodemsg").removeClass("infomsgbox"),$("#pincodemsg").text(""),$("#pincodemsg").hide(),disableDateTimeSelector()}function goToCalendar(){$("#modaldatetimepicker").slick("slickGoTo",0)}function goToShippingMethod(){$("#modaltimeslot").show(),$("#shippingmethoddiv").show(),$("#modaldatetimepicker .slick-prev").click()}function activePersonalisedOnDateSelect(){$(".personalized").data("isproductpersonalizable")?($(".other-personalize-box").addClass("activeinput").removeClass("disableInput"),$(".personal-upload").addClass("activeinput").removeClass("disableInput"),$(".personal-msg").addClass("activeinput").removeClass("disableInput"),$(".customisedOption").addClass("activeinput").removeClass("disableInput"),$(".charleft").removeClass("disableInput")):$(".selectflavourVal")&&$(".selectflavourText").addClass("activeinput").removeClass("disableInput hightlight-error")}function getPersonalizedOptionsForProductId(e){var t={isPersonalizedImage:!1,isPersonalizedText:!1};return e&&(productPersonalizedMap[e]&&(t.isPersonalizedImage=productPersonalizedMap[e].isPersonalizableImage),productPersonalizedMap[e]&&(t.isPersonalizedText=productPersonalizedMap[e].isPersonalizableText),!(productPersonalizedMap&&(t.isPersonalizedImage||t.isPersonalizedText))&&(t={isPersonalizedImage:!0,isPersonalizedText:!0})),t}function buynowActive(){$(".dropdowncontent").is(":visible")||$("#buynow").addClass("activeinput")}function getProductListing(e,t,a,i,o,n,l){var r="object"!=typeof e||Object.getOwnPropertyDescriptor(e,"length").enumerable?e:e.toString(),s=getCurrentProductUrlName();$.ajax({type:"GET",global:!1,async:!0,data:{productIds:r,pageType:t,catalogId:a,currentProductUrlName:s},url:"/control/getProductListing",success:function(t){t&&(i.show(),i.append(t),updateProductInfo(getPageProductIds(productDomSelector,productDomAttributeName),!0),initCurrencies(),o&e.length>4&&(n=n||4,l=l||1,initializeSlick(i.find(".productsection #searchProductListing"),n,l)))}})}function updateOrderSource(){var e=getCookie("fnpSalesChannelEnumId");if(void 0!==e&&"function"==typeof e.indexOf&&-1!=e.indexOf("&")&&(e=$.urlParam("fnpSalesChannelEnumId",getCookie("source"))),""==e){var t=getCookie("source"),a=null,i=null;if(t)var a=$.urlParam("utm_source",t),i=$.urlParam("utm_campaign",t);else var a=getCookie("utm_source"),i=getCookie("utm_campaign");"affiliate"==a&&(e="ONLN_DSKTP_AFLT_NT",isTabletOrIpad()&&(e="ONLN_TAB_AFLT_NT")),null!=i&&""!=i&&(0==$("#ptc").length?$("#productfrm").append('<input type="hidden" id="ptc" name="ptc" value="'+i+'" />'):$("#ptc").val().startsWith("WB_")||$("#ptc").val(i))}""!=e&&void 0!==e&&(document.productfrm.fnpSalesChannelEnumId.value=e)}function getNotDeliverablePixel(){var e="?g="+$("#addProductId").val();e+="&p="+pincode,e+="&t="+encodeURIComponent($("#destlookup").val());return"<img src='"+(document.location.href.indexOf(".fnp.com")>0&&document.location.href.indexOf("fnpplus")<0?"https://nd-report-new.appspot.com":"")+"/assets/images/tracker/nd.gif"+e+"' width='1' height='1'/>"}function convertTimestampStringToDate(e){var t=null;if(null!=e&&void 0!=e){var a=(i=e.split(" "))[1].split(":"),i=i[0].split("-");t=new Date(i[2],parseInt(i[1])-1,i[0],a[0],a[1])}return t}function proceedToCheckOut(){isUserLoggedIn()?window.location="https://"+secureHostNameToUse+"/control/delivery-address":window.location="https://"+secureHostNameToUse+"/control/checkout-login"}function getRecentlyViewedProducts(e){null!=e&&$.ajax({type:"GET",global:!1,async:!1,url:"/control/getRecentlyViewedProducts?productIds="+e,dataType:"json",success:function(e){return recentviewedproducts=e,e},error:function(e,t,a){recentviewedproducts=[]}})}function resizeTextArea(e){e.length>0&&(e.height(1),e.scrollTop(0),e.height(e[0].scrollHeight-e[0].clientHeight+e.height()))}function customizeSortSelect(){$("#sort").selectmenu({position:{my:"right bottom",at:"right top"},icons:{button:"ui-icon-carat-1-n"},change:function(e,t){$("#sort").val(t.item.value),$("#sort").trigger("change")}})}function getDefaultDate(){return jQuery.deparam.querystring()&&jQuery.deparam.querystring().deliverydate?$.datepicker.parseDate("dd-mm-yy",jQuery.deparam.querystring().deliverydate):deliveryDates&&deliveryDates.length>0?$.datepicker.parseDate("dd-mm-yy",deliveryDates[0]):new Date}function getIntlDefaultDate(e){return jQuery.deparam.querystring()&&jQuery.deparam.querystring().deliverydate?$.datepicker.parseDate("dd-mm-yy",jQuery.deparam.querystring().deliverydate):e&&e.length>0?$.datepicker.parseDate("dd-mm-yy",e[0]):new Date}function getOfbizReadableDate(e){if(null!=e){return e.split("/")[0]+"-"+e.split("/")[1]+"-"+e.split("/")[2]}return null}function updateDesiredDeliveryDateTimestamp(e){var t=selectedSeranadesDates.length;if(t>0){var a="";selectedSeranadesDates.forEach(function(e,i){0===i&&(document.productfrm.itemDesiredDeliveryDate.value=getOfbizReadableDate(e)),a+=getOfbizReadableDate(e),a+=t>i+1?",":""}),document.productfrm.itemDesiredDeliveryDatesList.value=a}else document.productfrm.itemDesiredDeliveryDate.value=getOfbizReadableDate(e)}function populateDeliveryDetails(e){var t=$("#addProductId").val(),a=($("#productType").val(),null),i=assocProduct&&getAssociateVariantProductId();return assocProduct&&e?a="/control/getPinCodeAndDeliveryDates?checkOtherProdTypeAvail=Y&productIds="+t+","+i.productId+"&pinCode="+e:(a="/control/getPinCodeAndDeliveryDates?productId="+t,e&&(a=a+"&pinCode="+e),isCourierProduct($("#productType").val())&&(a+="&checkOtherProdTypeAvail=Y")),$.ajax({type:"GET",dataType:"json",async:!0,url:a,global:!1,success:function(e){if(resolvedPinDetails&&"product"===fnpPageType&&cdp.getLocation(resolvedPinDetails.resolvedPincode,e.isDatesAvailable,t),Object.keys(e).length){var a=assocProduct?e[t]:e,o=assocProduct&&e[i.productId].isDatesAvailable,n="_NA_",l="_NA_",r=isCourierProduct($("#productType").val())&&!1===$("#hand-delivery").hasClass("product-not-available");if(a&&a.isDatesAvailable?(enableDateTimeSelector(),deliveryDates=a.deliveryDates,isExpressProductAvailable=a.isExpressProductAvailable,occasionFooterControl(!0),"block"===$("#avialable-gifts").css("display")&&showDeliverableDOM(),assocProduct&&(n=deliveryDates[0],o?(l=e[i.productId].deliveryDates[0],$("#fastest-delivery-toaster")&&r&&$("#fastest-delivery-toaster").show(),$("#fastest-delivery-toaster")&&!r&&$("#fastest-delivery-toaster").hide()):!$(".product-switch-btn").hasClass("product-not-available")&&switchToAvailableAssociateProduct(i.productId,!1)),$("#hand-delivery")&&$("#hand-delivery").hasClass("product-not-available")&&$("#fastest-delivery-toaster").hide()):($("#fastest-delivery-toaster")&&$("#fastest-delivery-toaster").hide(),deliveryDates=null,assocProduct&&o?switchToAvailableAssociateProduct(t,!0):(switchToAvailableAssociateProduct(t,!1,!0),showNotDeliverableMessage())),assocProduct){var s={};s[t]=n,s[i.productId]=l,callUpdateEarliestDeliveryDate({deliveryDates:s},!1)}}},error:function(e,t,a){deliveryDates=null}})}function disableAndAddLoadingGift(e){gaElement(e),$(e).addClass("loadinggif"),$(e).css("color","#EEE"),$(e).css("border-color","#EEE"),$(e).prop("disabled",!0)}function disableSubmitBtn(e){$(e).attr("disabled","disabled"),$(e).css("background-color","#FFFFFF"),$(e).css("border-color","#a3a5a6"),$(e).css("color","#a3a5a6")}function CommaFormatted(e){var t=(n=e.split(".",2))[1],a=parseInt(n[0]);if(isNaN(a))return"";var i="";a<0&&(i="-"),a=Math.abs(a);for(var o=new String(a),n=[];o.length>3;){var l=o.substr(o.length-3);n.unshift(l),o=o.substr(0,o.length-3)}return o.length>0&&n.unshift(o),o=n.join(","),e=t.length<1?o:o+"."+t,e=i+e}function initializeProductContentTab(){$(".slideable").slick({prevArrow:'<div id = "prevArrow" class = "slick-prev"></div>',nextArrow:'<div id = "nextArrow" class = "slick-next"></div>',infinite:!1,slidesToShow:1,slidesToScroll:1}),$(".slideable-dialog").slick({slide:".slider-item",prevArrow:'<div id = "prevArrow" class = "slick-prev"></div>',nextArrow:'<div id = "nextArrow" class = "slick-next"></div>',infinite:!1,slidesToShow:1,slidesToScroll:1,variableWidth:!0,draggable:!1,initialSlide:0})}function reloadForAddons(e){var t=window.location.href;"N"==e?-1===(t=t.replace("?ia=y","").replace("&ia=y","")).indexOf("?")?t+="?ia=y":t+="&ia=y":t=isUserLoggedIn()?"https://"+secureHostNameToUse+"/control/delivery-address":"https://"+secureHostNameToUse+"/control/checkout-login",window.location=t}function buildTabs(e,t){var a=new Date,i=a.getDate(),o=a.getMonth(),n=e.split("-"),l=t.split("-");n[0]==i&&n[1]==o+1?$("ul").find("[rel='today']").text("Today"):$("ul").find("[rel='today']").html(parseInt(n[0])+" "+monthNames[parseInt(n[1])-1]),l[0]==parseInt(i)+1&&l[1]==parseInt(o)+1?$("ul").find("[rel='tomorrow']").text("Tomorrow"):$("ul").find("[rel='tomorrow']").html(parseInt(l[0])+" "+monthNames[parseInt(l[1])-1])}function buildEarliestDate(e,t){var a=e.split("-"),i=$.datepicker.parseDate("dd/mm/yy",a[0]+"/"+a[1]+"/"+a[2]);$("#"+t+" .delivery-date .currentdate").text(i.getDate()),$("#"+t+" .delivery-date .currentMon").text(fullMonthNames[i.getMonth()]+","),$("#"+t+" .delivery-date .currentDay").text(fullDayNames[i.getDay()])}function buildShippingTimeSlots(e,t,a,i,o){var n="selecte_date-tb";o&&(n=currentTab);var l=a.split("/"),r=l[0]+"-"+l[1]+"-"+l[2];calendarDate=r,$("#deliveryDate").val(a),$("#itemDesiredDeliveryDate").val(r),buildEarliestDate(r,"selecte_date-tb"),$("#productDeliveryDate").val(a),$.ajax({type:"GET",dataType:"json",async:!0,global:!1,url:"/control/getShippingDetails?productId="+e+"&pinCode="+t+"&deliveryDate="+a+"&countryGeoId="+i,success:function(e){null!=e&&null!=e.shippingDetails&&1==e.isShippingDetailsExists?($(".delivery-date-area").show(),$(".auto-cake-inputs").show(),$(".auto-personal-inputs").css("display","inline"),buildEarliestShippingAndTimeSlots(n,e)):(deliveryDates=null,showNotDeliverableMessage(),$(".delivery-date-area").hide(),$(".auto-cake-inputs").hide(),$(".auto-personal-inputs").hide())}})}function currentTime(e,t){var a=null;(a=t?akamaiTime():akamaiDateAndTime).getHours(),a.getMinutes();return e.substring(0,2)<a.getHours()&&(e=a.getHours()+":"+a.getMinutes()+":00"),e}function buildEarliestShippingAndTimeSlots(e,t){$("#"+e+" .earliest-delivery-selected").hide(),$("#"+e+" ul").html("");var a="";if(t.deliveryDates&&"today"==e){today=t.deliveryDates[0],tomorrow=t.deliveryDates[1],buildEarliestDate(today,e),buildTabs(today,tomorrow);var i=(o=today.split("-"))[0]+"/"+o[1]+"/"+o[2];$("#deliveryDate").val(i),$("#itemDesiredDeliveryDate").val(today),$("#productDeliveryDate").val(i)}else if("tomorrow"==e){var o=tomorrow.split("-"),n=o[0]+"/"+o[1]+"/"+o[2];$("#deliveryDate").val(n),$("#itemDesiredDeliveryDate").val(tomorrow),$("#productDeliveryDate").val(n),buildEarliestDate(tomorrow,e)}else calendarDate==today&&"selecte_date-tb"==e?($(".delivery-date-area .date-tabs ul.tab-nav li").removeClass("active"),$(".delivery-date-area .date-tabs ul.tab-nav li#autofill-today").addClass("active"),e="today"):calendarDate==tomorrow&&"selecte_date-tb"==e&&($(".delivery-date-area .date-tabs ul.tab-nav li").removeClass("active"),$(".delivery-date-area .date-tabs ul.tab-nav li#autofill-tomorrow").addClass("active"),e="tomorrow");var l=t.shippingDetails,r={},s=!1;for(var d in l)l[d].priceDetails.price>0&&(s=!0,r[d]=l[d]);s&&(l=r);var c=Object.keys(l)[0],p=c,u=l[c].timeSlots[0].timeSlotId;if($("#"+e+"SelectedShipping").val()&&$("#"+e+"SelectedTimeslotId").val())c=$("#"+e+"SelectedShipping").val(),u=$("#"+e+"SelectedTimeslotId").val(),$("#shippingMethodId").val(c),$("#timeSlotId").val(u);else if("midnight-delivery-gifts"==$("#productCategoryId").val())u=l[c="MIDNIGHT_DELIVERY"].timeSlots[0].timeSlotId;else{_=l[c].timeSlots[0].startTime;"today"==e&&(_=currentTime(_,!0));var m=l[c].timeSlots[0].endTime,g=(parseInt(_)+parseInt(m))/2,h=parseInt(m)-parseInt(_);for(var d in l){var v=l[d];if("SUPERFAST_DELIVERY"==d||"FASTER_DELIVERY"==d||"EARLY_MORNING"==d){if("FASTER_DELIVERY"==d){var f=l.SUPERFAST_DELIVERY;if(f){c="SUPERFAST_DELIVERY",u=f.timeSlots[0].timeSlotId;break}c=d,u=v.timeSlots[0].timeSlotId;break}c=d,u=v.timeSlots[0].timeSlotId;break}for(var y=t.shippingDetails[d].timeSlots.length,b=0;b<y;b++){var C=t.shippingDetails[d].timeSlots[b].startTime;"today"==e&&(C=currentTime(C,!1));var I=t.shippingDetails[d].timeSlots[b].endTime,D=(parseInt(C)+parseInt(I))/2,k=parseInt(I)-parseInt(C);g>D?(g=D,c=d,u=v.timeSlots[b].timeSlotId):g==D&&h>k&&(g=D,c=d,u=v.timeSlots[b].timeSlotId)}}$("#shippingMethodId").val(c),$("#timeSlotId").val(u)}var P=!1;l=t.shippingDetails;for(var d in l)if(c==d?(a=a+'<li class="shipping active early-slot"><div class="deivery-title" data-shippingmethod="'+d+'">',P=!0):a=1==isVariantSwitch&&p==d?a+'<li class="shipping active default-slot"><div class="deivery-title" data-shippingmethod="'+d+'">':a+'<li class="shipping"><div class="deivery-title" data-shippingmethod="'+d+'">',a+=l[d].shippingMethodName,void 0!=l[d].priceDetails&&void 0!=l[d].priceDetails.price){var w=l[d].priceDetails.price;parseFloat(w)>0?($("#shippingCost").val(w),a=a+'- <span id="shippingcost" class="webprice red"><meta itemprop="priceCurrency" content="INR"><meta itemprop="price" content="'+l[d].priceDetails.price+'.00"><span class="WebRupee">&nbsp;&nbsp;</span>'+l[d].priceDetails.price+'</span><span class="priceInINR" style="display:none;">'+l[d].priceDetails.price+"</span></div>"):($("#shippingCost").val("Free"),a+='- <span class="green-text">Free</span></div>');var y=t.shippingDetails[d].timeSlots.length,T='<div class="delivery-types">';if("MIDNIGHT_DELIVERY"==d)T+='<p class="earliest-delivery-selected"><i class="material-icons">info</i>This Gift will be delivered on Midnight of <span class="middate"></span></p>';else if("FREE_SHIPPING"==d||"ETC_CAKE_DELIVERY"==d||"ETC_DELIVERY"==d){var S=t.shippingDetails[d].timeSlots[0].endTime.slice(0,2);S>12?S=S-12+" pm":S+=" am",T=T+'<p class="earliest-delivery-selected freeInfo"><i class="material-icons">info</i>Your gift will be delivered anytime before '+S+" on the selected date.</p>"}else T+='<p class="earliest-delivery-selected standard"><i class="material-icons">info</i>Earliest Delivery Time Slot Selected.</p>';T+='<p class="delivery-hrs">Delivery Time Slot (Hrs.)</p><ul class="timeslots">';for(b=0;b<y;b++){var _=t.shippingDetails[d].timeSlots[b].startTime,m=t.shippingDetails[d].timeSlots[b].endTime,N=l[d].timeSlots[b].timeSlotId,x=l[d].timeSlots[b].shippingPrice;"0"==x&&(x="Free"),u==N?(T="Y"==l[d].timeSlots[b].isDynamic?T+'<li data-timeslotprice="'+x+'" data-timeSlotId="'+N+'" class="active">'+l[d].timeSlots[b].dynamicSlotText:T+'<li data-timeslotprice="'+x+'" data-timeSlotId="'+N+'" class="active">'+_.substring(0,_.lastIndexOf(":"))+" - "+m.substring(0,m.lastIndexOf(":")),activePersonalisedOnDateSelect(),$(".subvariantblock").removeClass("disableInput")):T="Y"==l[d].timeSlots[b].isDynamic?T+'<li data-timeslotprice="'+x+'" data-timeSlotId="'+N+'" class="active">'+l[d].timeSlots[b].dynamicSlotText:T+'<li data-timeslotprice="'+x+'" data-timeSlotId="'+N+'">'+_.substring(0,_.lastIndexOf(":"))+" - "+m.substring(0,m.lastIndexOf(":")),parseFloat(x)>0&&void 0!=w&&parseFloat(w)!=parseFloat(x)&&(T=T+'(<span class="webprice red"><meta itemprop="priceCurrency" content="INR"><meta itemprop="price" content='+x+'><span class="WebRupee">&nbsp;</span>'+x+'</span><span class="priceInINR" style="display:none;">'+x+'</span><span class="priceInINR" style="display:none;">'+x+"</span>)")}a+=T+="</li></ul></div></li>"}$("#"+e+" ul").html(a),$("#shippingCost").val(l[c].priceDetails.price);var A=$("#"+e+" li").find("[data-shippingmethod='"+c+"']");A.closest("li").addClass("active"),A.parent().find(".delivery-types").slideDown();var L=$("#"+e).find("[data-shippingmethod='"+c+"']").closest("li");(L.find(".delivery-types li").length>1&&(""==$("#"+e+"SelectedShipping").val()||"selecte_date-tb"==e)||"MIDNIGHT_DELIVERY"==c||"FREE_SHIPPING"==c||"ETC_CAKE_DELIVERY"==c||"ETC_DELIVERY"==c)&&L.find(".earliest-delivery-selected").show(),1==P?$(".default-slot").removeClass("active"):$(".early-slot").removeClass("active"),$("li.active").find(".delivery-types").slideDown(),$(".tabs-area .inner-tab").hide(),$(".tabs-area #"+e).show(),$("#"+e).fadeIn(),$("#"+e+" .earliest-delivery-selected .middate").html(parseInt($("#deliveryDate").val().split("/")[0])+" "+fullMonthNames[parseInt($("#deliveryDate").val().split("/")[1])-1]),$(".selectflavourText").removeClass("disableInput").addClass("gray-active-input"),initCurrencies(),$(".delivery-date-area").find(".new-loader-area").remove(),""==$(".selectflavourVal").val()&&$(".selectflavourText ").addClass("activeinput");$("#deliveryDate").val()&&$("#deliveryDate").val().split("/").join("-")}function clearLocalStoragePersonalizationObj(){localStorage.removeItem($("#addProductId").val());var e=$("#baseProductId").val();if(e){localStorage.getItem(e)&&localStorage.removeItem($("#baseProductId").val())}}function addItemToCart(e){if(validateProductForm()){geoDisplayInfo&&!geoDisplayInfo.showPincodeOrCity?(geoDisplayInfo.defaultGeoDetails.geoId||geoDisplayInfo.defaultGeoDetails.displayText)&&(document.productfrm.pinCode.value=geoDisplayInfo.defaultGeoDetails.geoId,document.productfrm.deliveryLocation.value=geoDisplayInfo.defaultGeoDetails.displayText):(pincode&&(document.productfrm.pinCode.value=pincode),""==document.productfrm.deliveryLocation.value&&(document.productfrm.deliveryLocation.value=void 0!=$("#destlookup")&&null!=$("#destlookup")?$("#destlookup").val():pincode),document.productfrm.matchedPincode.value=pincode),clearLocalStoragePersonalizationObj(),$.ajax({url:"https://"+secureHostNameToUse+"/control/additem",xhrFields:{withCredentials:!0},type:"post",data:$("#productfrm").serialize(),success:function(e){var t=JSON.parse(e);if(t.isSuccess){showAddons(t.itemIndex,t.orderItemSeqId)}else{var a=e.errorMsg,i=e.eventMsg;console.log(i),a&&a.length>0&&$("#addtocarterrors").html(a)}$("#buynow").removeClass("activeinput")}});var t=productPersonalizedMap&&!$.isEmptyObject(productPersonalizedMap),a=$("#productDeliveryDate").val(),i=$("#shippingMethodId").val(),o=$("#timeslot").html();cdp.addCart(t,a,i,o),itemsInCustomerCart=null,viewCartData=null,viewCartForOmni=null}else $(".pdp-flex-container").addClass("form-invalid");return!1}function checkMessageOnCake(e){var t=$("#baseProductId").val();e&&t&&e.forEach(function(e){if("msgOnCake"===e.fieldName){var a=localStorage.getItem(t),i=$(".msgOnCake");if(a&&i.length||""===a){var o=getCurrentPersonalizeConfig(i,".file-options");o&&($(i).closest("."+o.fieldName).data("value",a),saveToLocalStorage(o,".file-options"))}}})}function perpareData(e){var t=[];if(e)for(var a=0;a<e.length;a++){var i=e[a];if(i){var o=i.productPrice,n=calculatePercentageSaved(o);n&&(o.percentSaved=n);var l={productId:i.productId,productName:i.productName,productImage:i.productImages&&cdnHost+i.productImages[0],price:o,productUrl:i.productUrl};t.push(l)}}return t}function showComboProducts(){var e=$("#addProductId").val(),t=!1,a=null!==productComboComponentsMap&&productComboComponentsMap[e];if(a){var i={dataModel:perpareData(a)};$(".product-list").remove(),renderMustacheAndAppend("product-combo-components","select-product-popup",i),t=!0}return t}function calculatePercentageSaved(e){var t=null;if(e&&e.listPrice&&e.price<e.listPrice){t=((e.listPrice-e.price)/e.listPrice*100).toFixed(0)}return t}function handleShowComboProducts(){var e=$("#addProductId").val();productComboComponentsMap&&e&&productComboComponentsMap[e]?$(".variantItem.selectedVariant .pl-edit-icon").show():$(".variantItem.selectedVariant .pl-edit-icon").hide()}function initializeThumbNail(){downArrowClickCounter=0,topArrowClickCounter=0,globalTopHeight=0,thumbNailScroll=0,thumbNailDom=$("#imageGallery").find(".thumb-tile"),smallImageHeight=$(".thumb-tile").outerHeight(),largeImageHeight=$("#selected-pro .slider img").innerHeight(),thumbNailCount=thumbNailDom.length,allSmallImagesHeight=thumbNailCount<6?thumbNailCount*smallImageHeight:thumbNailCount*smallImageHeight+2*$(".thumb-button").outerHeight(),globalDownHeight=allSmallImagesHeight-largeImageHeight}function RestThumbNailDom(){$(".thumb-tile").length<=5?($(".thumb-button").hide(),$("#imageGallery").css("height","400px"),5===$(".thumb-tile").length&&videoSource?$(".thumb-nail").removeClass("hide-buttons"):$("thumb-nail").addClass("hide-buttons")):(initializeThumbNail(),largeImageHeight<allSmallImagesHeight&&($(".thumb-nail").removeClass("hide-buttons"),$(".thumb-button").show(),$(".arrow-up").attr("aria-disabled",!0).addClass("slick-disabled"),$(".arrow-down ").attr("aria-disabled",!1).removeClass("slick-disabled")))}function downArrow(){downArrowClickCounter++,topArrowClickCounter=0,$(".arrow-up").attr("aria-disabled",!1).removeClass("slick-disabled"),globalDownHeight>0&&(thumbNailScroll=1===downArrowClickCounter?thumbNailScroll-smallImageHeight/2:thumbNailScroll-smallImageHeight,(globalDownHeight-=smallImageHeight)<=0&&$(".arrow-down").attr("aria-disabled",!0).addClass("slick-disabled"),globalTopHeight+=smallImageHeight,$("#imageGallery").css("transform","translate3d(0px, "+thumbNailScroll+"px, 0px)"),$("#imageGallery").css("transition","background-color 1s, transform 1s"))}function topArrow(){topArrowClickCounter++,downArrowClickCounter=0,$(".arrow-down ").attr("aria-disabled",!1).removeClass("slick-disabled"),globalTopHeight>0&&(0===(thumbNailScroll=1===topArrowClickCounter?thumbNailScroll+smallImageHeight/2:thumbNailScroll+smallImageHeight)&&$(".arrow-up").attr("aria-disabled",!0).addClass("slick-disabled"),globalTopHeight-=smallImageHeight,globalDownHeight+=smallImageHeight,$("#imageGallery").css("transform","translate3d(0px, "+thumbNailScroll+"px, 0px)"),$("#imageGallery").css("transition","background-color 1s, transform 1s"))}function destroyThumbNailCarousel(){$(".slider-for").hasClass("slick-initialized")&&$(".slider-for").slick("destroy"),$(".slider-nav").hasClass("slick-initialized")&&$(".slider-nav").slick("destroy")}function switchVariantProduct(e,t,a,i,o,n,l){$(l);var r=null;if($(".close-video").length&&$(".close-video").trigger("click"),$("input[name=feature]:checked").removeAttr("checked"),features){var s=features.split(",");switch(s.length>2?0:s.length){case 2:buildCakeSubVariantDOM(e,n);var d=null,c=$('input[name="feature"]:checked').val();d=c?n+","+c:"",r=getProductIdByVariantKey(d),!0;break;case 0:if(buildCakeSubVariantDOM(e,n),""!=$(".selectedProdFeature").val()){var p=$(".selectedProdFeature").val();r=getProductIdByVariantKey(p)}else{var u=getProductKeyByProductId(e).split(","),m=$("input:radio[name='feature']").length?$("input[name=feature]:checked").val():"";""!=m&&(u[1]=m,r=getProductIdByVariantKey(u))}!0}r&&(e=r)}imagePersonalizationMap&&e&&(personalizationData=imagePersonalizationMap[e],personalizationData&&(hasPersonalizableUI=personalizationData.hasPersonalizableUI,urlIdentifier=personalizationData.urlIdentifier)),checkProductExpiry(e),updateHiddenFormInputs($("#baseProductId").val(),e),updateProductDetails(e,!1);constructProductDetailImages(e,getProductDetails(e),!1),triggerOdometer("odometer",$("#price").val(),10),geoDisplayInfo&&!geoDisplayInfo.showPincodeOrCity?finalizePincode(geoDisplayInfo.defaultGeoDetails.geoId):$("#destlookup").val()&&checkPincodeAvailablityToProduct()}function updateHiddenFormInputs(e,t){$("#productId , #baseProductId").val(e),$(" #addProductId").val(t)}function updateBreadcrumbPname(e,t){e&&$(".navmenu .product-name").text(e);var a=t||e;$(".item-heading.product-name").attr("title",a).text(a)}function constructProductDetailImages(e,t,a){var i=$(".gallery-info").html(),o=a?t.productContent.productImages[0]:t.imageUrl;if("india"!==currentCatalogId&&o){var n=o.split("/pr");o=n[0]+"/pr/"+currentCatalogId+n[1]}var l=o.replace("/l/","/s/"),r=a?t.productContent.productImages.length:parseInt(getProductSmallImageCount(e));o=o.replace("/s/","/l/");a?t.productContent.productImages.length:getProductLargeImageCount(e);var s=o.replace(/\/l\//,"/x/"),d=a?t.productContent.productExtraLargeImages.length:getProductExtraLargeImageCount(e),c=d>0,p='<div id="imageGallery" class="thumb-area slider slider-nav">';closeVideoPlay();p+=(videoSource=a?t.productContent.productVideoLink:getVideoUrl(e))?'<div id ="videowrapper" class="thumb-tile"><div class="video-icon closevideo"><div class="animated-shadow"></div><i class="material-icons close-video">close</i><i class="material-icons cam">play_arrow</i></div><div class="video-bg"></div><img itemprop="image" src="'+cdnHost+l.split("_")[0]+'_1.jpg"/></div>':"";for(var u=1;u<=r;u++){p+='<div class="thumb-tile"><a href="#" class="elevatezoom-gallery'+u+'" data-index="'+u+'"'+(d>=u?'data-image="'+cdnHost+o.split("_")[0]+"_"+u+'.jpg"data-zoom-image='+(cdnHost+s.split("_")[0])+"_"+u+".jpg":"")+'><img id="thumbnail'+u+'" class="thumbnailImage" src="'+cdnHost+l.split("_")[0]+"_"+u+'.jpg" class="cssImgXLarge" alt="'+t.productName+'" /></a></div>'}var m='<div class="slider slider-for ss">';m+='<img id="initialZoom_01" '+(c?"image-zoom":"")+'" src="'+cdnHost+o+'" '+(c?"data-zoom-image="+(cdnHost+s):"")+' class="cssImgXLarge" alt="'+t.productName+'" /><img id="initial-l-image" src="'+cdnHost+o+'" alt="'+t.productName+'"/>',m+='</div><div class="gallery-info"> '+i+"</div>",$("#product").html(p).css("transform","translate3d(0px, 0px, 0px)"),$("#selected-pro").html(m),$("#product, #selected-pro").attr("data-product-id",e),RestThumbNailDom(),cacheImages(lImages=[],xImages=[]),$("#imageGallery a").removeClass("zoomImgActive").eq(0).addClass("zoomImgActive"),$("#imageGallery a").on("click",function(){videoSource&&closeVideoPlay()}),setTimeout(function(){$(".zoomContainer").remove(),initializeZoom(initializeZoomOptions)},600)}function buildCakeSubVariantDOM(e){var t="",a="",i=getProductKeyByProductId(e);if(i&&features)for(var o=i.split(","),n=o[0],l=features.split(","),r=$(".selectflavourVal")&&$(".selectflavourVal").val(),s=1;s<l.length;s++){var d=getSubVariantList(n)&&getSubVariantList(n).split(",");if(d)for(var c=0;c<d.length;c++){var p=o[s],u=n+","+d[c];if(1===s){var m=!1,m=(p=$("input:radio[name='feature']").length&&$("input[name=feature]:checked").val()?$("input[name=feature]:checked").val():p)===d[c];if(d.length>2)t+=createRadioBtnDom("stems",d[c],u,"bg-green",m),$(".subvariantblock").addClass("product-variants");else{var g=m?"cake-withegg":"cake-eggless",h="WITH EGG"===d[c]?"bg-red":"bg-green";t+=createRadioBtnDom(g,d[c],u,h,m)}}else{var v=(p=r||p)===d[c];a+='<li><a id="'+d[c]+'" data-variantkey="'+u+'" href="javascript:void(0);"'+(v?"class='selected'":"")+">"+d[c].toLowerCase()+"  </a></li>"}}n+=","+p,1===s?$(".subvariantlist").html(t):$("#subvariant3").html(a),(t||a)&&$(".cake-variants").show()}}function createRadioBtnDom(e,t,a,i,o){var n=o?"checked":"unchecked";return'<label><div id="'+e+'" class="radio-box"><div class="radio-outer '+(o?" radio-check ":"")+i+'"><i class="material-icons '+n+"-radio "+(o?"checked":"")+'">radio_button_'+n+'</i></div><input type="radio" name="feature" value="'+t+'" class="subvariant" data-variantkey="'+a+'"'+(o?"checked":"")+'><span class="variant-name">'+t.toLowerCase()+'</span><div class="variants-icon"></div></div></label>'}function getAssociateVariantProductId(){var e=null,t=null;if(variantList.length){var a=$(".variantItem.selectedVariant"),i=capitalize(a.attr("data-ga-title")),o=a.attr("data-product-id");variantList.forEach(function(a){a.variantType===i&&a.productId!==o&&(e=a.productId,t=a.price)})}else $(".product-switch-btn").each(function(a,i){$(i).attr("data-associate-id")!==$("#addProductId").val()&&(e=$(i).attr("data-associate-id"),t=$(i).attr("data-associate-price"))});return{productId:e,productPrice:t}}function switchToAvailableAssociateProduct(e,t,a){var i=null,o=$(".product-switch-btn");t?o.each(function(t,a){if($(a).attr("data-associate-id")===e){$(a).removeClass("generic-green-btn").addClass("product-not-available");var i=$(a).closest(".product-switch-block").siblings().find(".product-switch-btn");i.hasClass("product-not-available")||(i.addClass("generic-green-btn"),i.trigger("click"))}}):($(".product-switch-btn[data-associate-id ='"+e+"']").addClass("product-not-available"),a&&o.removeClass("generic-green-btn").addClass("product-not-available")),a||(i="hand-delivery"===$(".product-switch-block").find(".product-not-available").attr("id")?"Hand Delivery":"Courier Delivery",renderToastMessage("associate-not-available",".product-switch-block",i+=" is not available at entered location.",7e3))}function updateProductCdpAttr(e,t,a){var i=$(".product-wapper"),o=i.attr("data-pdp").split("~");o[0]=e,""!==t&&(o[1]=Math.round(t)),""!==a&&(o[2]=a),i.attr("data-pdp",o.join("~")),isVariantChange&&(cdp.variantChange(!0),isVariantChange=!1)}function updateLocalStorageForMultiImage(e,t){if(localStorage.getItem(e)&&t){var a=localStorage.getItem(e);localStorage.setItem(t,a)}}function psvPopulateData(e,t){var a=t?e:[e];$.ajax({url:"/control/getSystemPropertyValue",type:"GET",global:!1,dataType:"json",data:{name:"psvPopulateAWSUrl",resource:"fnp"},success:function(e){$.ajax({url:e.value,type:"POST",global:!1,dataType:"json",data:JSON.stringify({Records:{data:a}})})},error:function(e){console.log("error.....",e)}})}function pickupPincode(e,t,a){return new Promise(function(a,i){var o=null;userPincode=!!e;var n=e?null:googleAutocompleteObject.currentObject.getPlace();if(!userPincode&&n.types&&n.types.length>0){if("postal_code"==n.types[0]&&(o=n.address_components[0].long_name,o=sanitizePincode(pincode)),null==o)for(var l=0;l<n.address_components.length;l++)if("postal_code"==n.address_components[l].types[0]){o=sanitizePincode(n.address_components[l].long_name);break}}else userPincode&&(o=sanitizePincode(e));if(null==o){var r="",s="";if(n.hasOwnProperty("geometry"))r=n.geometry.location.lat(),s=n.geometry.location.lng();else{var d=JSON.stringify(n);$.ajax({type:"POST",global:!1,url:"https://h68k5ptxie.execute-api.ap-south-1.amazonaws.com/p/data",data:d})}var c=!0;void 0!=n.address_components&&"Y"==$("#autoFillDateAndTimeSlots").val()&&n.address_components.length>0&&(c=!1,$(".delivery-date-area").append("<div class='new-loader-area' style='display:block;'><div class='new-loader'></div></div>")),$.ajax({type:"GET",dataType:"json",global:c,url:"/control/getPinCodeByPostalAddress?latitude="+r+"&longitude="+s,success:function(e){if(null!=e&&1==e.isPinCodeFound){var i=e.matchedPincode,o=null!=e.pincode?e.pincode:i;a({areaFromDB:t,resolvedPincode:o,place:n})}else $("#resolvedpincode").html("Could not find the pincode.")},error:function(){$("#resolvedpincode").html("Could not find the pincode.")}})}else a({areaFromDB:t,resolvedPincode:o,place:n})})}function onLocationSelect(e,t,a){var i,o;userPincode?(o=e,i=e):(o=a.formatted_address,i=a),saveUserInputData(document.prevDLVal,t,o),updateResolvedPincode(t,i),setAllAddressCookies(t,o),"product"!==fnpPageType&&cdp.getLocation(t,null,null),getDeliveryAreasAsKeyForPincode(t,getDeliveryAreasAsKeyCallback)}function setAllAddressCookies(e,t){setCookie("lastSelectedPlace",t,30,"/"),setCookie("lastSelectedAddress",t,30,"/"),setCookie("lastSelectedPincode",e,30,"/"),setPincodeInLL()}function saveUserInputData(e,t,a){var i={typed:e,selected:a,resolved:t,site:"desktop"};$.ajax({type:"POST",global:!1,url:"https://h68k5ptxie.execute-api.ap-south-1.amazonaws.com/p/data",headers:{"Content-Type":"application/json"},data:JSON.stringify(i)})}function sanitizePincode(e){if(void 0===e||null==e||""==window.pincode)return null;var t=null;$.isNumeric(e)?t=e:(t=parseInt(e),t=isNaN(t)?null:t);var a=null;return CORRECT_PINCODES||loadInvalidPincodeMapping(correctedPincodesCallBack),(a=CORRECT_PINCODES[t])?$("#mapping-msg").text("This area is served from "+a+" instead of "+t).show():$("#mapping-msg").text("").hide(),isPincodeMapped=!0,a||t}function resolvePincode(){selectedLocalityGoogle=null,selectedPincodeGoogle=null;var e=this.getPlace();if(pincode=null,e.formatted_address&&e.formatted_address.length&&$(".selectedLocality").length&&$(".selectedLocality").fadeOut(1e3,function(){$(".selectedLocality").html(e.formatted_address),$(".selectedLocality").fadeIn(2e3)}),e.types&&e.types.length>0&&("postal_code"==e.types[0]&&(pincode=e.address_components[0].long_name,pincode=sanitizePincode(pincode)),null==pincode)){for(var t="",a=0;a<e.address_components.length;a++)if("postal_code"==e.address_components[a].types[0]&&(t=sanitizePincode(t=e.address_components[a].long_name),selectedPincodeGoogle=t),null==selectedLocalityGoogle&&("locality"==e.address_components[a].types[0]||"administrative_area_level_2"==e.address_components[a].types[0])){var i=e.address_components[a].long_name;i=i.replace(/[^a-zA-z0-9\s]/gi,"").replace(/\s/gi,"-").toLowerCase(),document.availableCities.indexOf(i)>=0&&(selectedLocalityGoogle=i)}e.geometry&&(lat=e.geometry.location.lat(),lng=e.geometry.location.lng()),setPinCodeByPostalAddress(t,lat,lng)}null!=pincode?(validatePincode(e),resetProductShippingInfo(),populateDeliveryDetails(pincode),getProductPriceByDeliveryInfo($("#addProductId").val(),"",pincode),isPlaceChanged=!0):(disableDateTimeSelector(),isPlaceChanged=!1,resetProductShippingInfo())}function updateResolvedPincode(e,t){if("product"===fnpPageType){updateClearButton(document.getElementById("destlookup"))}$("#resolvedpincode").prop("data-pincode",e),null==e?($("#resolvedpincode").empty().hide(),$("#selectpincode").prop("disabled",!0),$("#selectedlocality").removeClass("haspin").text("")):($(".selected-pin").text("Pincode: "+e).css("display","block"),$("#resolvedpincode").html("Delivery pin code is <span>"+e+"</span>").fadeIn(),selectedPlace=t,$("#selectpincode").prop("disabled",!1),$("#deliveryLocation").val(" "),$("#selectedlocality").addClass("haspin").text("PIN: "+e),usePincode(e))}function pincodeUpdation(e,t,a){userPincode?(e,selectedPlace=e):(a.formatted_address,selectedPlace=a),$("#resolvedpincode").prop("data-pincode",t),pincode=t||$("#resolvedpincode").prop("data-pincode")}function usePincode(e){var t=e||$("#resolvedpincode").prop("data-pincode");pincode=t,setDeliveryArea(selectedPlace),finalizePincode(t),updateClearButton(document.getElementById("destlookup")),triggerAutoFillDateAndTimeSlots()}function triggerAutoFillDateAndTimeSlots(){"Y"==$("#autoFillDateAndTimeSlots").val()&&($("#previousPincode").val(pincode),$(".delivery-date-area .date-tabs ul.tab-nav li:first").trigger("click"))}function setDeliveryArea(e){if(void 0!==e&&null!=e){var t=getlocality(e);$("#deliveryLocation").val(t),""!=t&&null!=t&&setCookie("lastSelectedDeliveryLocation",t,30,"/")}}function finalizePincode(e){var t=$("#addProductId").val();"N"==$("#autoFillDateAndTimeSlots").val()&&(resetProductShippingInfo(),$.when(populateDeliveryDetails(e),getProductPriceByDeliveryInfo($("#addProductId").val(),"",e),loadBlockedDates(t,e)).always(onDeliveryDatesLoaded)),$("#destlookup").removeClass("activeinput")}function intlProductDelivery(e){if(""==$("#pinCode").val()&&"INTERNATIONAL"==e)return!1;intlBuildShippingAndTimeSlotDetails($("#addProductId").val(),pincode=$("#pinCode").val())}function autoSelectDeliveryDate(e){try{var t=$("#addProductId").val(),a=$("#countryGeoId").val();$("#pincodemsg").removeClass("infomsgbox"),$("#pincodemsg").text(""),$("#pincodemsg").hide(),$("#productDeliveryDate").val(e);var i=$("#productType").val()||"";if(i&&"COURIER"==i||"PERSONALIZED"==i)try{buildShippingMethodDetails(t,e,i,a),$("#edit-shipping-options").length&&$("#edit-shipping-options").show()}catch(e){console.error("Something went wrong while building shipping methods and the error is",e)}else console.error("No product type defined! :(")}catch(e){console.error("Something went wrong in extaFastDeliveryFor execution and the error is : ",e)}}function setAddressCookie(e,t,a){var i=new Date;i.setTime(i.getTime()+60*a*1e3);var o="expires="+i.toUTCString();document.cookie=e+"="+t+"; "+o}function getCookie(e){var t=RegExp(e+"=.[^;]*");if(matched=document.cookie.match(t),matched){return matched[0].split("=")[1]}return!1}function getlocality(e){var t="",a=e.address_components,i=e.formatted_address;return null!=a&&void 0!=a&&$.map(a,function(e,a){var i=e.types;if(i&&(i.includes("sublocality")||i.includes("neighborhood")||!i.includes("political")&&!i.includes("postal_code"))){var o=e.long_name||e.short_name;t+=t?", "+o:o}}),(!t||""===t.trim())&&i&&i.length>0&&(t=i.split(",")[0]),e.types&&e.types.includes("establishment")&&(t=e.name+", "+t),t}function checkPincodeAvailablityToProduct(){if("INTERNATIONAL"!==$("#productType").val()){var e=geoDisplayInfo&&!geoDisplayInfo.showPincodeOrCity,t=e?geoDisplayInfo.defaultGeoDetails.geoId:getCookie("lastSelectedPincode"),a=getCookie("lastSelectedPlace"),i=getCookie("lastSelectedAddress");i&&($(".auto-suggest-wrapper").hide(),$("#destlookup").val(i)),userPincode=!!i,(t&&a||e)&&updateResolvedPincode(t,a)}}function showSelectedDateInfoPopup(){setTimeout(function(){isMultiOrderProduct&&($("#modaldatetimepicker").addClass("open-popup"),$("#shippingmethoddiv").addClass("show-info"))},200)}function setStartEndDate(e){var t=selectedSeranadesDates[selectedSeranadesDates.length-1],a=t.split("/");t=a[1]+"/"+a[0]+"/"+a[2];var i=new Date(t),o='<span id="startDate">'+e.getDate()+'</span> <span id="startMonth">'+monthNames[e.getMonth()]+"</span> - "+i.getDate()+" "+monthNames[i.getMonth()];$("#date_range_block").html(o)}function intlBuildShippingAndTimeSlotDetails(e,t){$("#dateAlert").hide(),$.ajax({type:"GET",dataType:"json",async:!0,url:"/control/getShipmentTypesForINTL?productId="+e+"&city="+t,success:function(e){if(shipmentDetails=e,$("#shippingmethoddiv").html(""),null!=e&&1==e.isShippingDetailsExists){var t=e.shippingDetails,a=e.keys,i="";i+='<div class="scroll-pane"><ul>';var o=!1,n=(Object.keys(t).length,[]);for(var l in a){t[l=a[l]].timeSlots,n=timeSlotInfo(t[l].timeSlots);for(var r=0;r<n.length;r++){var s=n[r].timeSlotId;n[r].shipmentMethodId}i=i+'<li><a data-shippingmethod= "'+l+'" data-timeSlotId = "'+s+'" data-shippingCost = "'+t[l].priceDetails+'" class="intlDeliveryDates" data-ga-title="'+t[l].shippingMethodName+'"><input type="radio" class="input-group-field applycoupon shippingtime" name="shippingtime" id="'+l+'"><label for="'+l+'"><span class="rdo-span"></span><span class="timesloter">',i+=t[l].shippingMethodName,i+="</span>",i+='&nbsp &nbsp &nbsp<span class="earliestdate">Earliest Delivery ',i+=t[l].earliestDelivery,i+="</span></label>",void 0!=t[l].priceDetails&&void 0!=t[l].priceDetails&&(parseFloat(t[l].priceDetails)>0?i=i+'<div class="input-group-button button del-method-btn"><span class="priceInINR" style="display:none;">'+t[l].priceDetails+'</span><span class="delcost webprice"><span class="WebRupee ">&#8377;</span>'+t[l].priceDetails:(i+='<div class="input-group-button button del-method-btn"><span class="delcost">Free',o=!0)),i+="</span></div></a></li>"}i+="</ul></div>","india"!=$("#FNP_CURRENT_CATALOG_ID").val()||"18/08/2016"!=$("#productDeliveryDate").val()||o||(i+="<div style='text-align: center;font-size: 1.2em;' id='freeshipalert'>To avail <span style='color:#62af69;'>FREE SHIPPING</span>, <a href='javascript:void(0)' onclick='goToCalendar()' tabindex='-1' style='text-decoration: underline;'>choose a later date</a></div>")}$("#shippingmethoddiv").html(i),initCurrencies(),$("#modaltimeslot .timeslothead").find(".dialogueheadtitle").text("Select Shipping Method"),$("#deliverydatepicker").hide(),$("#datepickerslot").hide(),$("#modaltimeslot").show(),$("#shippingmethoddiv").show(),$("#modaldatetimepicker").foundation("reveal","open")&&($(".reveal-modal-bg").removeClass("producttoolbardialog"),$(".reveal-modal-bg").css("top","0"))}})}function timeSlotInfo(e){for(var t=[],a=new Object,i=0;i<e.length;i++)a.timeSlotId=e[i].timeSlotId,a.productShipmentMethodId=e[i].productShipmentMethodId,a.shipmentMethodId=e[i].shipmentMethodId,t.push(a);return t}function buildShippingMethodDetails(e,t,a,i){var o="/control/getShippingDetails?productId="+e+"&deliveryDate="+t+"&countryGeoId="+i;"COURIER"!=a&&"PERSONALIZED"!=a||(o=o+"&pinCode="+pincode),$.ajax({type:"GET",dataType:"json",async:!0,url:o,success:function(e){if(null!=e&&1==e.isShippingDetailsExists){var i=e.shippingDetails,o=null,n=null,l=null,r=null;if("COURIER"==a||"PERSONALIZED"==a){var s=null;for(var d in i){if(void 0!=i[d].priceDetails&&void 0!=i[d].priceDetails.price){l=i[d].priceDetails.price,o=i[d].shippingMethodName,n=d,parseFloat(l)<=0&&(l="Free");var c=i[d].timeSlots[0];r=c.timeSlotId,s=c.startTime.substring(0,c.startTime.lastIndexOf(":"))+" - "+c.endTime.substring(0,c.endTime.lastIndexOf(":"))+" Hrs",$("#timeslot").text(s)}break}var p=$.datepicker.parseDate("dd/mm/yy",t),u=$.datepicker.formatDate("mm/dd/yy",p),m=new Date(u);$("#deliverydateofmonth").html(m.getDate()),$("#deliverymonth").html(monthNames[m.getMonth()]),$("#deliveryweekday").html(days[m.getDay()]);var g='<span id="shippingcost">';g=null!=l&&parseFloat(l)>0?g+'<span class="WebRupee">&#8377;</span>'+l+"</span>":g+l+"</span>",$("#shippingmethod").html(o+" Delivery : "+g),$("#deliveryDate").val(t),$("#shippingMethodId").val(n),$("#shippingCost").val(l),$("#timeSlotId").val(r),updateDesiredDeliveryDateTimestamp(t),$("#modaldatetimepicker").foundation("reveal","close"),$("#dateAlert").hide(),$(".date-select-wrapper").hide(),$("#datetimeshipping").show()}}}})}function buildShippingAndTimeSlotDetails(e,t,a,i){$.ajax({type:"GET",dataType:"json",async:!0,url:"/control/getShippingDetails?productId="+e+"&pinCode="+t+"&deliveryDate="+a+"&countryGeoId="+i,success:function(e){if(shipmentDetails=e,$("#shippingmethoddiv").html(""),null!=e&&1==e.isShippingDetailsExists){var t=e.shippingDetails,a="";a+='<div class="scroll-pane"><ul>';var i=Object.keys(t).length,o=!1;for(var n in t)a=(a=a+'<li><a data-shippingmethod= "'+n+'" class="timeslotdetails" data-ga-title="'+t[n].shippingMethodName+'"><input type="radio" class="input-group-field applycoupon shippingtime" name="shippingtime" id="'+n+'"><label for="'+n+'"><span class="rdo-span"></span><span class="timesloter">')+t[n].shippingMethodName+"</label>",void 0!=t[n].priceDetails&&void 0!=t[n].priceDetails.price&&(a+="</span>",parseFloat(t[n].priceDetails.price)>0?a=a+'<div class="input-group-button button del-method-btn"><span class="priceInINR" style="display:none;">'+t[n].priceDetails.price+'</span><span class="delcost webprice"><span class="WebRupee ">&#8377;</span>'+t[n].priceDetails.price:(a+='<div class="input-group-button button del-method-btn"><span class="delcost">Free',o=!0)),a+="</span></div></a></li>";a+='</ul></div><a  href="javascript:void(0);" class="backtocalendar" onclick="goToCalendar()"><i class="material-icons back-arrow">arrow_back</i></a>',"india"!=$("#FNP_CURRENT_CATALOG_ID").val()||"18/08/2016"!=$("#productDeliveryDate").val()||o||(a+="<div style='text-align: center;font-size: 1.2em;' id='freeshipalert'>To avail <span style='color:#62af69;'>FREE SHIPPING</span>, <a href='javascript:void(0)' onclick='goToCalendar()' tabindex='-1' style='text-decoration: underline;'>choose a later date</a></div>")}$("#shippingmethoddiv").html(a),initCurrencies(),i&&1===i?setTimeout(function(){$("#shippingmethoddiv").css("display","none"),$("#modaltimeslot .timeslothead").find(".dialogueheadtitle").css("display","none"),selectedshippingmethodprice=$(".timeslotdetails").find(".input-group-button .delcost").html(),$("#modaldatetimepicker").slick("slickGoTo",2),$(".backtocalendar").attr("onClick","goToCalendar()"),timeSlotDetails($(".timeslotdetails").attr("data-shippingmethod"))},50):($("#shippingmethoddiv").show(),$("#modaltimeslot .timeslothead").find(".dialogueheadtitle").show(),$("#modaldatetimepicker .slick-next").click(),$("#modaltimeslot .timeslothead").find(".dialogueheadtitle").text("Select Shipping Method"))}})}function calculateNextCycle(e,t){var a=Date.now(),i=(new Date).setHours(0,0,0,0),o=a-i,n=Math.ceil(o/e),l=new Date(i+n*e),r=l.toLocaleTimeString([],{hour12:!1,hour:"2-digit",minute:"2-digit"});l.setHours(l.getHours()+t);return r+" - "+l.toLocaleTimeString([],{hour12:!1,hour:"2-digit",minute:"2-digit"})}function timeSlotDetails(e){var t="",a=shipmentDetails.shippingDetails;t+='<div class="row">';var i="";if(!isMultiOrderProduct&&"MIDNIGHT_DELIVERY"==e&&null!=selected_delivery_date){var o=selected_delivery_date.getDate(),n="",l=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][selected_delivery_date.getMonth()],r=o;r>13&&(r%=10),""!=o&&(n=1==r?"st":2==r?"nd":3==r?"rd":"th"),i="<p class ='mid-night-infom-text'>&#9432; This gift will be delivered on the night of "+l+" "+o+"<sup>"+n+"</sup></p>"}for(var s in a)if(s==e){$("timeslotDiv").html("");var d=a[s].timeSlots,c=a[s].priceDetails.price;isMultiOrderProduct||"ETC_DELIVERY"!==s&&"ETC_CAKE_DELIVERY"!==s&&"FREE_SHIPPING"!==s&&"PZE_DELIVERY"!==s||(i="<p class ='mid-night-infom-text'>&#9432; Your gift will be delivered anytime in between the selected time-slot.</p>"),t=(t+='<div class="tabs-panel time-slot">')+'<div style="display:none;" class="shippingMethodName">'+a[s].shippingMethodName+'</div><div style="display:none;" class="shippingMethodId">'+s+'</div><div class="scroll-pane" data-ga-category="SelectDate & Timeslot_'+a[s].shippingMethodName+'"><ul><li>'+i+'<span class="timeslottitle">'+a[s].shippingMethodName+" - "+selectedshippingmethodprice+'</span><ul class="slot">';for(var p=0;p<d.length;p++){var u=d[p];if("Y"==u.isDynamic){var m=calculateNextCycle(18e5,u.leadTime);t=(t=t+'<li class="timeslottable"><a href="javascript:void(0);" data-ga-title="'+m+' "><input type="radio" class="input-group-field " name="selectTimeSlot" id='+e+"-"+u.timeSlotId+">")+"<label for="+e+"-"+u.timeSlotId+'"><span class="rdo-span"></span><span class="timeSlotId" style="display:none;">'+u.timeSlotId+'</span><span class="isDynamic" style="display:none;">'+u.isDynamic+'</span><span class="timerange">'+m+'</span>&nbsp;hrs<span class="hrs"></span>'}else{t=t+'<li class="timeslottable"><a href="javascript:void(0);" data-ga-title="'+u.startTime.substring(0,u.startTime.lastIndexOf(":"))+" - "+u.endTime.substring(0,u.endTime.lastIndexOf(":"))+' hrs"><input type="radio" class="input-group-field " name="selectTimeSlot" id='+e+"-"+u.timeSlotId+">";var g=u.startTime,h=u.endTime;t=t+"<label for="+e+"-"+u.timeSlotId+'"><span class="rdo-span"></span><span class="timeSlotId" style="display:none;">'+u.timeSlotId+'</span><span class="isDynamic" style="display:none;">'+u.isDynamic+'</span><span class="timerange">'+g.substring(0,g.lastIndexOf(":"))+" - "+h.substring(0,h.lastIndexOf(":"))+'</span>&nbsp;<span class="hrs"> hrs</span>'}if(parseFloat(u.shippingPrice)>0&&void 0!=c&&parseFloat(c)!=parseFloat(u.shippingPrice))t=t+'<br/><span class="timeslotprice priceInINR" style="display:none;">'+u.shippingPrice+'</span><span class="priceblock webprice"><span class="WebRupee">&#8377;</span>'+u.shippingPrice+"</span>";else{t=t+'<span class="priceblock" style="display:none;">'+(parseFloat(c)>0?'<span class="WebRupee ">&#8377;</span><span class="timeslotprice">'+c+"</span>":'<span class="timeslotprice">Free</span>')+"</span>"}t+="</a></label></li>"}t+="</ul></li></ul></div></div></div>"}$("#timeslotDiv").html(t)}function timeslothoverchange(){$("#modaltimeslot").on("mouseover",".date-dialscroll a",function(){$(this).find("span").css("color","#fff"),$(this).css("background-color","#0078a0")}),$("#modaltimeslot").on("mouseout",".date-dialscroll a",function(){$(this).find("span").css("color","##333"),$(this).css("background-color","#fff")})}function generateShippingContent(e){var t=selectedSeranadesDates.length,a=e*t,i="";i+='<p>This shipping mode you\'ve selected is paid shipping and you will be charged <span style="display:none;" class="priceInINR">'+e+'</span><span class="webprice"><span class="WebRupee">&#8377;</span>'+e+"</span> as delivery charge for each day during your service.</p>",i+='<div class="bold">Total Shipping Price: <span style="display:none;" class="priceInINR">'+e+'</span><span class="webprice"><span class="WebRupee">&#8377;</span>'+e+"</span> X "+t+' = <span><span style="display:none;" class="priceInINR">'+a+'</span><span class="webprice"><span class="WebRupee">&#8377;</span>'+a+"</span></span></div>",$("#shipping_info_content").html(i),$("#shipping_info").addClass("show")}function onValidationFail(e,t){if(e&&t){var a=$(e).closest(".file-options");$(a).find(".retenFileMsg").hide();var i="File size between"+t.minSize+t.minUnit+" - "+t.maxSize+t.maxUnit+".Only "+getFileMediaType(t.allowedMediaType);$(a).find(".img-size").addClass("error-text").text(i).show(),$(a).find(".img-size").attr("title",i),$(a).find(".upload-title").removeClass("uploaded").text("Select "+t.contentType.toLowerCase()),$(a).find(".upload-title").css("textTransform","capitalize"),$(a).find(".file-name, .file-place").hide(),$(a).addClass("invalid").removeClass("valid")}}function personalizeImageUpload(e){var t=e.files[0],a=getCurrentPersonalizeConfig(e,".file-options");$(e).closest("."+a.fieldName).data("value",""),t?($("#personalizedImage, #refImagePath").val(""),"IMAGE"===a.contentType&&$(e).closest(".file-options").find(".file-place").html('<img src="" class="media-file personalizedimg"/>'),isSelectedFileValid(t,a)?uploadFileToS3(t,fileNameToUse(t.name),$(e).closest(".file-options").find(".personalizedimg"),singleUploadProgressBar,null,e):onValidationFail(e,a)):$(".pdp-buttons button").css("pointer-events","auto")}function isSelectedFileValid(e,t){if(Object.keys(t).length){var a="KB"===t.minUnit?parseInt(1e3*t.minSize):1e6*parseInt(t.minSize),i="MB"===t.maxUnit?1e6*parseInt(t.maxSize):parseInt(1e3*t.maxSize),o=e.name,n=o.substring(o.lastIndexOf(".")+1,o.length),l=t.allowedMediaType.includes(n.toLowerCase());if(e){var r=e.size;return r>a&&r<i&&l}}}function uploadFileToS3(e,t,a,i,o,n){$.ajax({url:"/control/getAWSPreSignedUrl-rj?fileName="+t,type:"GET",dataType:"json",global:!1}).done(function(t){var l=t.data.presignedUrl;$.ajax({url:l,type:"PUT",data:e,contentType:e.type,processData:!1,global:!1,xhr:function(){var e=$.ajaxSettings.xhr();return e.upload.onprogress=function(e){i&&i(e,n)},e}}).done(function(){var t=n,i=l.split("?")[0],r=getCurrentPersonalizeConfig(n,".file-options");if(e.type.includes("image")){var s=$(a).closest(".file-place");i=constructPreviewImageUrl(i),a.attr("src",i).show(),s.show()&&s.attr("href",i),t=a;var d=" Photos uploaded";uploadedCount<=1&&(d=" Photo uploaded"),$("#image-wrapper .uploaded-success-msg").html("<i class='material-icons'>check_circle</i> <span class='image-count'>"+uploadedCount+d+"</span>").show(),$(".multi-image-msg").hide()}$(".pdp-buttons button").css("pointer-events","auto"),"function"!=typeof o&&$(n).closest("."+r.fieldName).data("value",i),"function"==typeof o&&o(a,r,i),$(a).closest(".upload-tile").find(".delete-photo").show(),saveToLocalStorage(r,".file-options"),validateUploadEle(t),r&&r.maxInputRequired>0&&!$(".uploaded-success-msg").is("visible")&&validateContinueUpload(r)}).fail(function(){console.error("error in Uploading file to S3")})})}function saveToLocalStorage(e,t){var a=[],i={};i.sessionId=getCookie("fsid"),$(t+"."+e.fieldName).each(function(){void 0!==$(this).data("value")&&$(this).data("value")&&a.push($(this).data("value"))});var o=[];personalizedOptions[e.fieldName]={fieldName:e.fieldName,label:e.label,contentType:e.contentType,value:a};for(var n in personalizedOptions)o.push(personalizedOptions[n]);i.po=o,localStorage.setItem($("#addProductId").val(),JSON.stringify(i))}function singleUploadProgressBar(e,t){if(e.lengthComputable){$(t).attr("disabled",!0);var a=e.loaded/e.total,i=e.total/1048576,o=e.loaded/1048576;i=i.toFixed(1),o=o.toFixed(1),a=parseInt(100*a);var n=$(t).closest(".file-options");if($(n).find(".file-place").hide(),$(n).find(".img-size").hide(),$(n).find(".upload-title").hide(),$(n).find(".retenFileMsg").css("display","none"),$(n).find(".percentages").css("display","inline-block"),$(n).find(".file-name").show(),$(n).find(".file-name").addClass("uploading-files"),$(n).addClass("file-upload-disable"),$(n).find(".upload-progress").animate({width:a+"%"},100),$(n).find(".percentages").html("<span>"+a+"</span>% "+o+"MB/"+i+"MB"),$(n).find(".upload-progress").show(),$(n).find(".file-read").removeClass("activeinput"),100===a){$(t).removeAttr("disabled"),$(n).removeClass("file-upload-disable");var l=getCurrentPersonalizeConfig(t,".file-options");$(n).find(".file-name").text("Change "+l.contentType.toLowerCase()),$(n).find(".file-name").css("textTransform","capitalize"),$(n).find(".upload-title").show().addClass("uploaded").html('<i class="material-icons">check_circle</i> File Uploaded'),$(".pdp-buttons button").css("pointer-events","auto"),$(n).find(".percentages").hide(),$(n).find(".upload-progress").hide(),$(n).find(".per-msg-error").hide(),$(".delivery-area.message-filed input").addClass("b-shadow-new"),$(n).find(".file-read").hasClass("hightlight-error")&&($(n).find(".file-read").removeClass("hightlight-error"),$(n).find(".upload-alert").hide())}$(".pdp-buttons button").css("pointer-events","none")}}function constructPreviewImageUrl(e){return imageKitUrl?imageKitUrl+e.split("?")[0].split("pz/")[1]:e}function updateLocalStorageImgUrls(e,t){var a=JSON.parse(localStorage.getItem("imgs")),i={},o={photoBoxID:e,imgUrl:t},n=!1;a.products.forEach(function(e){if(e[$("#productId").val()])return e[$("#productId").val()].push(o),void(n=!0)}),n||(i[$("#productId").val()]=[o],a.products.push(i)),localStorage.setItem("imgs",JSON.stringify(a))}function getYYYYMMDD(){var e=cachedDate.getDate(),t=cachedDate.getMonth()+1;return""+cachedDate.getFullYear()+f2(t)+f2(e)}function f2(e){return e<=9?"0"+e:e}function getJsonFromString(e){var t={};try{t=JSON.parse(e)}catch(e){return t}return t}function fileNameToUse(e){return"pz/"+getYYYYMMDD()+"/"+randomString(10)+"-"+e}function getCurrentPersonalizeConfig(e,t){var a="";if(e&&t){var i=$("#addProductId").val(),o=getJsonFromString($(e).closest(t).data("propsIdx"));void 0!==o&&null!==o&&(a=productPersonalizedMap[i][parseInt(o)])}return a}function makePersonalizedDataModel(e,t,a){var i=t?[]:null,o=t?[]:null,n=0;isMultiPersonalizedProduct=e.length>2;for(var l=!1,r=0,s=null,d=null,c=0;c<e.length;c++){var p=e[c],u=p.contentType;if(isMultiPersonalizedProduct||(r+=parseInt(p.maxInputRequired),isMultiPersonalizedProduct=r>2),p.isRequired="Y"===p.required,p.idx=c,p.contentTypeLC=u.toLowerCase(),p.mediaType=getFileMediaType(p.allowedMediaType),"TEXT"==u){null!=o&&o.push(p);var m=!1;p.isPersonalizeText=!0,"Y"==p.fullWidth&&"popup"==a&&(m=!0),p.isfullWidth=m}else"IMAGE"==u?(n=parseInt(p.maxInputRequired),null!=i&&i.push(p),p.isPersonalizeImage=!0,1==e.length&&parseInt(p.maxInputRequired)>1&&(s=p.label,d="File size between"+p.minSize+p.minUnit+" - "+p.maxSize+p.maxUnit+". Only "+getFileMediaType(p.allowedMediaType),l=!0,isMultiPersonalizedProduct=!0)):(null!=o&&o.push(p),p.isPersonalizeUpload=!0)}return{uploadModel:i,otherFieldModel:o,imageCount:n,isMultiPersonalizedProduct:isMultiPersonalizedProduct,multiImageProduct:l,defaultCustomLabel:s,fileUploadTitle:d}}function renderCustomTemplate(){return function(e,t){var a="";isNaN(this.startCounter)&&(this.startCounter=uploadCounter);for(var i=0;i<parseInt(this.maxInputRequired);i++){if(this.isSingleImgPersonalization=hasPersonalizableUI,this.activepreviewImage="",this.retainText="",this.retainTextLength="",this.isImageType=!1,"IMAGE"!=this.contentType&&lastColumnCounter++,"IMAGE"==this.contentType&&(this.isImageType=!0),this.isfullWidth&&(lastColumnCounter=0),this.lastColumnInRow=!1,0!=lastColumnCounter&&lastColumnCounter%3==0&&(this.lastColumnInRow=!0),null!=personalizedOptions&&null!=personalizedOptions[this.fieldName]){var o=personalizedOptions[this.fieldName].value[i],n=personalizedOptions[this.fieldName].contentType;this.fieldValue=null,null!=o&&o.length>0&&(this.fieldValue=o,this.activepreviewImage="display-inputs","TEXT"==n&&(this.retainText="add-msg-top",this.retainTextLength=parseInt(this.maxSize)-o.length,this.isFieldValid=o.length>=parseInt(this.minSize)),"IMAGE"==n&&0==uploadedCount&&(uploadedCount+=personalizedOptions[this.fieldName].value.length))}this.isMultiPersonalizedProduct=isMultiPersonalizedProduct,this.uploadCounter=this.startCounter+i,this.contentType&&"TEXT"!==this.contentType&&uploadCounter++,a+=Mustache.render(e,this,{uploadTemplate:uploadTemplate})}return a}}function constructPersonalizedTemplatePopup(e){uploadCounter=0,lastColumnCounter=0;var t=$("#addProductId").val(),a=productPersonalizedMap[t],i=[],o=[],n=0;if(0!=a.length){var l=makePersonalizedDataModel(a,!0,"popup");i=l.uploadModel,o=l.otherFieldModel,imagesToUpload=l.imageCount,n=l.imageCount}var r={data:o,doFuncOtherField:renderCustomTemplate},s={data:i,doFunc:renderCustomTemplate},d=!1,c="Customize Product",p=!1,u=n<=1,m=!1;i.length>0&&o.length>0?(d=!0,p=!0,m=!0):(p=i.length>0,m=o.length>0),i.length>0&&0==o.length&&(c=u?"Upload Photo":"Upload Photos");var g={imageItems:s,otherFieldsData:r,isTabReq:d,headerTitle:c,isMultiImageReq:p,isOtherDetailsReq:m,imageCount:uploadedCount,singleImageUpload:u},h=Mustache.render(personalizedPopupTemplate,g,{multiImageUploadTemplate:multiImageUploadTemplate,otherdetailsTemplate:otherdetailsTemplate,uploadTemplate:uploadTemplate});e&&$("#multi-image-popup").hide(),$("#multi-image-popup").html(h),e&&$("#multi-image-popup").show(),$("#prod-personalize-tabs").sliderTabs({indicators:!1,panelArrows:!0,panelArrowsShowOnHover:!0,tabs:!0,height:475,mousewheel:!1,classes:{panel:"demoPanel"}}),d||$(".ui-slider-tabs-list-wrapper").css("display","none"),uploadedCount>0&&$("#image-wrapper .uploaded-success-msg").show()}function constructPersonalizedTemplateInScreen(){var e=$("#addProductId").val(),t=null!=productPersonalizedMap&&productPersonalizedMap[e];if(t&&0!=t.length){var a=makePersonalizedDataModel(t,!1,"screen");checkMessageOnCake(t);$("#uploadTemplate").html();var i=a.isMultiPersonalizedProduct,o=a.multiImageProduct,n=a.defaultCustomLabel,l=a.fileUploadTitle,r=(a.imageCount,{dataModel:{personalizeFields:t,funcInScreen:renderCustomTemplate,isMultiPersonalizedProduct:i},multiImageProduct:o,isMultiPersonalizedProduct:i,defaultCustomLabel:n,fileUploadTitle:l,imageCount:uploadedCount,uploadCounter:0});$(".personal-inputs").remove(),renderMustacheAndAppend("onPageCustomizeOptions","pdp-user-options",r,!1)}else $(".personal-inputs").remove()}function getPersonalizedObjFromStorage(){var e,t=localStorage.getItem($("#addProductId").val()),a=!0;if(null!==t){try{var i=getCookie("fsid");(e=JSON.parse(t))&&e.sessionId!==i&&(a=!1)}catch(e){console.log("Couldn't parse personalized Object",e)}var o=[];if(e&&a){var n={};if(null!=(o=e.po)&&0!=o.length)for(var l=0;l<o.length;l++)n[o[l].fieldName]=o[l];return n}clearLocalStoragePersonalizationObj()}return{}}function getFileMediaType(e){var t=[];if(e){var a=e.split(",");if(null!=a&&void 0!=a)for(var i in a){var o=a[i];if(null!=o){var n=o.split("/");null!=n&&2===n.length&&t.push(n[1].toUpperCase())}}}return t.join(", ")}function closeSingleImagePopup(e,t){var a="";if(t&&e&&(a="https://"+t+".s3-accelerate.amazonaws.com/pz/"+e+".jpeg"),a.length>0){var i=$(".singleImagePersonalization"),o=getCurrentPersonalizeConfig(i,".file-options"),n=$("."+o.fieldName).closest(".file-options"),l=$(n).find(".file-place");$(i).closest("."+o.fieldName).data("value",a),$(n).find(".file-place").html('<img src="" class="media-file personalizedimg"/>'),fileUrl=constructPreviewImageUrl(a),l.find("img").attr("src",fileUrl).show(),l.show()&&l.attr("href",fileUrl),$(n).find(".file-name").text("Change photo"),$(n).find(".file-name").css("textTransform","capitalize").show(),$(n).find(".retenFileMsg").hide(),$(n).find(".upload-title").show().removeClass("customized-title").addClass("uploaded").html('<i class="material-icons">check_circle</i> Photo Uploaded'),$(n).removeClass("activeinput"),$("."+o.fieldName).removeClass("invalid").addClass("valid"),saveToLocalStorage(o,".file-options")}$("#close-multi-img").click()}function checkUploadingImage(){return!$(".img-upload-tiles").find(".upload-tile .add-photo.component-loader-symbol").length||(renderToastMessage("multi_image_upload_alert",$("#multi-select-block"),"Please wait, uploading photos",2e3),!1)}function removeLoader(e,t,a){if(e){var i=$(e).siblings(".add-photo")[0];t&&Object.keys(t).length&&a&&$(e).closest("."+t.fieldName).data("value",a),i&&i.classList.contains("component-loader-symbol")&&i.classList.remove("component-loader-symbol")}}function showInscreenSuccessMsg(){$(".upload-size").css("display","none"),$(".upload-title").addClass("customized-title"),$(".personal-inputs .uploaded-success-msg").show(),$(".customisedOption").removeClass("activeinput")}function showInputField(){$(".customisedOption .uploaded-success-msg").hide(),$(".customisedOption .upload-size").show(),$(".customisedOption .upload-title").removeClass("customized-title"),$(".customisedOption .upload-title").show()}function validateContinueUpload(){var e=validatePersonalization(),t=e.isValid,a=e.allContentTypeValid,i=!1,o=!1,n=!0;for(var l in a){var r=a[l].minReqValid;"IMAGE"==l.toUpperCase()?(i=a[l].allValid,o=r):!r&&n&&(n=!1)}return n?$("#other-option-wrapper .personalize-continue-btn").removeClass("custom-btn-disable"):$("#other-option-wrapper .personalize-continue-btn").addClass("custom-btn-disable"),o?($("#image-wrapper .personalize-continue-btn").removeClass("custom-btn-disable"),$("#image-wrapper .error-msg").hide()):$("#image-wrapper .personalize-continue-btn").addClass("custom-btn-disable"),i&&enableUploadContinueBtn(),t||showInputField(),t}function enableUploadContinueBtn(){$("#image-wrapper .error-msg").hide(),$("#image-wrapper .multi-image-msg").removeClass("red-font"),$("#multi-select-btn,#multi-image-popup .single-fieldset, .multi-image-msg").hide(),$("#image-wrapper .uploaded-success-msg").show()}function disableUploadContinueBtn(){$("#multi-select-btn, #multi-image-popup .single-fieldset").show(),$("#image-wrapper .uploaded-success-msg, .multi-image-msg").hide(),$(".upload-title").hasClass("green-font")&&$(".imageupload").addClass("activeinput").removeClass("gray-active-input")}function enablePersonalizedUploadInput(){var e=updatePersonalizedFormEle();$(".img-size").hide(),$(".imgupload").removeClass("activeinput disableInput hightlight-error").addClass("gray-active-input"),$(".upload-title").html("<i class='material-icons'>check_circle</i> <span class='image-count'>"+e.productImagesData.length+"</span> Photos Uploaded</span>").addClass("green-font");var t=$("#imageuploadbtn"),a=t&&t.attr("data-count");Number(a)>1&&(imagesToUpload=parseInt($("#imageuploadbtn").attr("data-count")),!Boolean($("#imageuploadbtn").attr("data-rendered"))&&constructImageUploadTiles(a)),enablePersonalizedTextInput()}function removeUploadedImage(e,t){uploadedCount--,$("#file-"+e).val("");var a=$(t).parents().find("#multi-select-block").data("propsIdx"),i=$("#addProductId").val();if(null!==a&&void 0!==a){var o=productPersonalizedMap[i][parseInt(a)];$("#upload-image-"+e).closest("."+o.fieldName).removeClass("valid"),$("#upload-image-"+e).closest("."+o.fieldName).data("value",""),saveToLocalStorage(o,".file-options")}disableUploadContinueBtn();var n=" Photos uploaded";uploadedCount<=1&&(n=" Photo uploaded");var l=$("#image-wrapper .uploaded-success-msg").html("<i class='material-icons'>check_circle</i> <span class='image-count'>"+uploadedCount+n+"</span>");0==uploadedCount?(l.hide(),$(".multi-image-msg").removeClass("red-font").show()):l.show(),validateContinueUpload(),$("#upload-image-"+e).siblings(".delete-photo").hide()}function multiImageValidationMessage(e,t,a){$(".multi-image-msg").html('<i class="material-icons">info</i>'+e),t&&$(".multi-image-msg, .multi-image-msg i").addClass(t),a&&$(".multi-image-msg, .multi-image-msg i").removeClass(a)}function addValidation(e){$(".multi-image-msg, .multi-image-msg i").addClass("red-font"),$("#image-wrapper .multi-image-msg").show(),$("#image-wrapper .error-msg").hide()}function closeDeleteUploadPopUp(){$(".delete-dialog").hide(),$("#upload-prod-del").siblings(".custom-overlay").remove(),$("#close-delete-img").remove(),$("#close-multi-img").show()}function updatePersonalizedFormEle(){var e=getProductImagesFromStore(JSON.parse(localStorage.getItem("imgs"))),t=e.productImagesData.map(function(e){return e.imgUrl.split(".com")[1]});return $("#personalizedImage").val(JSON.stringify(t)),e}function getProductImagesFromStore(e){var t=[],a=null,i=$("#productId").val();return e&&e.products.forEach(function(e,o){if(e[i])return t=e[i],void(a=o)}),{productImagesData:t,productIndex:a}}function deleteLocalStorageForPrevSession(){var e=JSON.parse(localStorage.getItem("imgs"));e&&e.sessionId!==getCookie("fsid")&&localStorage.removeItem("imgs")}function intlDeliveryDates(e,t,a){var i=$("#addProductId").val();$.ajax({type:"GET",dataType:"json",async:!0,url:"/control/getDeliverDatesForINTL?productId="+i+"&shipmentType="+e+"&city="+a+"&timeSlotId="+t,success:function(e){var t=e.deliveryDates;null!=t&&(e.isDeliveryDatesExists?(deliveryDates=t,enableDateTimeSelector(),$("#datetimelink").focus()):(deliveryDates=null,showNotDeliverableMessage(),disableDateTimeSelector())),$("#deliverydatepicker").datepicker({dayNamesMin:["S","M","T","W","T","F","S"],minDate:0,dateFormat:"dd/mm/yy",showOtherMonths:!0,selectOtherMonths:!0,onSelect:function(e){$("#productId").val();$("#pincodemsg").removeClass("infomsgbox"),$("#pincodemsg").text(""),$("#pincodemsg").hide(),$("#productDeliveryDate").val(e);var t=$("#productDeliveryDate").val();updateDesiredDeliveryDateTimestamp(t);var i=$("#shippingCost").val();$("#shippingmethod").val(),$($(this).children(".timesloter")).html();if(void 0!=t&&""!=t){var o=$.datepicker.parseDate("dd/mm/yy",t),n=$.datepicker.formatDate("mm/dd/yy",o),l=new Date(n);$("#deliverydateofmonth").html(l.getDate()),$("#deliverymonth").html(monthNames[l.getMonth()]),$("#deliveryweekday").html(days[l.getDay()]),$("#deliveryDate").val(t);var r="";r=null!=i&&parseFloat(i)>0?r+'<span id="shippingcost" class="webprice"><span class="WebRupee">&#8377;</span>'+i+'</span><span class="priceInINR" style="display:none;">'+i+"</span>":'<span id="shippingcost">'+i+"</span>",$("#shipprice").html(r),$("#pinCode").html(a),$("#shippingmethoddiv li").removeClass("selectedshipping"),$(this).parent("li").addClass("selectedshipping"),setTimeout(function(){$("#modaldatetimepicker").foundation("reveal","close"),$("#modaldatetimepicker .slick-prev").click()},50),$(".date-select-wrapper").hide(),initCurrencies(),$("#datetimeshipping").show(),getProductPriceByDeliveryInfo($("#addProductId").val(),getOfbizReadableDate(t),$("#pinCode").val()),activePersonalisedOnDateSelect()}},beforeShowDay:function(e){var t=e.getMonth()+1,a=e.getDate(),i=e.getFullYear();parseInt(a)<10&&(a="0"+a),parseInt(t)<10&&(t="0"+t);var o=a+"-"+t+"-"+i,n=(new Date).getMonth()+1;parseInt(n)<10&&(n="0"+n);var l=!1;if(t!=n&&(l=!0),14==parseInt(a)&&(5==parseInt(t)?$(".valentines").removeClass("valentinesdisp"):$(".valentines").addClass("valentinesdisp")),null!=deliveryDates)return-1!=deliveryDates.indexOf(o)?l?[!0,"availableDate otherMonthAvailDate"]:[!0,"availableDate"]:[!1,"holiday"]}}),$("#modaldatetimepicker .datepickerhead").find(".dialogueheadtitle").text("Select Delivery Date"),null!=deliveryDates&&$("#deliverydatepicker").datepicker("setDate",getIntlDefaultDate(deliveryDates)),$("#datepickerslot").show(),$("#deliverydatepicker").show(),$("#modaltimeslot").hide(),$("#shippingmethoddiv").hide(),$("#modaldatetimepicker .slick-next").click()},error:function(e,t,a){deliverydates=null}})}function productDelivery(e,t){if(selectedSeranadesDates.length=0,t=t||!1,null==pincode)return!1;e=$("#productType").val();if(null!=deliveryDates){blockedDates=blockedDates||[],occasionFooterControl(!0);for(var a=0;a<blockedDates.length;a++){var i=deliveryDates.indexOf(blockedDates[a]);i>-1&&deliveryDates.splice(i,1)}}var o=!1;if(isMultiOrderProduct){var n=multiOrderProductDetails&&parseInt(multiOrderProductDetails.noOfDays)||7;$("#select_date_popup").remove();var l="<p>The date you're selecting would be the start date of your service and your product would be delivered for the next "+n+"days. </p>";l+="<div class='btn-wrap'><a href='javascript:void(0)' id='edit_btn'>Edit date</a> <a href='javascript:void(0)' id='next_btn'>Next</a></div>",$("#modaldatetimepicker").append('<div class="select-date-popup" id="select_date_popup">'+l+'<span class="popup-arrow-down" id="sd_arrow"></span></div>')}if($("#deliverydatepicker").datepicker("destroy"),$("#deliverydatepicker").datepicker({dayNamesMin:["S","M","T","W","T","F","S"],minDate:0,dateFormat:"dd/mm/yy",showOtherMonths:!0,selectOtherMonths:!0,onSelect:function(t,a){selectedSeranadesDates.length=0,$("#productDeliveryDate").val(t),e=$("#productType").val(),isMultiOrderProduct?showSerenadesDateAndPopup(t,a,$(this),n,!0):showTimeSlotScreen(t,e)},onChangeMonthYear:function(e,t,a){s=t,o=!1,$(".price-info-legend-message .legend-message").addClass("priceinfo-icon-display")},beforeShowDay:function(t){isMultiOrderProduct&&dateCell++;var a=t.getMonth()+1,i=(t.getDate(),t.getFullYear(),!1);a!=(new Date).getMonth()+1&&(i=!0);var n=!1,l="",r=$.datepicker.formatDate("dd-mm-yy",t);return deliveryDates&&$.inArray(r,deliveryDates)>-1?(n=!0,l+=" availableDate",i&&(l+=" otherMonthAvailDate"),("EXPRESS"==e||"CAKE"==e)&&eventDates&&$.inArray(r,eventDates)>-1&&(l+=" calpriceinfo",-1==$.inArray(a,eventOcationMonths)&!o&&$(".price-info-legend-message .legend-message").removeClass("priceinfo-icon-display"))):l+=" holiday",[n,l]}}),void 0!==t&&0==t&&$("#modaldatetimepicker").foundation("reveal","open")&&($(".reveal-modal-bg").removeClass("producttoolbardialog"),$(".reveal-modal-bg").css("top","0"),$(".price-increase-info-icon").addClass("priceinfo-icon-display")),$("#modaldatetimepicker .slick-prev").length&&goToCalendar(),void 0!==t&&1==t&&!!deliveryDates&&deliveryDates.length&&autoSelectDeliveryDate(deliveryDates[0].replace(/-/g,"/")),isMultiOrderProduct&&selectedDeliveryDateTimeSlot){var r=$("#startDate").text(),s=monthNames.indexOf($("#startMonth").text()),d=r+"/"+monthFormat[s]+"/"+selectedDeliveryYear,c={id:"deliverydatepicker",selectedDay:r};setTimeout(function(){showSerenadesDateAndPopup(d,c,$("#deliverydatepicker"),n,!1)},200)}$(".ui-datepicker-current-day").hasClass("holiday")?($(".calendarfooter").addClass("adjust-calendarfooter"),$(".same-day-delivery-gifts").show()):($(".calendarfooter").removeClass("adjust-calendarfooter"),$(".same-day-delivery-gifts").hide())}function showTimeSlotScreen(e,t){var a=$("#addProductId").val(),i=$("#countryGeoId").val();$("#pincodemsg").removeClass("infomsgbox"),$("#pincodemsg").text(""),$("#pincodemsg").hide(),selected_delivery_date=$.datepicker.parseDate("dd/mm/yy",e),cdp.delivery(selected_delivery_date,1,"","",""),"COURIER"==t||"PERSONALIZED"==t?(buildShippingMethodDetails(a,e,t,i),activePersonalisedOnDateSelect()):"Y"==$("#autoFillDateAndTimeSlots").val()?($(".delivery-date-area").slideDown(),$(".delivery-date-area").append("<div class='new-loader-area' style='display:block;'><div class='new-loader'></div></div>"),buildShippingTimeSlots(a,pincode,e,i,!1),$("#modaldatetimepicker").foundation("reveal","close")):buildShippingAndTimeSlotDetails(a,pincode,e,i),$(".selectflavourText").removeClass("disableInput").addClass("gray-active-input"),$(".featuredropdown").css("opacity","1"),$(".subvariantblock").removeClass("disableInput")}function showSerenadesDateAndPopup(e,t,a,i,o){var n=$("a.ui-state-default").height()/2-$("#sd_arrow").height();disabledDateCount=0,$("#blocked_dates_toast").remove();var l=$("#select_date_popup").height()+n,r=$("#modaldatetimepicker"),s=$(window).scrollTop(),d=$(window).width(),c=r.width(),p=r.position().top,u=(d-c)/2;triggerNext=!0;var m;parseInt(t.selectedDay);$("a.ui-state-default").removeClass("ui-state-active");var g=!1;a.datepicker("setDate",e),dateCell=0;var h=!0,v=getDatepickerNextDay(e,!0);selectedSeranadesDates.push(e),setTimeout(function(){if($("#"+t.id+" .ui-state-default").each(function(e){if(h){var t;if(!g){parseInt($(this).text());if($(this).hasClass("ui-state-active")){var a=$(this).offset();$("#select_date_popup").css({top:a.top-(l+p)-s}),$("#sd_arrow").css({left:a.left-u}),m=e+i}else void 0!==m&&e<m&&(v=getDatepickerNextDay(v),$(this).parent().hasClass("ui-state-disabled")?(10===++disabledDateCount&&(h=!1),m++):(t=getRevertDateFormat(v),selectedSeranadesDates.push(t),$(this).addClass("ui-state-active")),m-1===e&&(g=!0))}}}),disabledDateCount>0&&o){var e=disabledDateCount+" dates are blocked for this product";1===disabledDateCount?e=disabledDateCount+" date is blocked for this product":10===disabledDateCount&&(selectedSeranadesDates.length=0,$("#deliverydatepicker .ui-state-active").removeClass("ui-state-active"),e="Dates are not available for this product."),$("#deliverydatepicker").append('<div class="blocked-dates-toast" id="blocked_dates_toast">'+e+"</div>"),setTimeout(function(){$("#blocked_dates_toast").fadeOut()},2e3)}10!==disabledDateCount&&$("#modaldatetimepicker").addClass("open-popup")},0)}function getDatepickerNextDay(e,t){var a=new Date(e);if(t){var i=e.split("/")[0];return e.split("/")[1]+"/"+i+"/"+e.split("/")[2]}return a.setDate(a.getDate()+1),a}function getRevertDateFormat(e){return(e.getDate()>9?e.getDate():"0"+e.getDate())+"/"+(e.getMonth()>8?e.getMonth()+1:"0"+(e.getMonth()+1))+"/"+e.getFullYear()}function onHoverImageInit(){$(document).on("mouseenter",".product-hover",scrollImages)}function scrollImages(e){try{var t=e.currentTarget.querySelectorAll("img.u-photo");if((e.currentTarget.getAttribute("data-product-img-count")||0)-0>1&&!0&&!$(e.currentTarget).find(".slick-initialized")[0]&&t&&1==t.length){var a=document.createElement("div");a.className="slick-wrapper";var i=t[0].cloneNode(!0);imageElementTemplate||(imageElementTemplate=i.cloneNode(!0));var o=e.currentTarget.getElementsByTagName("figure")[0],n=o.cloneNode(!0),l=(e.currentTarget.getAttribute("data-product-img-count")||0)-0,r=/(.*).(jpg|png|jpeg)/.exec(i.src),s=r[1].charAt(r[1].length-1)-0,d=!1;isNaN(s)&&(d=!0,s=1);var c=r[1].replace(/\/m\//,"/l/");a.appendChild(i);for(var p=1+s;p<s+l;p++){var u=t[0].cloneNode(!0);u.src=c.substr(0,c.length-(d?0:1))+(d?"_":"")+p+"."+r[2],a.appendChild(u)}n.replaceChild(a,n.querySelector(".u-photo")),o.parentElement.replaceChild(n,o),initializeSlickForImageScroll(a)}}catch(e){console.info(e)}}function initializeSlickForImageScroll(e){try{$(e).bind("mouseleave",e,function(){$(e).slick("slickSetOption","autoplay",!1).slick("slickPause").slick("slickGoTo",parseInt(0),!1),$(e).find(".slick-dots").css("opacity",0)}),$(e).bind("mouseenter",e,function(){$(e).slick("slickSetOption","autoplay",!0).slick("slickPlay"),$(e).find(".slick-dots").css("opacity",1)}),$(e).slick({prevArrow:"",nextArrow:"",autoplay:!0,autoplaySpeed:1500,fade:!0,pauseOnHover:!1,dots:!0,waitForAnimate:!1})}catch(e){console.info(e)}}function populateDigitalData(e,t,a,i,o,n,l,r){digitalData.page={brand:e,destinationURL:t,channel:a,pageName:i,hierarchy:o,pageCategory:n,sessionID:l,loginStatus:r}}function populateCustomerData(e,t,a){digitalData.custdata={customerID:e,emailID:t,mobNo:a}}function populateErrorData(e,t){digitalData.error={errorType:e,errorDescription:t}}function populateSearchData(e,t,a,i,o){digitalData.search=null!=e?{eventName:"search",searchTerm:null==e?"":e,searchResults:"FNP"==t?$("section[data-product-listing-defaults]").data("product-listing-defaults").listSize:0}:{eventName:"quick search",quickSearchTerm:{city:a,occasion:i,deliveryDate:o}}}function populateProductData(e,t,a,i,o,n,l,r,s){digitalData.product={productSKU:e,productTemplate:t,productCatalog:a,productPosition:i,productString:"[sku:"+e+",name:"+o+",price:"+$("#price").val()+"]",productOOS:l},digitalData.category={categoryType:t,productType:"",occasion:r,recipient:"",city:s},digitalData.event={eventName:"product view"}}function populateCategoryData(e,t,a,i,o,n,l,r){digitalData.category={productType:e,occasion:t,recipient:a,city:i,catalog:o,categoryType:n},"autosuggestion"==l&&(digitalData.search={autoSuggestTerm:r}),digitalData.event={eventName:"product listing"},plpProductString(n)}function populateCheckoutData(e){digitalData.event={eventName:e},$.ajax({url:"/control/viewcart?isExternal=Y",type:"GET",success:function(e){var t=$.parseJSON(e);digitalData.productString=t.items}})}function populateConfirmOrder(e,t,a,i,o,n,l,r,s,d){var c={productId:a,baseProductId:t,productName:i,productCategory:o,price:n,shipping:l,currency:r,quantity:s,addon:d};e.push(c)}function populateTransactionData(e,t,a,i,o,n,l,r,s){digitalData.transaction={webRefNo:e,errorMsg:a,nofBP:o,noofAP:n,payGateway:l,method:r,gtAmount:t},i>0&&(digitalData.transaction.discount=i),"Purchase"==s?digitalData.transaction.purchaseID=e:digitalData.transaction.lostRevenue=t,digitalData.event={eventName:s}}function cartViewOmni(){if(digitalData={cart:{productString:""},event:{eventName:"cart view"}},"t"==getCookie("fnpci")||"t"==getCookie("fnpli"))null!=viewCartForOmni&&viewCartForOmni.items?digitalData.cart.productString=viewCartForOmni.items:$.ajax({url:"/control/viewcart?isExternal=Y",type:"GET",success:function(e){var t=$.parseJSON(e);viewCartForOmni=t,digitalData.cart.productString=t.items}});else{digitalData.cart.productString=[]}"undefined"!=typeof _satellite&&_satellite.track("cart_action")}function cartRemoveOmni(e){var t=$("#cartItemProd_"+e).parent().find(".rmv").data("itemid");digitalData={cart:{productString:{productId:t}},event:{eventName:"cart remove"}},"undefined"!=typeof _satellite&&_satellite.track("cart_action")}function initializeTrackers(e,t,a,i){"category"!=t&&"search"!=t||trackTopMenu(e,t),"product"==t&&trackPDPEvents(e,t,a,i),trackAddonsOnMobile(e,t),"ordersummary"==t&&trackOrderSummary(e,t),trackPay(e,t),trackChat(e,t),trackHeader(e,t),trackMoreLinks(e,t),trackTopBar(e,t)}function trackTopMenu(e,t){$(".scroll-pane-topmenu").on("click","ul li a",function(){var t=$(this).text();if(0==$(this).closest(".not-click").find("label").length?$('<label class="active selptocr" data-href="/gifts">'+t+"</label>").appendTo($(this).closest(".not-click")):$(this).closest(".not-click").find("label").text(t),$(".not-click").size()>0){for(var a=[],i=0;i<$(".not-click").length;i++){var o=$(".not-click")[i];void 0!=$(o).find("label").text()?a.push($(o).find("label").text()):a.push("")}digitalData={link:{linkPageName:e},filter:{filterUsed:"gt:"+a[0]+"|occasion:"+a[1]+"|city:"+a[2]},event:{eventName:"filter"}},"undefined"!=typeof _satellite&&_satellite.track("generic_link")}}),"category"==t&&$("#sort").on("click",function(){var t=$("#sort option:selected").text();"Recommended"!=t&&t.length>0&&(digitalData={link:{linkPageName:e},sort:{sortBy:t},event:{eventName:"sort"}},"undefined"!=typeof _satellite&&_satellite.track("generic_link"))})}function trackPDPEvents(e,t,a,i){var o=$("#addProductId").val();$("#buynow").click(function(){digitalData={link:{linkPageName:e},product:{productSKU:o,productString:"bp"+o},event:{eventName:"buy now, cart addition"}},"undefined"!=typeof _satellite&&_satellite.track("generic_link")}),$("#addToCart").click(function(){digitalData={link:{linkPageName:e},product:{productSKU:o,productString:"bp"+o},event:{eventName:"add to cart, cart addition"}},"undefined"!=typeof _satellite&&_satellite.track("generic_link")}),$(document).on("click",".addonsbmt",function(){digitalData={link:{linkPageName:e},product:{productSKU:o,productString:"ap-"+$("input[name=addonProductId]:checked").map(function(){return this.value}).get().join(),addonID:$("input[name=addonProductId]:checked").map(function(){return this.value}).get().join()},event:{eventName:"add on selected, cart addition"}},"undefined"!=typeof _satellite&&_satellite.track("generic_link")})}function omnitureAddonShown(e,t){var a=$("#addProductId").val();digitalData={product:{productSKU:a,productTemplate:omniPPCategoryId,productCatalog:omniCatalogId,productString:"bp"+a},event:{eventName:"add on shown"}},"undefined"!=typeof _satellite&&_satellite.track("generic_vpv")}function trackAddonsOnMobile(e,t){$(document).on("click","#addonform #submit",function(){digitalData={link:{linkPageName:omniPageName},product:{productSKU:$("input[name=masterProductId]").val(),productString:"ap-"+$("input[name=addonProductId]:checked").map(function(){return this.value}).get().join(),addonID:$("input[name=addonProductId]:checked").map(function(){return this.value}).get().join()},event:{eventName:"add on selected, cart addition"}},"undefined"!=typeof _satellite&&_satellite.track("generic_link")})}function trackOrderSummary(e,t){$(document).keydown(function(){"1"==$("input[name=coupon]").val()&&(digitalData={link:{linkPageName:e},event:{eventName:"coupon enter"}},"undefined"!=typeof _satellite&&_satellite.track("generic_link"))})}function couponErrorMsg(e){digitalData={link:{linkPageName:omniPageName},coupon:{code:e},event:{eventName:"coupon error"}},"undefined"!=typeof _satellite&&_satellite.track("generic_link")}function couponUsageOmniture(e){digitalData={link:{linkPageName:omniPageName},coupon:{code:""},event:{eventName:"coupon usage"}},digitalData.coupon.code=e,"undefined"!=typeof _satellite&&_satellite.track("generic_link")}function trackPay(e,t){$(".pay").click(function(){var e="",t=$(".ui-state-active").text();e="Wallet"==t?t+":"+$("input[aria-checked=true]").val():"Net Banking"==t?t+":"+$(".ui-selectmenu-text").text():t,digitalData={link:{linkPageName:omniPageName},payment:{method:e},event:{eventName:"payment method"}},"undefined"!=typeof _satellite&&_satellite.track("generic_link")})}function trackChat(e,t){$(document).on("click","#fnpchat",function(){digitalData={link:{linkPageName:omniPageName},chat:{emailID:"",mobNo:""},event:{eventName:"chat"}},"undefined"!=typeof _satellite&&_satellite.track("generic_link")})}function trackHeader(e,t){$("header nav li a").on("click",function(){var e=$(this).closest("div").attr("id");void 0==e&&(e=""),digitalData={link:{linkName:e+"_"+$(this).text(),linkType:$(this).closest("nav").attr("id"),linkPageName:omniPageName}},"undefined"!=typeof _satellite&&_satellite.track("other_link")})}function trackMoreLinks(e,t){$("#morelinks a").on("click",function(){digitalData={link:{linkName:$(this).text(),linkType:"FooterLinks",linkPageName:omniPageName}},"undefined"!=typeof _satellite&&_satellite.track("other_link")})}function omnitureLoginTrack(){digitalData={link:{linkPageName:omniPageName},login:{method:"WebsiteLogin"},event:{eventName:"login"}},"undefined"!=typeof _satellite&&_satellite.track("generic_link")}function omnitureRegisterTrack(){digitalData={link:{linkPageName:omniPageName},register:{type:"User Registration"},event:{eventName:"registration"}},"undefined"!=typeof _satellite&&_satellite.track("generic_link")}function priceFilter(e){digitalData={link:{linkPageName:omniPageName},filter:{filterUsed:"price :"+e},event:{eventName:"filter"}},"undefined"!=typeof _satellite&&_satellite.track("generic_link")}function trackTopBar(e,t){$("#topbarcontainer").on("click",".checklabel",function(){var e=$(this).parent().find("div.checkbox").find("input").val();"function"==typeof priceFilter&&priceFilter(e)}),$("#topbarcontainer").on("click",".touchtarget",function(){var e=$(this).parent().find("input").val();"function"==typeof priceFilter&&priceFilter(e)}),$("#categorySortModal").on("click",".cat-fltr-right",function(){digitalData={link:{linkPageName:omniPageName},sort:{sortBy:$("input[aria-checked=true]").next("label").text()},event:{eventName:"sort"}},"undefined"!=typeof _satellite&&_satellite.track("generic_link")}),$(document).on("click",".nested .navmenu",function(){var e=$("#categoryFilterModal").find("div.is-active").attr("id");digitalData={link:{linkPageName:omniPageName},filter:{filterUsed:e+"-"+$(this).text()},event:{eventName:"filter"}},"undefined"!=typeof _satellite&&_satellite.track("generic_link")})}function initOmniSetup(){"undefined"!=typeof omniSetup?omniSetup():console.log("Not able to send the details to Omniture.")}function plpProductString(e){for(var t=document.querySelectorAll(".h-product"),a=t.length,i=a<=12?a:12,o=new Array,n=1,l=0;l<i;l++){var r="NA",s=t[l],d=s.getAttribute("data-product-id"),c=s.querySelector(".priceInINR").innerText,p=s.querySelector(".dt-delivery").innerText,u=s.querySelector("figure").getAttribute("data-display-tag");0!==u.length&&(r=u),0!==l&&l%4==0&&n++;var m,g=s.getElementsByClassName("oldpriceInINR"),h=g&&g[0],v={productid:d,productprice:c,productdelivery:p,productflag:r,productposition:n,productdiscount:(m=h?h.innerText:c)-c,productCategory:e};o.push(v)}digitalData.productString=o}function encrypt(e){var t=CryptoJS.enc.Base64.parse(EncryptionKey),a=CryptoJS.enc.Base64.parse(EncryptionIv),i=CryptoJS.enc.Utf8.parse(e);return CryptoJS.AES.encrypt(i.toString(),t,{mode:CryptoJS.mode.CBC,padding:CryptoJS.pad.Pkcs7,iv:a}).ciphertext.toString(CryptoJS.enc.Base64)}function capitalize(e){return"string"==typeof e&&e.length?e.charAt(0).toUpperCase()+e.slice(1).toLowerCase():""}function renderToastMessage(e,t,a,i,o){if(e&&t&&a){if($(t).find(e).length)$(e).text(a);else var n="<span id="+e+' class="'+(o?"generic-toaster "+o:"generic-toaster")+'">'+a+"</span>";$(t).append(n);i="number"==typeof i?i:2e3;setTimeout(function(){$(".generic-toaster").fadeOut(i)},i)}}function renderMustache(e,t,a){renderMustacheAndAppend(e,t,a,!0)}function renderMustacheAndAppend(e,t,a,i,o){var n=$("#"+e).html();if(void 0!=n){var l=Mustache.to_html(n,a,o);i?$("#"+t).html(l):$("#"+t).append(l)}}function loadScriptFile(e,t){if(e){var a=document.getElementsByTagName("script")[0],i=document.createElement("script");i.src=(cdnHost||"https://"+window.location.hostname)+e,a.parentNode.insertBefore(i,a),"function"==typeof t&&t()}}function randomString(e,t){for(var a="",i=t||"0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",o=e;o>0;--o)a+=i[Math.floor(Math.random()*i.length)];return a}function singleImagePersonalize(e,t,a){var i=t+a+"?pId="+$("#addProductId").val()+"&hf=N";$(e).empty(),$.ajax({url:i,success:function(t){$(e).append(t)}})}function loadCountryListUIforLL(e){var t=$("#llp-template").html(),a={partial:$("#countryListTemplate").html()};e.heading="Choose your Delivery Location",e["sub-heading"]="Where would you like to get the product delivered?",e.label1="Within India",e.label2="Outside India",e.checkIntlRadio=!0,e.countryList.splice(0,1);var i=Mustache.render(t,e,a);$("#location-container").html(i)}function renderWithInIndiaContent(){var e=$("#llp-template").html(),t={partial:$("#partial-template").html()},a=Mustache.render(e,{heading:"Choose your Delivery Location","sub-heading":"Where would you like to get the product delivered?",label1:"Within India",label2:"Outside India",title:"Start typing and select from suggestions",placeHolder:"Enter Pincode"},t);$("#location-container").html(a)}function openPopupForLocationLock(){customDialog("location-lock-popup","location-lock-popup-close",closeLocationLockPopUp),$("body").addClass("stop-scrolling"),renderWithInIndiaContent();loadPincodeSuggestionsForDomestic({eleId:"pincode-suggestions",isPopUp:!0})}function openLocationPopUp(e,t,a){customDialog(e,t,a),$("body").addClass("stop-scrolling"),$("#google-api").length||loadGoogleAutoCompleteWithRandomKey()}function setOrDeletePfCookie(){var e=getCookie("pf");currentCatalogId&&"india"===currentCatalogId&&!e?getDeliveryAreasAsKeyForPincode(getCookie("lastSelectedPincode"),getDeliveryAreasAsKeyCallback):currentCatalogId&&"india"!==currentCatalogId&&e&&delete_cookie("pf","/")}function initLocationLock(){$("#pincode-suggestions").focus(),$(".domestic-popup").addClass("locationLock");var e=getCookie("lastSelectedPincode"),t=getCookie("lastSelectedAddress");e&&t&&($(".selected-pin").text("Pincode: "+e).css("display","block"),$("#pincode-suggestions").val(t),$("#pincode-suggestions").removeClass("activeinput").addClass("disable-location").attr("readonly","readonly").attr("title","Click on remove(X) button to change location"),$(".pin-cross-input").show(),$(".area-block").find(".pin-help").hide(),$("#pin-continue-btn").removeClass("custom-btn-disable"),$(".hassle-free-msg").hide())}function closeLocationPopUp(){$("body").removeClass("stop-scrolling"),$(".custom-overlay").remove();""!==$("#pdp-google-suggestion").val()&&"location-popup-close"!==this.id||(resetDeliveryInput(),resolvedPinDetails=null,fnpPageType&&"product"===fnpPageType&&unsetDest(!0)),resetGoogleDeliveryInput(),$("#location-popup").hide()}function closeLocationLockPopUp(){$("body").removeClass("stop-scrolling"),$(".custom-overlay").remove(),$(".domestic-popup").removeClass("locationLock"),$("#location-lock-popup").hide(),$(".country-wrapper").remove(),isPopupShown=!1,setCookie("llp",!0,30,"/");performLocationLockActionOnClose(getCookie("lastSelectedAddress"),$("#pincode-suggestions").val());var e=$("#pincode-selected").html().replace("Pincode: ","");"product"!==fnpPageType&&cdp.getLocation(e,null,null)}function resetPincodeInput(){$("#pincode-suggestions").removeClass("disable-location hightlight-error").addClass("activeinput").removeAttr("readonly","readonly").attr("title","Start typing and select from suggestions").val(""),$("#pin-continue-btn").addClass("custom-btn-disable"),$(".pin-cross-input").hide(),$(".pin-help").show(),$(".selected-pin").hide(),$(".hassle-free-msg").show(),$("#pincode-suggestions").focus()}function performLocationLockActionOnClose(e,t){resolvedPinDetails=null,""===t&&(delete_cookie("lastSelectedPincode","/"),delete_cookie("lastSelectedAddress","/"),$("#pincode-value").html("Select Delivery Location"),e&&(fnpPageType&&"category"===fnpPageType?location.reload():fnpPageType&&"product"===fnpPageType&&unsetDest(!0)))}function getDeliveryAreasAsKeyForPincode(e,t){currentCatalogId&&"india"===currentCatalogId&&e&&0!=e&&$.ajax({type:"GET",dataType:"json",async:!0,url:"/control/getDeliveryAreasAsKey",data:{pincode:e},success:t})}function getDeliveryAreasAsKeyCallback(e){var t=e.cacheKey;t&&(setCookie("pf",t,30,"/"),"category"===fnpPageType&&location.reload()),googleAutocompleteObject={}}function setPincodeInLL(){if("home"===fnpPageType||"category"===fnpPageType||"product"===fnpPageType){var e=getCookie("lastSelectedPincode"),t=getCookie("lastSelectedAddress");e&&0!=e&&t&&0!=t&&($("#pincode-value").html("Deliver To <u><b>"+e+"</b></u>"),"product"===fnpPageType&&($("#pdp-google-suggestion").val(t),$("#pdp-google-suggestion").removeClass("activeinput").addClass("disable-location").attr("readonly","readonly").attr("title","Click on remove(X) button to change location"),$(".google-suggestion-box").find(".clear-pincode-value").show(),$("#location-continue").removeClass("custom-btn-disable")))}}function loadCountryData(e){$.ajax({type:"GET",url:"/assets/countries-list.json",dataType:"json",success:e})}function loadCountryListUI(e){var t=e,a=$("#countryPopTemplate").html(),i={countryListing:$("#countryListTemplate").html()};if(a){var o=Mustache.to_html(a,t,i);$("#viewlocation-popup").html(o)}}function validateTextEle(e){markValidOrInvalid(e,Validations.VALID);var t=getCurrentPersonalizeConfig(e,".personal-msg");"Y"!==t.required||e.value.length>=t.minSize||markValidOrInvalid(e,Validations.IN_VALID)}function validateUploadEle(e){markValidOrInvalid(e,Validations.VALID);"Y"===getCurrentPersonalizeConfig(e,".file-options").required&&""==$(e).closest("div[data-props-idx]").data("value")&&markValidOrInvalid(e,Validations.IN_VALID)}function validateFieldGroup(e,t){var a=(t=void 0!=t?"#"+t+" ":"")+"."+e,i=$(a).eq(0).data("propsIdx"),o=$("#addProductId").val(),n=productPersonalizedMap[o][parseInt(i)];if(n&&"Y"===n.required){var l=n.minInputRequired,r=$(a+".valid").size();if(l<=r)$(a).removeClass("invalid").removeClass("activeinput");else for(var s=$(a),d=r,c=0;c<s.length&&($(s[c]).hasClass("valid")||($(s[c]).addClass("invalid"),d++,l!=d));c++);}else $(a).addClass("valid").removeClass("activeinput")}function markValid(e){$(e).removeClass("invalid").removeClass("activeinput").addClass("valid")}function markInvalid(e){$(e).removeClass("valid").addClass("activeinput").addClass("invalid")}function clearMarking(e){$(e).removeClass("valid").removeClass("invalid")}function markValidOrInvalid(e,t){var a="";e&&(a=$(e).closest("div[data-props-idx]"))&&(t===Validations.VALID?markValid(a):markInvalid(a))}function validate(e){var t=!0;hideValidationErrors(e);var a=validatePersonalization(e);return a&&(t=a.isValid),t||showValidationErrors(e),t}function validatePersonalization(e){var t=!0,a=[],i=void 0!=e?"#"+e+" ":"",o=$("#addProductId").val();if(productPersonalizedMap){var n=productPersonalizedMap[o];if(n)for(var l=0;l<n.length;l++){var r=!1,s=!1,d=n[l],c=a[d.contentType];c||(a[d.contentType]={},c=a[d.contentType]);var p=d.fieldName,u=i+"."+p;if($(u).length){validateFieldGroup(p,e);var m=$(u+".valid").size();parseInt(d.minInputRequired)>m&&t&&(t=!1),(void 0==c.minReqValid||c.minReqValid)&&(parseInt(d.maxInputRequired)==m&&(r=!0),parseInt(d.minInputRequired)<=m&&(s=!0),c.minReqValid=s,c.allValid=r)}}}return{isValid:t,allContentTypeValid:a}}function showValidationErrors(e){var t=(e=void 0!=e&&""!=e?"#"+e+" ":"")+".invalid .per-msg-error";$(t).show(),"#image-wrapper "==e&&$(e+" .error-msg").show()}function hideValidationErrors(e){var t=void 0!=e&&""!=e?"#"+e+" ":"";$(t+".per-msg-error").hide(),$(t+".invalid").removeClass("invalid"),"image-wrapper"==e&&($(t+" .error-msg").hide(),$(t+".multi-image-msg").hide())}function disableEleValidationError(e){e&&($(e).removeClass("invalid"),$(e).find("invalid").each(function(){$(this).removeClass("invalid")}),$(e).find(".per-msg-error").hide())}var accountHoverDelay,cartHoverDelay,currencyHoverDelay,enquireHoverDelay,MAX_SUGGESTIONS=5,AUTOCOMPLETE_DELAY=300,quickShopDeliveryCutoffTime=17,toolbarButtons={},commonDialog=null,prev="",popSearchData=[],qsList={qscity:[],qsoccasion:[],qsdate:[]},dateFormat="dd-mm-yy",checkLoginCallDeferredObject=$.Deferred(),Modernizr=new Object,searchStartCount=0;$(document).ready(function(){var e=!1;getCookie("fsid")||(document.cookie="fsid="+Math.floor(1e3+9e3*Math.random())),fnpPageType&&"product"==fnpPageType&&logProductView(),-1!=["product","myaccount","home"].indexOf(fnpPageType)&&$.when(checkLoginCallDeferredObject).done(function(e){showRecentlyViewedItems()});if((window.navigator.userAgent.indexOf("MSIE ")>0||navigator.userAgent.match(/Trident.*rv\:11\./))&&$("input").on("focus",function(){var e=$(this).attr("id");"qscity"!=e&&"qsoccasion"!=e&&"qsdate"!=e&&"fnpsearch"!=e||$(this).val(" ")}),"search"==fnpPageType||"category"==fnpPageType||"confirmorder"==fnpPageType||"home"==fnpPageType||"info"==fnpPageType||"myaccount"==fnpPageType||"product"==fnpPageType){var t=getCookie("fnpsearch");void 0!=t&&0!=t&&null!=t&&$("#fnpsearch").val(t)}$("#searchform").submit(function(e){var t=$("#fnpsearch").val().trim();t&&setCookie("fnpsearch",t,7,"/")});var a=0;$(window).scroll(function(){setTimeout(function(){var e=$(window).scrollTop();e>a+10?$("#navmenubar").slideUp():e<a&&$("#navmenubar").slideDown(),a=e},10)}),showcrossIcon(),$("#account").hover(function(){accountHoverDelay=setTimeout(function(){$("#account-dropdown").show()},300)},function(){$("#account-dropdown").hide(),clearTimeout(accountHoverDelay)}),$("#cart").hover(function(){var t=$("#cdp_fvId").val();e||!viewCartData||$("#cartpanel").is(":visible")||(cdp.cartDetail(t),e=!0),clearTimeout(cartHoverDelay),cartHoverDelay=setTimeout(function(){$(".popup-background, #cartpanel").show(),$("select").blur()},300)},function(){$("#del-yes").hasClass("opened")||(e=!1,$(".popup-background, #cartpanel").hide(),clearTimeout(cartHoverDelay))}),$(".popup-background").on("click",function(){$(".popup-background, #cartpanel").hide(),closeCartConfirmation()}),$("#currency").hover(function(){currencyHoverDelay=setTimeout(function(){$(".currency-dropdown").show()},300)},function(){$(".currency-dropdown").hide(),clearTimeout(currencyHoverDelay)}),$("#enquire").hover(function(){enquireHoverDelay=setTimeout(function(){$("#enquire-dropdown").show()},300)},function(){$("#enquire-dropdown").hide(),clearTimeout(enquireHoverDelay)}),$("body").on("click","#searchhintlist > li > a",function(e){if("object"==typeof cdp){var t=$("#searchhintlistlabel").hasClass("popularsearch")?"popular search":"search suggestions",a=$(e.target);cdp.search(t,a.text().replace("search",""),a.attr("data-pos"),$("#fnpsearch").val())}})}),$("#searchFormButton").on("click",function(){$("#searchform").submit()}),$("#fnpsearch").on("keydown",function(e){if(32===e.which&&0===e.target.selectionStart)return!1}),$("#searchform").submit(function(){return null!=$("#searchform input[name='qs']")&&$("#searchform input[name='qs']").val().trim().length<=0?(triggerCategoryHints(this),$("#searchform input[name='qs']").focus(),!1):(cdp.search("",$("#fnpsearch").val(),"",$("#fnpsearch").val()),!0)}),String.prototype.startsWith||(String.prototype.startsWith=function(e,t){return t=t||0,this.indexOf(e,t)===t}),$(".search-clear-pin").on("click",function(){document.getElementById("fnpsearch").value="",$(".search-clear-pin").hide()}),String.prototype.contains||(String.prototype.contains=function(){return-1!==String.prototype.indexOf.apply(this,arguments)}),document.addEventListener("click",checkButtonStates),window.addEventListener("load",fnpInitialize),void 0!==finishPageLoad&&document.addEventListener("DOMContentLoaded",finishPageLoad);var AJAX_URL_LIST={currencyUrl:cdnHost+"/control/getCurrencies",reminderUrl:cdnHost+"/control/getOccasionReminder",catalogUrl:cdnHost+"/control/getDefaultCatalogId"},AJAX_JSON_URL_LIST={cityNamesUrl:"/control/getGeoCityNames",searchTermSuggestionsUrl:"/control/getSearchTermSuggetions",productListingUrl:"/control/productlisting",youMayAlsoLikeUrl:"/control/youmayalsolike",jcUrl:"/control/jc",availablePincodeUrl:"/control/getAvailablePinCodes",qsDataUrl:"/control/getQuickShopData"},SOURCE_MAPPINGS={ONLN_DSKTP_AFLT_NT:[],ONLN_DSKTP_ALLIANCE:[],ONLN_DSKTP_EMAIL:[],ONLN_DSKTP_ORGANIC:[],ONLN_DSKTP_OTHERS:[],ONLN_DSKTP_PPC:[]},DCR_HOST=document.location.href.indexOf("fnp.com")>=0&&document.location.href.indexOf("fnpplus.fnp.com")<0?"https://acs.fnp.com":"",PARTNER_UTM_SRC="WS_PTNR",occasionValPresentInPlace=!1,lastConversionFactor=1,lastCurrencyFormat="Rs.",isPrototype=!1,dateFormat="dd-mm-yy",isPlaceChanged=!1,selectedCourierPinCode=null,courierPincodesList=null,quickshopoccasion=null,shipmentDetails=null,selectedshippingmethodprice=null,productDomSelector="div.productlisting ul li.h-product",productDomAttributeName="data-product-id",useDefaultConfig=!1,isCityPage=!1,isDeliveryDate=!1,hasQueryCity=!1,deliveryCityLock="",deliveryDateLock="",gotItFlag="false",MAX_SUGGESTIONS=7,currentdomain=window.location.hostname.split(".");currentdomain="."+currentdomain[currentdomain.length-2]+"."+currentdomain[currentdomain.length-1];var imageElementTemplate,eventDates=[],eventOcationMonths=[],legendMessage="",notificationMessage="",count=29,counter=0,state=null,activeMonth="",userDetails=null,arrayOfFunctionsForFNPCheckLogin=[],isFNPCheckLoginRunning=!1,selectedDeliveryDateTimeSlot=!1,selectedDeliveryYear="",selectedSeranadesDates=[],disabledDateCount=0,monthNames=["JAN","FEB","MAR","APR","MAY","JUN","JUL","AUG","SEP","OCT","NOV","DEC"],monthFormat=["01","02","03","04","05","06","07","08","09","10","11","12"],days=["SUN","MON","TUE","WED","THU","FRI","SAT"],samedayDeliveryTimer=null,plpGridRow=1,plpGridCol=0;$.urlParam=function(e,t){t||(t=window.location.href);var a=new RegExp("[\\?&]"+e+"=([^&#]*)").exec(t);if(a)return a[1]||void 0},$(function(){$(".checkbox input:checkbox").click(function(){$(this).toggleClass("test")})}),$(document).ready(function(e){initSubscriptionEvents(),$(document).on("click","#cartToolTip .close",function(){$("#cartToolTip").hide()}),$("#login").hover(function(){$(this).find("#loggedinuser").addClass("profilename")},function(){$(this).find("#loggedinuser").removeClass("profilename")}),removeReadonlyFieldsFromTabbing(),$(document).on("keyup",".autogrow",function(){autoResizeAddr(this)}),$(document).on("mouseover",".customizedAutoComplete li.ui-menu-item",function(){$(this).children(".loc-icon").css("background-position","49px -161px")}),$(document).on("mouseleave",".customizedAutoComplete li.ui-menu-item",function(){$(this).children(".loc-icon").css("background-position","-1px -161px")}),$(".quickshopoccasion").blur(function(){var e=$(this).val();if(null!=quickshopoccasion)for(var t in quickshopoccasion){quickshopoccasion[t].label.toLowerCase()==e&&$(this).parents(".quickfrm").find("button.quickshopbtn").prop("disabled",!1)}}),$(document).on("click",".product-reveal-close",function(){$("#modaldatetimepicker").removeClass("open-popup"),selectedDeliveryDateTimeSlot||$("#deliverydatepicker").datepicker("setDate",getDefaultDate()),setTimeout(function(){$("#modaldatetimepicker .slick-prev").click()},200)}),$("a").on("touchend",function(e){var t=$(this).attr("href");window.location=t}),$("#maintoolbar #navigationtools li button, #maintoolbar #infotools li button").click(function(){$("#navigationtools li button, #infotools li button").removeClass("selected"),$(this).addClass("selected")});var t=$("#mainbanner h1").text().length;t>=30?$("#mainbanner h1").addClass("small-font"):t<=20&&$("#mainbanner h1").addClass("big-font"),$("#backbutton").click(function(){disableSubmitBtn($(".buttonrow #underconst")),disableAndAddLoadingGift(this),window.location.href="/control/delivery-address"}),$(document).on("click",".nothanks",function(){disableSubmitBtn($("#addon .addonsbmt"))}),$("#totalproductcount").length&&$("#totalproductcount").prependTo(".leftnav>label").show(),$(".countrycode").length&&(initializeSelectMenu(".countrycode"),$(".ui-selectmenu-menu").addClass("selectcode"),$(".countryCode-button").attr("tabindex","-1")),$(".socialcountrycode").length&&initializeSelectMenu(".socialcountrycode"),$(".sendercountrycode").length&&(initializeSelectMenu(".sendercountrycode"),$(".ui-selectmenu-menu").addClass("selectcode")),"checkoutlogin"!=fnpPageType&&"ordersummary"!=fnpPageType&&"deliveryaddress"!=fnpPageType&&"paymentoptions"!=fnpPageType&&"retrypayment"!=fnpPageType||getCurrencies(),getCdpGrid($(".h-product"))}),$("body").on("click","button",function(){var e=$(this).closest("*[data-ga-category]").attr("data-ga-category");eventCategory=findCategoryLevel(e),eventLabel=$(this).attr("title"),""!=eventLabel&&null!=eventLabel||(eventLabel=$(this).attr("data-ga-title")),"Currency"==e?trackElement(eventCategory,eventLabel,"change"):trackElement(eventCategory,eventLabel,"click")}),$("body").on("click",'*[data-ga-element="ga-element"]',function(){var e=$(this).closest("*[data-ga-category]").attr("data-ga-category");eventCategory=findCategoryLevel(e),eventLabel=$(this).attr("data-ga-title"),""!=eventLabel&&null!=eventLabel||(eventLabel=$(this).find("label[data-ga-childLabel]").text()),trackElement(eventCategory,eventLabel,"click")}),$("body").on("click","a",function(){var e=$(this).closest("*[data-ga-category]").attr("data-ga-category");eventCategory=findCategoryLevel(e),eventLabel=$(this).attr("data-ga-title"),""!=eventLabel&&null!=eventLabel||(eventLabel=$(this).text()),trackElement(eventCategory,eventLabel,"click")}),$(document).on("keypress",".number",function(e){return isNumberKey(e)});var akamaiDateAndTime=null,countrycurrency="INR",PARTNER_UTM_SRC=PARTNER_UTM_SRC||"WS_PTNR",viewCartData=null,internationalCurrency=!1,isCartClicked=!1,loggedIn=!1,isOAuthUser=!1,isPncItemExits=!1;$(document).ready(function(){null===userDetails&&initializeToolbarButtonActions(),null!==userDetails||isFNPCheckLoginRunning||isUserLoggedIn(checkFnpUserLoggedIn),null!==userDetails&&void 0!==googleSmartSignIn&&googleSmartSignIn(),afterFetchFromCart({items:[],subTotal:"0",discount:"0",total:"0",totalShipping:"0"},0)});var CORRECT_PINCODES=null,countryListData=null,catalogID=null,citiesList=null,dateLoaderInterface=void 0,displayPincodes=[],pincodeSearchValue=null;$(document).ready(function(e){$(document).on("click","#destdeselect, #reset-delivery-input",function(e){unsetDest(!0),assocProduct&&getEarliestDateToAssociateProducts()}),$(document).on("click",".pin-help",function(){cdp.getLocation($("#pincode-suggestions").val(),null,null),$("#location-lock-popup").is(":visible")&&($(".custom-overlay").remove(),$("#location-lock-popup").hide());var e=$(this).closest(".gate").find(".render-auto-list .ui-menu").attr("id");$("#"+e).hide(),$(".selected-pin").hide(),$("#destlookup").css("color","#222"),$("#pdp-google-suggestion").addClass("activeinput").removeClass("disable-location").removeAttr("readonly","readonly").attr("title","Start typing and select from suggestions").val(""),$("body").addClass("stop-scrolling"),openLocationPopUp("location-popup","location-popup-close",closeLocationPopUp),$(".domestic-popup").removeClass("locationLock"),$(".cross-input").removeClass("clear-pincode"),$("#location-popup").removeClass("country-location-popup"),$("#viewlocation-popup").hide(),$("#location-continue").addClass("custom-btn-disable"),$(".google-suggestion-box").find(".cross-input").hide(),$(".domestic-popup").show(),$("#pdp-google-suggestion").focus(),$("#google-api").length||loadGoogleAutoCompleteWithRandomKey()}),$(document).on("click","#not-catalog-delivery",function(){customDialog("location-popup","intl-popup-close"),$("#location-popup").addClass("country-location-popup"),$(".domestic-popup").hide(),$(".country-list").length||loadCountryData(loadCountryListUI),$("#viewlocation-popup").show()}),$(document).on("input paste",".domestic-input, #pincode-suggestions",function(e){var t="paste"===e.type?e.originalEvent.clipboardData.getData("Text"):$.trim(e.target.value);$(".ui-autocomplete > li").length;if($("#pincodeAlert").text("Select Pincode to continue").hide(),$("#auto-static-links .ui-links").hide(),$(this).closest("div.gate").find(".auto-suggest-wrapper").show(),$(e.target).css("color","#222"),$("#pincodemsg").text("").hide(),t&&t.length>=PINCODE_MIN_LENGTH)if(isNumber(t)&&("paste"===e.type||"input"===e.type&&t.length>=PINCODE_MIN_LENGTH)&&pincodeSearchValue!=t.slice(0,2))getDomesticPincodes(pincodeSearchValue=t.slice(0,2));else{$(e.target).css("color","#e53333"),isNumber(t)?$("#pincodemsg").text("").hide():$("#pincodemsg").text("Please enter pincode.").show();appendUiLinks({showLink:!1,showAllLinks:!0,showOtherCatalog:!$("#location-lock-popup").is(":visible")},$(this).closest(".gate").find(".render-auto-list"))}else $("#ui-id-1, .auto-suggest-wrapper, .auto-static-links .ui-links").hide()}),$(document).on("click",".country-dropdown li, .countries-list ul li",function(e){catalogID=$(this).attr("data-catalog-id"),$(".country-dropdown").slideUp();var t=$(this).closest(".country-dropdown-container").find(".country-text");if($(t).text()!==catalogID){$(".countries-sprite-svg").removeClass("highlight-selected"),$(".cname").removeClass("green-text");var a=["uae","uk","usa"].indexOf(catalogID)>-1?catalogID.toUpperCase():catalogID.toLowerCase();$(".country-text").text(a),$(".country-selected-btn").removeClass("custom-btn-disable");var i=$(".countries-list ul li").find("."+catalogID.toLowerCase());$(i).siblings(".cname").addClass("green-text"),$(i).addClass("highlight-selected")}}),$(document).on("click",".country-selected-btn",function(){window.location.href=window.location.origin+"/"+("india"==catalogID?"?promo=mob_countryList":catalogID+"/gifts?promo=mob_countryList")}),$(document).on("click",".dropdown-click",function(){$(this).parent().find(".country-dropdown").slideToggle()}),$(".intl-input").on("input",function(e){e.target.value?$("#ui-id-1, .auto-suggest-wrapper, .auto-static-links .ui-links").show():$("#ui-id-1, .auto-suggest-wrapper, .auto-static-links .ui-links").hide()}),loadInvalidPincodeMapping(correctedPincodesCallBack),void 0!==fnpPageType&&"product"===fnpPageType&&customInitialize()});var googleAutoComplete,desktopMapKeys=["AIzaSyAV9qAXl2Y_Kh0dl_4PXLTZuPoQMKdcw3M"],googleAutocompleteObject={},isPopupShown=getCookie("llp"),PINCODE_MAX_LENGTH=6,PINCODE_MIN_LENGTH=2,currentCatalogId=null;$(document).ready(function(e){currentCatalogId=$("#FNP_CURRENT_CATALOG_ID").val(),$("#destlookup").on("keyup keypress paste",function(e){e.target.value?$(".cross-input").show():$(".cross-input").hide();var t=e.keyCode||e.which,a=$("#productType").val();if(13===t&&"INTERNATIONAL"!==a)return $(".auto-suggest-wrapper, #auto-static-links .ui-links, #ui-id-1").hide(),$("#destlookup").css("color","#222"),$("#pincodemsg").text("").hide(),e.preventDefault(),!1}),$("#pdp-google-suggestion").on("keydown",function(e){40!==e.keyCode&&38!==e.keyCode||setTimeout(function(){0===$(".pac-container").find("div.pac-item-selected").length||$(".pac-item:first-child").hasClass("pac-item-selected")?($(".pac-item:first-child").css("background-color","#ebf2fe"),$(".pac-item:first-child .pac-icon-marker").css("background-position","-18px -161px")):($(".pac-item:first-child").css("background-color","#FFF"),$(".pac-item:first-child .pac-icon-marker").css("background-position","1px -161px"))})}),$(document).on("click","#reset-google-input",function(e){resetGoogleDeliveryInput()}),$(document).on("click","#location-continue, #pin-continue-btn",function(){if(isPopupShown=!1,setCookie("llp",!0,30,"/"),"product"===fnpPageType&&geoDisplayInfo.showPincodeOrCity&&unsetDest(!0),resolvedPinDetails){pincodeUpdation(resolvedPinDetails.areaFromDB,resolvedPinDetails.resolvedPincode,resolvedPinDetails.place);var e=googleAutocompleteObject.currentObject?googleAutocompleteObject.currentObject.getPlace().formatted_address:window.selectedPlace?window.selectedPlace:null;window.pincode&&e&&setAllAddressCookies(window.pincode,e)}getDeliveryAreasAsKeyForPincode(getCookie("lastSelectedPincode"),getDeliveryAreasAsKeyCallback),"product"===fnpPageType&&(retainPincode(),setGeoDisplayInfo()),"pin-continue-btn"===this.id?closeLocationLockPopUp():closeLocationPopUp()})});var lImages=[],xImages=[],thumTileIndex=$(".elevatezoom-gallery1").attr("data-index"),initializeClickZoomOptions={zoomType:"inner",zoomWindowWidth:1530,zoomWindowHeight:450,zoomEnabled:!1,elementIdToBind:"#initializeclickOnZoom_01",wrapperElement:".zoom-wrapper",isPopUp:!0},initializeZoomOptions={zoomType:"window",zoomWindowWidth:700,zoomWindowHeight:600,zoomEnabled:!0,elementIdToBind:"#initialZoom_01",galleryActiveClass:"zoomImgActive",gallery:"imageGallery",wrapperElement:".selected-image",isPopUp:!1};$(document).ready(function(e){var t=$("#videomodal").data("videourl");playProductVideo(t),$(document).keyup(function(e){"38"!=e.keyCode&&"40"!=e.keyCode||$(".zoomContainer").trigger("mouseleave"),$("#zoom-popup").length&&27===e.keyCode&&closeZoomPopUP()}),$("body").on("mousewheel DOMMouseScroll MozMousePixelScroll",function(){$(".zoomContainer").trigger("mouseleave")}),$(document).on("click",".video-bg,.cam",function(e){t&&playProductVideo(t)}),$(document).on("click",".close-video",function(){closeVideoPlay()}),$("#imageGallery a").on("click",function(){t&&closeVideoPlay()}),$(".close-reveal-modal").on("click",function(){$("#custVideo").attr("src","")}),cacheImages(lImages,xImages),$(document).on("hover","#imageGallery a,.video-bg",function(e){swapImages(e,!0,"#initialZoom_01","#initial-l-image","imageGallery","elevatezoom-gallery")}),initializeZoom(initializeZoomOptions),setCdpInitialDataForProductImage(),$("#imageGallery a,.video-bg").removeClass("zoomImgActive").eq(0).addClass("zoomImgActive")});var productPersonalizedMap=null,selected_delivery_date=null,superScript=["th","st","nd","rd","th","th","th","th","th","th"],videoSource=null,isVariantChange=!1,geoDisplayInfo=geoDisplayOptions?JSON.parse(geoDisplayOptions):null;$(window).bind("pageshow",function(e){e.originalEvent.persisted&&window.location.reload()}),$(document).ready(function(e){$(document).materialIcons(),assocProduct&&$(".variant-dom .variantItem ").each(function(e,t){var a={productId:$(t).attr("data-product-id"),variantType:$(t).attr("data-ga-title"),price:$(t).attr("data-product-price")};variantList.push(a)}),$(".pl-edit-icon").click(function(e){e.stopPropagation();showComboProducts()&&(customDialog("select-product-popup","close-combos"),initCurrencies("select-product-popup"))}),$(document).on("click",".product-list",function(e){$("#close-combos").trigger("click"),$(".custom-dialog-overlay").css("display","block"),$("#confirm-select-product-popup").css("display","block"),$("#yes-btn").data("url",$(this).find(".select-product-img").data("href"))}),$(document).on("click","#yes-btn",function(e){$(".custom-dialog-overlay").css("display","none"),$("#confirm-select-product-popup").css("display","none");var t=$("#yes-btn").data("url");t&&(document.location=t)}),$(document).on("click","#cancel-btn",function(e){$(".custom-dialog-overlay").css("display","none"),$("#confirm-select-product-popup").css("display","none")}),timeslothoverchange(),loadProductPageData(),initializeThumbNail(),initializeFancybox(),initializeProductContentTab(),resetProductShippingInfo(),assocProduct?loadScriptFile("/assets/js-bbb/product-new/product-switch.js"):retainPincode(),$(".odometer-price").length&&$(".odometer-price").bind("DOMSubtreeModified",function(){$(".offers-available-btn").css("left",$(".odometer-price").width()+18)}),$(".view-more").click(function(){$("body, html").animate({scrollTop:$("#pdp-description").position().top+$("#breadcrumbs").height()+20},1e3,"swing")}),$(".offers-available-btn").click(function(){$("html, body").animate({scrollTop:$("#offers-module-wrapper").position().top+$("#breadcrumbs").height()+35},1e3,"swing")}),$("#top-button").on("click",function(){var e=$(".product-name")[0].offsetTop-$("#breadcrumbs").outerHeight(!0);return $("body, html").animate({scrollTop:e},1e3,"swing"),!1}),$(window).scroll(function(){scrollFunction();var e=$(window).scrollTop(),t=$(".product-gallery").outerHeight();$(".gallery-info").outerHeight(),$("#breadcrumbs").outerHeight();e>=$(".product-information").outerHeight()-t?$(".product-gallery").addClass("in-view"):$(".product-gallery").removeClass("in-view")}),$(".review-section").slick({prevArrow:'<div class="slick-prev arrowmark left-pagination"></div>',nextArrow:'<div class="slick-next arrowmark right-pagination"></div>',infinite:!1,autoplay:!1,pauseOnHover:!1,speed:300,slidesToShow:3,slidesToScroll:1}),$(".reviews-count").click(function(){var e=document.getElementById("customer-review-section").offsetTop-$("header").height();return $("body, html").animate({scrollTop:e},1e3,"swing"),!1}),$(".review.see-more").click(function(){window.location.href="/info/testimonials?pageType=product&productId="+$("#productId").val()}),$(document).on("click","#productfrm .selectflavour",function(){return $(this).parent().find(".dropcontainer").slideToggle(),$(this).toggleClass("active-select"),$("#dropdown-arrow").attr("style")?$("#dropdown-arrow").removeAttr("style"):$("#dropdown-arrow").attr("style","transform:rotate(180deg)"),outSideSelectBoxClick(this),!1}),$(document).on("click","#productfrm .dropcontainer .dropdownhidden li a",function(){return $(this).closest("div.dropdowncontent").find(".selectflavourText").html($(this).text()+'<span id="dropdown-arrow"><i class="material-icons">keyboard_arrow_down</i></span>'),$(this).closest("div.dropdowncontent").find(".selectflavourVal").val($(this).attr("id")),$(this).closest("div.dropdowncontent").find(".selectedProdFeature").val($(this).attr("data-variantkey")),$(this).closest("div.dropdowncontent").find(".dropcontainer").hide(),$(this).closest("div.dropdowncontent").find(".selectflavourText").removeClass("active-select"),$("div.dropdowncontent").find(".selectflavourText").removeClass("activeinput hightlight-error"),$("#productfrm .dropcontainer .dropdownhidden li a").each(function(){$(this).removeClass("selected")}),$(this).addClass("selected"),$(".personalized").data("isproductpersonalizable")||$("#buynow").addClass("activeinput"),$(".selectflavourText").removeClass("mandatory"),$("#flavourError").hide(),!1}),$(document).on("click",".ui-datepicker-next,.ui-datepicker-prev",function(){occasionFooterControl()}),$("body").on("click",function(e){$("#shipping_info").removeClass("open"),"alert-box"!==e.target.className&&$(".alert-box").hide()}),$(document).on("hover",".product-price .price-info",function(){$(".product-price .info-tool-tip").toggle()}),$(document).on("hover",".auto-fillsurge .price-info",function(){$(".auto-fillsurge .info-tool-tip").toggle()}),$("#shipping_info_popup").on("click",function(){return!1}),$("#shiping_info_text").on("click",function(){return $(this).parent().addClass("open"),!1}),$("#close_shiping_info").on("click",function(){return $(this).parents("#shipping_info").removeClass("open"),!1}),$("#addToCart").on("click",function(){$("input[name='isbuynow']").val("N")}),setGeoDisplayInfo(),showOfferTooltip(),$(".offer-tnc-txt").click(function(){$(this).siblings(".offer-tnc-popup").show()}),$(".offer-tnc-txt").click(function(){$(".offer-tnc-txt").not(this).siblings(".offer-tnc-popup").hide()}),$(".close-tnc").click(function(){$(this).parent().css("display","none")}),$(document).click(function(e){$(e.target).closest(".offer-tnc-popup,.offer-tnc-txt").length||$("body").find(".offer-tnc-popup").hide()})});var localityAutoComplete,service,geoLocation,circle,selectedPlace=null,blockedDates=[],isVariantSwitch=!1,pincode=null,matchedPincode=null,selectedLocalityGoogle=null,selectedPincodeGoogle=null;$.urlParam=function(e,t){t||(t=window.location.href);var a=new RegExp("[\\?&]"+e+"=([^&#]*)").exec(t);if(a)return a[1]||void 0};var deliveryDates=null;$(document).on("click",".tabs-area .inner-tab li .deivery-title",function(){if(!$(this).parent().hasClass("active")){var e=$(this),t=$(e.parents("div.inner-tab")[0]),a=t.attr("id");$("#"+a+" .shipping").removeClass("active");var a=t.attr("id"),i=t.find(".delivery-types");i.slideUp();i.find(".earliest-delivery-selected").hide(),e.parent("li.shipping").addClass("active");var o=e.attr("data-shippingmethod"),n=e.closest("li").find(".timeslots .active"),l=$("#"+a+"SelectedTimeslotId"),r=e.parent().find(".delivery-types li:first");$("#shippingMethodId").val(o);var s=e.closest(".shipping").find(".earliest-delivery-selected");if(0==n.length){r.addClass("active");var d=r.attr("data-timeslotid");$("#timeSlotId").val(d),l.val(d),$("#shippingCost").val(r.attr("data-timeslotprice")),(e.parent().find("li").length>1||"MIDNIGHT_DELIVERY"==o||"ETC_DELIVERY"==o||"ETC_CAKE_DELIVERY"==o||"FREE_SHIPPING"==o)&&s.show()}else("MIDNIGHT_DELIVERY"==o||"ETC_DELIVERY"==o||"ETC_CAKE_DELIVERY"==o||"FREE_SHIPPING"==o||e.parent().find("li").length>1&&r.hasClass("active")&&!r.hasClass("user-select"))&&s.show(),$("#timeSlotId").val(n.attr("data-timeslotid")),l.val(n.attr("data-timeslotid")),$("#shippingCost").val(n.attr("data-timeslotprice"));e.closest("li").find(".delivery-types").slideDown(),$("#"+a+"SelectedShipping").val(o)}}),$(document).on("click",".delivery-types li",function(){var e=$(this).closest(".inner-tab").attr("id");$(this).parent().find("li").removeClass("active");var t=$(this).closest("li.active").find(".deivery-title").attr("data-shippingmethod");"MIDNIGHT_DELIVERY"!=t&&$(this).closest("li.active").find(".earliest-delivery-selected ").fadeOut(),$("#"+e+"SelectedShipping").val(t),$("#"+e+"SelectedTimeslotId").val($(this).attr("data-timeSlotId")),$(this).addClass("active"),$(this).addClass("user-select"),$("#timeSlotId").val($(this).attr("data-timeSlotId")),$("#shippingCost").val($(this).attr("data-timeslotprice"))});var tomorrow=null,today=null,previousTab=null,currentTab=null,fullDayNames=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],fullMonthNames=["January","February","March","April","May","June","July","August","September","October","November","December"],todayAjaxTime=null,tomorrowAjaxTime=null,dayTabclick=".delivery-date-area .date-tabs ul.tab-nav li";$(document).on("click",dayTabclick,function(){$(".delivery-date-area .date-tabs ul.tab-nav li").removeClass("active"),$(this).addClass("active"),$(".delivery-date-area").append("<div class='new-loader-area' style='display:block;'><div class='new-loader'></div></div>");var e=akamaiTime(),t=(e.getHours(),e.getMinutes());$(".inner-tab .earliest-delivery-selected").hide();var a=$(this).attr("rel");if(previousTab=currentTab,currentTab=a,$(".shippingmethods li.active p.freeInfo").show(),"selecte_date-tb"!=a){$("#addProductId").val();null!=pincode&&""!=pincode||(pincode=$("#previousPincode").val());var i=null;if("today"==a){if(!(todayAjaxTime>t||null==todayAjaxTime||isVariantSwitch)){$(".tabs-area .inner-tab").hide(),$(".tabs-area #"+a).show(),$("#"+a).fadeIn();var o=(l=today.split("-"))[0]+"/"+l[1]+"/"+l[2];$("#deliveryDate").val(o),$("#itemDesiredDeliveryDate").val(today),$("#productDeliveryDate").val(o);var n=$("#"+a).find("li.active").find(".delivery-types").find("li.active");return $("#shippingMethodId").val($("#"+a).find("li.active").find(".deivery-title").attr("data-shippingmethod")),$("#timeSlotId").val(n.attr("data-timeslotid")),$("#shippingCost").val(n.attr("data-timeslotprice")),void $(".delivery-date-area").find(".new-loader-area").remove()}i="/control/getDatesAndShippingMethods?productId="+$("#addProductId").val()+"&pinCode="+pincode+"&deliveyDatesMaxCount=5",$(".delivery-date-area").slideDown(),$(".explocality #destlookup").addClass("disable-location").attr("readonly","readonly").attr("title","Click on remove(X) button to change location"),$(".auto-cake-inputs").hide(),$(".auto-personal-inputs").hide()}else if("tomorrow"==a){if(!(null==tomorrowAjaxTime||tomorrowAjaxTime>t)){$(".tabs-area .inner-tab").hide(),$(".tabs-area #"+a).show(),$("#"+a).fadeIn();var l=tomorrow.split("-"),r=l[0]+"/"+l[1]+"/"+l[2];$("#deliveryDate").val(r),$("#itemDesiredDeliveryDate").val(tomorrow),$("#productDeliveryDate").val(r);var s=$("#"+a).find("li.active").find(".delivery-types").find("li.active");return $("#shippingMethodId").val($("#"+a).find("li.active").find(".deivery-title").attr("data-shippingmethod")),$("#timeSlotId").val(s.attr("data-timeslotid")),$("#shippingCost").val(s.attr("data-timeslotprice")),void $(".delivery-date-area").find(".new-loader-area").remove()}var d=tomorrow.split("-");deliveryDate=d[0]+"/"+d[1]+"/"+d[2],i="/control/getShippingDetails?productId="+$("#addProductId").val()+"&pinCode="+pincode+"&deliveryDate="+deliveryDate+"&countryGeoId="+$("#countryGeoId").val(),$(".delivery-date-area").slideDown(),$(".explocality #destlookup").addClass("disable-location").attr("readonly","readonly").attr("title","Click on remove(X) button to change location"),$(".auto-cake-inputs").hide(),$(".auto-personal-inputs").hide}$.ajax({type:"GET",dataType:"json",async:!0,global:!1,url:i,success:function(e){if(null!=e&&1==e.isShippingDetailsExists)"today"==a?(todayAjaxTime=t,e.deliveryDates&&e.isDatesAvailable?(deliveryDates=e.deliveryDates,isExpressProductAvailable=e.isExpressProductAvailable,occasionFooterControl(!0)):(deliveryDates=null,showNotDeliverableMessage(),$(".auto-cake-inputs").hide(),$(".auto-personal-inputs").hide())):tomorrowAjaxTime=t,buildEarliestShippingAndTimeSlots(a,e),$(".auto-cake-inputs").show(),$(".auto-personal-inputs").css("display","inline");else{deliveryDates=null,showNotDeliverableMessage(),$(".delivery-date-area").slideUp(),$(".delivery-date-area").slideUp(),$(".auto-cake-inputs").hide(),$(".auto-personal-inputs").hide();var i=$(".product-information").offset();$("html, body").animate({scrollTop:i},2e3)}}})}});var calendarDate=null;$("#modaldatetimepicker .close-reveal-modal").click(function(){$(".date-tabs .tab-nav").find("li").removeClass("active"),$(".date-tabs").find("[rel='"+previousTab+"']").addClass("active"),currentTab=previousTab,$(".delivery-date-area").find(".new-loader-area").remove()}),$("#removecitycontext").click(function(){removeCityContext()});var downArrowClickCounter=0,topArrowClickCounter=0,globalTopHeight=0,thumbNailScroll=0,thumbNailDom=null,smallImageHeight=0,largeImageHeight=0,thumbNailCount=0,allSmallImagesHeight=0,globalDownHeight=0;$(document).ready(function(e){$(document).on("click",".variantItem",function(e){var t=$(e.currentTarget).attr("data-product-Id"),a=$(e.currentTarget).find("img").attr("alt"),i=$(e.currentTarget).find("img").attr("src"),o=$(e.currentTarget).find(".priceInINR").text(),n=$(e.currentTarget).attr("data-ga-title");if($(".selectedProdFeature").val()&&$(".selectedProdFeature").val($(this).attr("data-variantkey")),$(".variantItem").removeClass("selectedVariant"),$(this).addClass("selectedVariant"),$("#deliveryDate").val(""),isVariantChange=!0,$(".remote-area").length&&$(".remote-area").html(""),assocProduct&&$("#productType").val()&&"INTERNATIONAL"!==$("#productType").val()){$(".product-switch-btn").hasClass("product-not-available")&&($(".product-switch-btn").removeClass("product-not-available"),"COURIER"===$("#productType").val()?$("#courier-delivery").addClass("generic-green-btn"):$("#hand-delivery").addClass("generic-green-btn"));var l=$(".product-switch-btn.generic-green-btn");l.attr("data-associate-id",t);var r=l.closest(".product-switch-block").siblings().find(".product-switch-btn"),s=(getCookie("lastSelectedPincode"),getAssociateVariantProductId());r.attr("data-associate-id",s.productId),r.attr("data-associate-price",s.productPrice),r.find(".product-type-price").html('<span class="WebRupee">&#8377;</span>'+s.productPrice+"</span>"),r.find(".priceInINR").text(s.productPrice),getEarliestDateToAssociateProducts()}switchVariantProduct(t,a,t+"_desc",i,o,n,e),handleShowComboProducts()}),$(".pdp-info-box").on("hover",function(e){e.stopPropagation(),$(".pdp-inner-box, .icon-pdp").toggleClass("active");var t=$(".curr-symbol").text(),a=Number($(".odometer-auto-theme").text().replace(/[^\d.-]/g,"","").trim());$(".sell-text").text(t+" "+a);var i=Number($(document).find(".pdp-info-box").parents(".price-crossline").find(".oldprice").text().replace(/[^\d.-]/g,"","").trim());$("#old-price-txt").css("text-decoration","line-through").text(t+" "+i);var o=Number(i-a).toFixed(2),n=Number($(document).find(".pdp-info-box").parents(".price-crossline").find(".off").text().replace(/[^\d.-]/g,"","").trim()),l=$(document).find(".pdp-info-box").parents(".price-crossline").find(".oldprice").css("display"),r=$(document).find(".pdp-info-box").parents(".price-crossline").find(".oldprice").text();$(".selling-price, .dicount-price").show(),$("#old-price-txt").css("text-decoration","line-through").text(t+" "+i),$(".sell-text").text(t+" "+a),$("#save-amunt").text(t+" "+o),$("#save-percnt").text("("+n+"%)"),"inline-block"==l&&""!==r?$(document).find(".pdp-info-box #no-discount-pdp").addClass("discount-box"):("inline-block"==l&&""==r||"none"==l&&""!==r)&&($("#no-discount-pdp").removeClass("discount-box"),$("#discount-pdp").removeClass("forigen-price"),$("#old-price-txt").css("text-decoration","auto").text(t+" "+a),$(".selling-price, .dicount-price").hide())}),$(".pdp-inner-box").on("click",function(e){e.stopPropagation()})});var userPincode=!1,isPincodeMapped=!1;$(document).ready(function(e){$(document).on("click",".intlDeliveryDates",function(){$("#shippingmethoddiv li .intlDeliveryDates label, #shippingmethoddiv li .intlDeliveryDates .input-group-button").removeClass("selectedshipping"),$(this).parent("li").find(".intlDeliveryDates label, .intlDeliveryDates .input-group-button").addClass("selectedshipping"),$(this).find(".input-group-button").siblings(".input-group-field").prop("checked",!0);var e=$(this).attr("data-shippingmethod"),t=$(this).attr("data-timeSlotId"),a=$(this).closest(".intlDeliveryDates").find(".timesloter").html(),i="0"===$(this).attr("data-shippingCost")?"Free":$(this).attr("data-shippingCost");return $("#shippingCost").val(i),$("#shippingmethod").html(a),$("#shippingMethodId").val(e),$("#timeSlotId").val(t),pincode=$("#pinCode").val(),setTimeout(function(){intlDeliveryDates(e,t,pincode)},50),!1}),$(document).on("click",".timeslotdetails",function(){$("#shippingmethoddiv li .timeslotdetails label, #shippingmethoddiv li .timeslotdetails .input-group-button").removeClass("selectedshipping"),$(this).parent("li").find(".timeslotdetails label, .timeslotdetails .input-group-button").addClass("selectedshipping"),$(this).find(".input-group-button").siblings(".input-group-field").prop("checked",!0),selectedshippingmethodprice=$(this).find(".input-group-button .delcost").html();var e=$(this).attr("data-shippingmethod"),t=$(this).find(".input-group-button .priceInINR").html()||0,a=$(this).attr("data-ga-title");cdp.delivery(selected_delivery_date,1,a,t,""),$("#modaldatetimepicker .slick-next").click(),setTimeout(function(){timeSlotDetails(e)},50)}),$(document).on("click",".timeslottable a",function(){var e=$("#productDeliveryDate").val();if(void 0!=e&&""!=e){var t=$.datepicker.parseDate("dd/mm/yy",e),a=$.datepicker.formatDate("mm/dd/yy",t),i=new Date(a);selectedDeliveryYear=i.getFullYear();var o=$($(this).find(".timerange")).html(),n=$($(this).find(".timeSlotId")).html(),l=($($(this).find(".isDynamic")).html(),$.trim(o.split("-")[0])),r=$.trim(o.split("-")[1]);$("#timeslot").html(l+"Hrs - "+r+"Hrs");var s=$(this).closest(".time-slot").find(".shippingMethodName").html(),d=$(this).closest(".time-slot").find(".shippingMethodId").html(),c=$(this).find(".timeslotprice").html();if(isMultiOrderProduct){setStartEndDate(i);var p=$(this).find(".timeslotprice").text();"Free"!==p?generateShippingContent(parseInt(p)):$("#shipping_info").removeClass("show")}else $("#deliverydateofmonth").html(i.getDate()),$("#deliverymonth").html(monthNames[i.getMonth()]),$("#deliveryweekday").html(days[i.getDay()]);var u="",m=parseFloat(c);m>0?(isMultiOrderProduct&&(c=m*selectedSeranadesDates.length),u=u+'<span id="shippingcost" class="webprice"><span class="WebRupee">&#8377;</span>'+c+'</span><span class="priceInINR" style="display:none;">'+c+"</span>"):u='<span id="shippingcost">'+c+"</span>",$("#shippingmethod").html(s+" : "+u),$("#deliveryDate").val(e),$("#shippingMethodId").val(d),$("#dynamicStartTime").val(l),$("#dynamicEndTime").val(r),$("#shippingCost").val(c),$("#timeSlotId").val(n),selectedDeliveryDateTimeSlot=!0,$("#dateAlert").hide();var g=$(this).attr("data-ga-title");cdp.delivery(i,1,s,c,g),updateDesiredDeliveryDateTimestamp(e),getProductPriceByDeliveryInfo($("#addProductId").val(),getOfbizReadableDate(e),pincode)}$(this).find(".input-group-field").prop("checked",!0),$("#timeslotDiv li").removeClass("selectedshipping"),$(this).parent("li").addClass("selectedshipping"),setTimeout(function(){$("#modaldatetimepicker").foundation("reveal","close"),$("#modaldatetimepicker .slick-prev").click()},50),$(".date-select-wrapper").hide(),initCurrencies(),$("#datetimeshipping").show(),activePersonalisedOnDateSelect()}),$(document).on("click",".shipingmode a",function(){var e=$("#productDeliveryDate").val();if(void 0!=e&&""!=e){var t=$.datepicker.parseDate("dd/mm/yy",e),a=$.datepicker.formatDate("mm/dd/yy",t),i=new Date(a);$("#deliverydateofmonth").html(i.getDate()),$("#deliverymonth").html(monthNames[i.getMonth()]),$("#deliveryweekday").html(days[i.getDay()]);var o=$($(this).children(".shippingtime")).html(),n=$($(this).children(".shippingMethodId")).html(),l=$($(this).children(".shipmentprice")).html(),r=$($(this).children(".timeSlotId")).html(),s="";s=parseFloat(l)>0?s+'<span style="display:none;" class="priceInINR">'+l+'</span><span id="shippingcost" class="webprice"><span class="WebRupee">&#8377;</span>'+l+"</span>":'<span id="shippingcost">'+l+"</span>",$("#shippingmethod").html(o),$("#shipprice").html(s),$("#deliveryDate").val(e),$("#shippingMethodId").val(n),$("#shippingCost").val(l),$("#timeSlotId").val(r),updateDesiredDeliveryDateTimestamp(e),getProductPriceByDeliveryInfo($("#addProductId").val(),getOfbizReadableDate(e),pincode)}$("#datetimeshipping").css("margin-top","0"),$("#modaldatetimepicker").foundation("reveal","close"),$(".date-select-wrapper").hide(),$(".alert-box.alert").hide(),initCurrencies(),$("#localitylookup").hide(),$("#datetimeshipping").show()}),$("#modaltimeslot").on("click",".backtocalendar",showSelectedDateInfoPopup),$("#modalshiping, #modaltimeslot").on("click",".b2c",showSelectedDateInfoPopup)});var cachedDate=new Date,personalizedOptions={},imagesToUpload=0,uploadCounter=0,lastColumnCounter=0;$(document).ready(function(e){var t=new XMLHttpRequest;if(t.onreadystatechange=function(){4==this.readyState&&200==this.status&&(cachedDate=new Date(1e3*parseInt(t.responseText)))},t.open("GET","https://time.akamai.com/",!0),t.send(),$(".refImage").change(function(e){e.preventDefault(),$("#uploadMsg").hide(),personalizeImageUploadCP()}),$(document).on("click",".file-read",function(e){$(this).closest(".file-options").find(".upload").trigger("click")}),$(document).on("click",".customisedOption",function(e){$(".customisedOption").removeClass("invalid"),constructPersonalizedTemplatePopup(!0),customDialog("multi-image-popup","close-multi-img"),validateContinueUpload()}),$(".personalized").attr("data-isProductPersonalizable")&&($(document).on("click",".preview-reveal-close",function(){$("#modalPpernsonalize").foundation("reveal","close"),$("body").removeClass("preview-modal-open")}),productPersonalizedMap=JSON.parse($(".personalized").attr("data-productPersonalizedMap")),$.isEmptyObject(personalizedOptions)&&(personalizedOptions=getPersonalizedObjFromStorage()),$(".customisedOption").length>0&&constructPersonalizedTemplatePopup(!1),!$.isEmptyObject(personalizedOptions))){constructPersonalizedTemplateInScreen();validateContinueUpload()&&!hasPersonalizableUI&&showInscreenSuccessMsg()}$(document).on("change",".upload",function(e){var t=$(this).closest(".file-options");$(t).find(".file-read").removeClass("hightlight-error"),$(t).find(".upload-progress").css({width:"0%"}),$(".pdp-buttons button").css("pointer-events","none"),personalizeImageUpload(this)});var a=null;$(document).on("keyup",".personal-input-msg",function(){a&&clearTimeout(a);var e=getCurrentPersonalizeConfig(this,".personal-msg "),t=$.trim(this.value),i=t.length,o=e.maxSize-i;if(this.value.length>e.maxSize)return $(this).val(t.substring(0,e.maxSize)),!1;$(this).closest(".personal-msg").find(".charleft").text(o),isMultiPersonalizedProduct&&(a=setTimeout(function(e){validateTextEle(e),validateContinueUpload()}.bind(null,this),800))}),$(document).on("blur",".personal-input-msg",function(){validateTextEle(this);var e=getCurrentPersonalizeConfig(this,".personal-msg");$(this).closest("."+e.fieldName).data("value",this.value),$(".personal-input-msg").removeClass("activeinput"),saveToLocalStorage(e,".file-options"),isMultiPersonalizedProduct&&validateContinueUpload();var t=$("#baseProductId").val();e&&e.fieldName&&"msgOnCake"===e.fieldName&&t&&localStorage.setItem(t,this.value)}),$(document).on("focus",".personal-input-msg",function(){if(disableEleValidationError($(this).closest(".personal-msg")),""==this.value){var e=$(this).closest(".personal-msg").find(".msg-placeHolder");e&&$(e).addClass("add-msg-top")}}),$(document).on("focusout",".personal-input-msg",function(){if(""==this.value){var e=$(this).closest(".personal-msg").find(".msg-placeHolder");e&&$(e).removeClass("add-msg-top")}}),$(document).on("click",".hasPersonalizableUI",function(e){singleImagePersonalize("#imagePersonalization","/info/_pp/www.fnp.com/",urlIdentifier),customDialog("singleImagePersonalization","close-multi-img")})});var isMultiPersonalizedProduct=!1,personalizedPopupTemplate=$("#personalizedPopupTemplate").html(),multiImageUploadTemplate=$("#multiImageUploadTemplate").html(),otherdetailsTemplate=$("#otherdetailsTemplate").html(),uploadTemplate=$("#uploadTemplate").html(),uploadedCount=0;$(document).ready(function(e){$(document).on("click",".upload-tile",function(e){checkUploadingImage()&&!$(this).find("img").attr("src")&&$(this).find(".file-preview").trigger("click")}),$(document).on("click",".file-preview, #multi-img-file, .delete-photo",function(e){e.stopPropagation()}),$(document).on("click","#multi-select-btn",function(e){$(".file-preview.multi-select").val(""),checkUploadingImage()&&$("#multi-img-file").trigger("click")}),$(document).on("click",".delete-photo",function(e){customDialog("upload-prod-del","close-delete-img"),$("#upload-prod-del").siblings(".custom-overlay").css("left","0").show(),$("#delete-yes").attr("data-tile",$(e.target).closest(".delete-photo").attr("del-tile")),$(".custom-close").hide()}),$(document).on("click","#delete-cancel",function(e){closeDeleteUploadPopUp()}),$(document).on("click","#delete-yes",function(e){var t=$(e.target).attr("data-tile");$("#upload-image-"+t).attr("src","").hide(),removeUploadedImage(t,this),closeDeleteUploadPopUp(),clearMarking($("#upload-image-"+t).closest(".file-upload"))}),$(document).on("click",".personalize-continue-btn",function(e){if($("#prod-personalize-tabs").length){var t=$("#prod-personalize-tabs .ui-slider-tabs-list li").size(),a=$("#prod-personalize-tabs .ui-slider-tab-content.selected");if(a){var i=$(a).prop("id"),o=$(a).index(),n=validate(i);if(n){if(1===t)$("#close-multi-img").click();else if(o+1<t)n=!1,$("#prod-personalize-tabs .ui-slider-tabs-list li").eq(o+1).find("a").trigger("click");else if(o+1===t){var l=$("#prod-personalize-tabs .ui-slider-tab-content").eq(o-1).attr("id");i=l,(n=validate(l))?$("#close-multi-img").click():$("#prod-personalize-tabs .ui-slider-tabs-list li").eq(o-1).find("a").trigger("click")}n&&showInscreenSuccessMsg()}if(!n){$("#"+i).addClass("form-invalid");var r=$("#"+i+" .personalize-fields-wrapper")[0];r&&r.scrollHeight>r.offsetHeight&&$("#"+i).find(".invalid")[0].scrollIntoView({behavior:"smooth",block:"end",inline:"nearest"})}}}}),$(document).on("change",".file-preview",function(e){var t=$(e.target),a="multi-select"===t.attr("data-select")?0:$(e.target).attr("id").split("-")[1],i=getCurrentPersonalizeConfig(this,".file-options"),o=$(t).parent();$(o).hasClass("hightlight-error")&&$(o).removeClass("hightlight-error");var n=t[0].files.length;n=imagesToUpload-uploadedCount<=n?imagesToUpload-uploadedCount:n;for(var l=this,r=0;r<n;r++){var s=t[0].files[r],d=new FileReader;d.onload=function(e){for(var t=0;t<imagesToUpload&&$(".upload-tile").eq(a).find("img").attr("src");t++)a++;if(isSelectedFileValid(s,i)){uploadedCount++;var o=$(".upload-tile").eq(a).find("img"),n=$(o).siblings(".add-photo")[0];n&&n.classList.add("component-loader-symbol"),uploadFileToS3(s,fileNameToUse(s.name),o,null,removeLoader,l),$(".upload-tile").eq(a).hasClass("hightlight-error")&&$(".upload-tile").eq(a).removeClass("hightlight-error"),!$(".upload-tile").hasClass("hightlight-error")&&$(".multi-image-msg").hide()}else addValidation($(".upload-tile").eq(a));a++}(),d.readAsDataURL(s)}}),deleteLocalStorageForPrevSession()}),function(e){e(document).on("click",".holiday",function(){e(".no-delivery-toast").length&&e(".no-delivery-toast").remove(),e("<span class='no-delivery-toast'>Delivery is not available on this date.</span>").insertBefore(".calendarfooter"),e(".no-delivery-toast").css("display","block"),setTimeout(function(){e(".no-delivery-toast").addClass("toast-fade-out")},2e3)}),e.extend(e.datepicker,{_generateHTML:function(e){var t,a,i,o,n,l,r,s,d,c,p,u,m,g,h,v,f,$,y,b,C,I,D,k,P,w,T,S,_,N,x,A,L,E,O,M,z,F,R,U=new Date,j=this._daylightSavingAdjust(new Date(U.getFullYear(),U.getMonth(),U.getDate())),V=this._get(e,"isRTL"),G=this._get(e,"showButtonPanel"),H=this._get(e,"hideIfNoPrevNext"),B=this._get(e,"navigationAsDateFormat"),q=this._getNumberOfMonths(e),Y=this._get(e,"showCurrentAtPos"),W=this._get(e,"stepMonths"),K=1!==q[0]||1!==q[1],J=this._daylightSavingAdjust(e.currentDay?new Date(e.currentYear,e.currentMonth,e.currentDay):new Date(9999,9,9)),Z=this._getMinMaxDate(e,"min"),Q=this._getMinMaxDate(e,"max"),X=e.drawMonth-Y,ee=e.drawYear;if(X<0&&(X+=12,ee--),Q)for(t=this._daylightSavingAdjust(new Date(Q.getFullYear(),Q.getMonth()-q[0]*q[1]+1,Q.getDate())),t=Z&&t<Z?Z:t;this._daylightSavingAdjust(new Date(ee,X,1))>t;)--X<0&&(X=11,ee--);for(e.drawMonth=X,e.drawYear=ee,a=this._get(e,"prevText"),a=B?this.formatDate(a,this._daylightSavingAdjust(new Date(ee,X-W,1)),this._getFormatConfig(e)):a,i=this._canAdjustMonth(e,-1,ee,X)?"<a class='ui-datepicker-prev ui-corner-all' data-handler='prev' data-event='click' title='"+a+"'><span class='ui-icon ui-icon-circle-triangle-"+(V?"e":"w")+"'>"+a+"</span></a>":H?"":"<a class='ui-datepicker-prev ui-corner-all ui-state-disabled' title='"+a+"'><span class='ui-icon ui-icon-circle-triangle-"+(V?"e":"w")+"'>"+a+"</span></a>",o=this._get(e,"nextText"),o=B?this.formatDate(o,this._daylightSavingAdjust(new Date(ee,X+W,1)),this._getFormatConfig(e)):o,n=this._canAdjustMonth(e,1,ee,X)?"<a class='ui-datepicker-next ui-corner-all' data-handler='next' data-event='click' title='"+o+"'><span class='ui-icon ui-icon-circle-triangle-"+(V?"w":"e")+"'>"+o+"</span></a>":H?"":"<a class='ui-datepicker-next ui-corner-all ui-state-disabled' title='"+o+"'><span class='ui-icon ui-icon-circle-triangle-"+(V?"w":"e")+"'>"+o+"</span></a>",l=this._get(e,"currentText"),r=this._get(e,"gotoCurrent")&&e.currentDay?J:j,l=B?this.formatDate(l,r,this._getFormatConfig(e)):l,s=e.inline?"":"<button type='button' class='ui-datepicker-close ui-state-default ui-priority-primary ui-corner-all' data-handler='hide' data-event='click'>"+this._get(e,"closeText")+"</button>",d=G?"<div class='ui-datepicker-buttonpane ui-widget-content'>"+(V?s:"")+(this._isInRange(e,r)?"<button type='button' class='ui-datepicker-current ui-state-default ui-priority-secondary ui-corner-all' data-handler='today' data-event='click'>"+l+"</button>":"")+(V?"":s)+"</div>":"",c=parseInt(this._get(e,"firstDay"),10),c=isNaN(c)?0:c,p=this._get(e,"showWeek"),u=this._get(e,"dayNames"),m=this._get(e,"dayNamesMin"),g=this._get(e,"monthNames"),h=this._get(e,"monthNamesShort"),v=this._get(e,"beforeShowDay"),f=this._get(e,"showOtherMonths"),$=this._get(e,"selectOtherMonths"),y=this._getDefaultDate(e),b="",I=0;I<q[0];I++){for(D="",this.maxRows=4,k=0;k<q[1];k++){if(P=this._daylightSavingAdjust(new Date(ee,X,e.selectedDay)),w=" ui-corner-all",T="",K){if(T+="<div class='ui-datepicker-group",q[1]>1)switch(k){case 0:T+=" ui-datepicker-group-first",w=" ui-corner-"+(V?"right":"left");break;case q[1]-1:T+=" ui-datepicker-group-last",w=" ui-corner-"+(V?"left":"right");break;default:T+=" ui-datepicker-group-middle",w=""}T+="'>"}for(T+="<div class='ui-datepicker-header ui-widget-header ui-helper-clearfix"+w+"'>"+(/all|left/.test(w)&&0===I?V?n:i:"")+(/all|right/.test(w)&&0===I?V?i:n:"")+this._generateMonthYearHeader(e,X,ee,Z,Q,I>0||k>0,g,h)+"</div><table class='ui-datepicker-calendar'><thead><tr>",S=p?"<th class='ui-datepicker-week-col'>"+this._get(e,"weekHeader")+"</th>":"",C=0;C<7;C++)_=(C+c)%7,S+="<th scope='col'"+((C+c+6)%7>=5?" class='ui-datepicker-week-end'":"")+"><span title='"+u[_]+"'>"+m[_]+"</span></th>";for(T+=S+"</tr></thead><tbody>",N=this._getDaysInMonth(ee,X),ee===e.selectedYear&&X===e.selectedMonth&&(e.selectedDay=Math.min(e.selectedDay,N)),x=(this._getFirstDayOfMonth(ee,X)-c+7)%7,A=Math.ceil((x+N)/7)+1,L=K&&this.maxRows>A?this.maxRows:A,this.maxRows=L,E=this._daylightSavingAdjust(new Date(ee,X,1-x)),O=0;O<L;O++){for(T+="<tr>",M=p?"<td class='ui-datepicker-week-col'>"+this._get(e,"calculateWeek")(E)+"</td>":"",C=0;C<7;C++)z=v?v.apply(e.input?e.input[0]:null,[E]):[!0,""],R=(F=E.getMonth()!==X)&&!$||!z[0]||Z&&E<Z||Q&&E>Q,M+="<td class='"+((C+c+6)%7>=5?" ui-datepicker-week-end":"")+(F?" ui-datepicker-other-month":"")+(E.getTime()===P.getTime()&&X===e.selectedMonth&&e._keyEvent||y.getTime()===E.getTime()&&y.getTime()===P.getTime()?" "+this._dayOverClass:"")+(R?" "+this._unselectableClass+" ui-state-disabled":"")+(F&&!f?"":" "+z[1]+(E.getTime()===J.getTime()?" "+this._currentClass:"")+(E.getTime()===j.getTime()?" ui-datepicker-today":""))+"'"+(F&&!f||!z[2]?"":" title='"+z[2].replace(/'/g,"&#39;")+"'")+(R?"":" data-handler='selectDay' data-event='click' data-month='"+E.getMonth()+"' data-year='"+E.getFullYear()+"'")+">"+(F&&!f?"&#xa0;":R?"<span class='ui-state-default'>"+E.getDate()+"</span>":"<a class='ui-state-default"+(E.getTime()===j.getTime()?" ui-state-highlight":"")+(E.getTime()===J.getTime()?" ui-state-active":"")+(F?" ui-priority-secondary":"")+"' href='#'>"+E.getDate()+"</a>")+"</td>",E.setDate(E.getDate()+1),E=this._daylightSavingAdjust(E);T+=M+"</tr>"}++X>11&&(X=0,ee++),D+=T+="</tbody></table>"+(K?"</div>"+(q[0]>0&&k===q[1]-1?"<div class='ui-datepicker-row-break'></div>":""):"")}b+=D}return b+=d,e._keyEvent=!1,b}}),e("#modaldatetimepicker").on("click","#next_btn",function(){e("#modaldatetimepicker").removeClass("open-popup"),e("#shippingmethoddiv").removeClass("show-info"),showTimeSlotScreen(e("#productDeliveryDate").val())}),e("#modaldatetimepicker").on("click","#edit_btn",function(){disabledDateCount=0,e("#blocked_dates_toast").remove(),triggerNext=!1,e("#modaldatetimepicker").removeClass("open-popup"),e("#deliverydatepicker .ui-state-active").removeClass("ui-state-active")})}(jQuery);var triggerNext=!1,dateCell=0;$(document).ready(function(e){onHoverImageInit()});var viewCartForOmni=null;document.addEventListener("DOMContentLoaded",initOmniSetup);var resolvedPinDetails,EncryptionKey="rDs99aS15VnZAypMlslZ0t13CSh0NBwEtgcNXX01nBk=",EncryptionIv="B7p9lMCO8JaBMFwzCB1fWw==";$(document).ready(function(e){setPincodeInLL(),setOrDeletePfCookie(),$(document).on("input paste","#pincode-suggestions",function(e){var t="paste"===e.type?e.originalEvent.clipboardData.getData("Text"):e.target.value;isNumber(t)&&t.length===PINCODE_MAX_LENGTH?$(".hassle-free-msg").hide():$(".hassle-free-msg").show()}),"true"!==getCookie("lgpopsh")&&"true"!==getCookie("uscnlg")&&"undefined"!=typeof smartSignIn||triggerLocationLockWithDelay(),$(document).on("click",".locationlock-btn, .no-match-found-btn",function(){openPopupForLocationLock(),initLocationLock()}),$(document).on("change","#optn-indian-catalog, #optn-not-india-catalog",function(){if($("#not-india-catalog").is(":checked"))loadCountryData(loadCountryListUIforLL);else if($("#indian-catalog").is(":checked")){renderWithInIndiaContent();loadPincodeSuggestionsForDomestic({eleId:"pincode-suggestions",isPopUp:!0}),initLocationLock()}}),$(document).on("click",".pin-cross-input",function(e){resetPincodeInput()})});var Validations={VALID:"VALID",IN_VALID:"IN_VALID"};